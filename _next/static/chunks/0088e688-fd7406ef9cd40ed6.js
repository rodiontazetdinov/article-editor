"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[993],{353:function(e,t,r){r.d(t,{Z:function(){return nn}});class n{constructor(e,t){let r,a=" "+e,o=t&&t.loc;if(o&&o.start<=o.end){let e=o.lexer.input;r=o.start;let t=o.end;r===e.length?a+=" at end of input: ":a+=" at position "+(r+1)+": ";let n=e.slice(r,t).replace(/[^]/g,"$&̲");a+=(r>15?"…"+e.slice(r-15,r):e.slice(0,r))+n+(t+15<e.length?e.slice(t,t+15)+"…":e.slice(t))}let l=Error(a);return l.name="ParseError",l.__proto__=n.prototype,l.position=r,l}}n.prototype.__proto__=Error.prototype;let a=/([A-Z])/g,o={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},l=/[&><"']/g,i=function(e){return"ordgroup"===e.type||"color"===e.type?1===e.body.length?i(e.body[0]):e:"font"===e.type?i(e.body):e},s=function(e){if(!e)throw Error("Expected non-null, but got "+String(e));return e};var u,p,c,d,m,h,g,b,f,x,y,w,v,k,A,q,_,S,T,N,$,O,M,B,C,z,I,D={deflt:function(e,t){return void 0===e?t:e},escape:function(e){return String(e).replace(l,e=>o[e])},hyphenate:function(e){return e.replace(a,"-$1").toLowerCase()},isCharacterBox:function(e){let t=i(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type},protocolFromUrl:function(e){let t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?":"===t[2]&&/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?t[1].toLowerCase():null:"_relative"},round:function(e){return+e.toFixed(4)}};class E{constructor(e){e=e||{},this.displayMode=D.deflt(e.displayMode,!1),this.annotate=D.deflt(e.annotate,!1),this.leqno=D.deflt(e.leqno,!1),this.throwOnError=D.deflt(e.throwOnError,!1),this.errorColor=D.deflt(e.errorColor,"#b22222"),this.macros=e.macros||{},this.wrap=D.deflt(e.wrap,"tex"),this.xml=D.deflt(e.xml,!1),this.colorIsTextColor=D.deflt(e.colorIsTextColor,!1),this.strict=D.deflt(e.strict,!1),this.trust=D.deflt(e.trust,!1),this.maxSize=void 0===e.maxSize?[1/0,1/0]:Array.isArray(e.maxSize)?e.maxSize:[1/0,1/0],this.maxExpand=Math.max(0,D.deflt(e.maxExpand,1e3))}isTrusted(e){if(e.url&&!e.protocol){let t=D.protocolFromUrl(e.url);if(null==t)return!1;e.protocol=t}return!!("function"==typeof this.trust?this.trust(e):this.trust)}}let L={},F={};function G({type:e,names:t,props:r,handler:n,mathmlBuilder:a}){let o={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:void 0===r.allowedInMath||r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:n};for(let e=0;e<t.length;++e)L[t[e]]=o;e&&a&&(F[e]=a)}function P({type:e,mathmlBuilder:t}){G({type:e,names:[],props:{numArgs:0},handler(){throw Error("Should never be called.")},mathmlBuilder:t})}let R=function(e){return"ordgroup"===e.type&&1===e.body.length?e.body[0]:e},j=function(e){return"ordgroup"===e.type?e.body:[e]};class U{constructor(e){this.children=e,this.classes=[],this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){let e=document.createDocumentFragment();for(let t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){let e="";for(let t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){return this.children.map(e=>e.toText()).join("")}}let Z=function(e){return e.filter(e=>e).join(" ")},V=function(e,t){this.classes=e||[],this.attributes={},this.style=t||{}},H=function(e){let t=document.createElement(e);for(let e in t.className=Z(this.classes),this.style)Object.prototype.hasOwnProperty.call(this.style,e)&&(t.style[e]=this.style[e]);for(let e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(let e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t},X=function(e){let t=`<${e}`;this.classes.length&&(t+=` class="${D.escape(Z(this.classes))}"`);let r="";for(let e in this.style)Object.prototype.hasOwnProperty.call(this.style,e)&&(r+=`${D.hyphenate(e)}:${this.style[e]};`);for(let e in r&&(t+=` style="${r}"`),this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=` ${e}="${D.escape(this.attributes[e])}"`);t+=">";for(let e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t+`</${e}>`};class W{constructor(e,t,r){V.call(this,e,r),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}toNode(){return H.call(this,"span")}toMarkup(){return X.call(this,"span")}}let Y=class{constructor(e){this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return D.escape(this.text)}};class K{constructor(e,t,r){this.alt=t,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return this.classes.includes(e)}toNode(){let e=document.createElement("img");for(let t in e.src=this.src,e.alt=this.alt,e.className="mord",this.style)Object.prototype.hasOwnProperty.call(this.style,t)&&(e.style[t]=this.style[t]);return e}toMarkup(){let e=`<img src='${this.src}' alt='${this.alt}'`,t="";for(let e in this.style)Object.prototype.hasOwnProperty.call(this.style,e)&&(t+=`${D.hyphenate(e)}:${this.style[e]};`);return t&&(e+=` style="${D.escape(t)}"`),e+=">"}}class J{constructor(e,t,r,n){this.type=e,this.attributes={},this.children=t||[],this.classes=r||[],this.style=n||{}}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){let e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(let t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(let t in this.classes.length>0&&(e.className=Z(this.classes)),this.style)Object.prototype.hasOwnProperty.call(this.style,t)&&(e.style[t]=this.style[t]);for(let t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){let e="<"+this.type;for(let t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+D.escape(this.attributes[t])+'"');this.classes.length>0&&(e+=` class="${D.escape(Z(this.classes))}"`);let t="";for(let e in this.style)Object.prototype.hasOwnProperty.call(this.style,e)&&(t+=`${D.hyphenate(e)}:${this.style[e]};`);t&&(e+=` style="${t}"`),e+=">";for(let t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e+("</"+this.type)+">"}toText(){return this.children.map(e=>e.toText()).join("")}}class Q{constructor(e){this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return D.escape(this.toText())}toText(){return this.text}}let ee=e=>{let t;return 1===e.length&&"mrow"===e[0].type?(t=e.pop()).type="mstyle":t=new J("mstyle",e),t};var et={MathNode:J,TextNode:Q,newDocumentFragment:function(e){return new U(e)}};let er=e=>{let t=0;if(e.body)for(let r of e.body)t+=er(r);else if("supsub"===e.type)t+=er(e.base),e.sub&&(t+=.7*er(e.sub)),e.sup&&(t+=.7*er(e.sup));else if("mathord"===e.type||"textord"===e.type)for(let r of e.text.split("")){let e=r.codePointAt(0);96<e&&e<123||944<e&&e<970?t+=.56:47<e&&e<58?t+=.5:t+=.92}else t+=1;return t},en={widehat:"^",widecheck:"ˇ",widetilde:"~",wideparen:"⏜",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",overparen:"⏜",undergroup:"⏡",underparen:"⏝",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xrightleftarrows:"⇄",yields:"→",yieldsLeft:"←",mesomerism:"↔",longrightharpoonup:"⇀",longleftharpoondown:"↽",eqrightharpoonup:"⇀",eqleftharpoondown:"↽","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},ea=function(e){let t=new et.TextNode(en[e.slice(1)]),r=new et.MathNode("mo",[t]);return r.setAttribute("stretchy","true"),r},eo=["\\widetilde","\\widehat","\\widecheck","\\utilde"];var el={mathMLnode:ea,accentNode:e=>{let t=ea(e.label);if(eo.includes(e.label)){let r=er(e.base);1<r&&r<1.6?t.classes.push("tml-crooked-2"):1.6<=r&&r<2.5?t.classes.push("tml-crooked-3"):2.5<=r&&t.classes.push("tml-crooked-4")}return t}};let ei={bin:1,close:1,inner:1,open:1,punct:1,rel:1},es={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},eu={math:{},text:{}};function ep(e,t,r,n,a){eu[e][n]={group:t,replace:r},a&&r&&(eu[e][r]=eu[e][n])}let ec="math",ed="text",em="accent-token",eh="close",eg="inner",eb="mathord",ef="op-token",ex="open",ey="punct",ew="spacing",ev="textord";ep(ec,"rel","≡","\\equiv",!0),ep(ec,"rel","≺","\\prec",!0),ep(ec,"rel","≻","\\succ",!0),ep(ec,"rel","∼","\\sim",!0),ep(ec,"rel","⟂","\\perp",!0),ep(ec,"rel","⪯","\\preceq",!0),ep(ec,"rel","⪰","\\succeq",!0),ep(ec,"rel","≃","\\simeq",!0),ep(ec,"rel","≌","\\backcong",!0),ep(ec,"rel","|","\\mid",!0),ep(ec,"rel","≪","\\ll",!0),ep(ec,"rel","≫","\\gg",!0),ep(ec,"rel","≍","\\asymp",!0),ep(ec,"rel","∥","\\parallel"),ep(ec,"rel","⌣","\\smile",!0),ep(ec,"rel","⊑","\\sqsubseteq",!0),ep(ec,"rel","⊒","\\sqsupseteq",!0),ep(ec,"rel","≐","\\doteq",!0),ep(ec,"rel","⌢","\\frown",!0),ep(ec,"rel","∋","\\ni",!0),ep(ec,"rel","∌","\\notni",!0),ep(ec,"rel","∝","\\propto",!0),ep(ec,"rel","⊢","\\vdash",!0),ep(ec,"rel","⊣","\\dashv",!0),ep(ec,"rel","∋","\\owns"),ep(ec,"rel","≘","\\arceq",!0),ep(ec,"rel","≙","\\wedgeq",!0),ep(ec,"rel","≚","\\veeeq",!0),ep(ec,"rel","≛","\\stareq",!0),ep(ec,"rel","≝","\\eqdef",!0),ep(ec,"rel","≞","\\measeq",!0),ep(ec,"rel","≟","\\questeq",!0),ep(ec,"rel","≠","\\ne",!0),ep(ec,"rel","≠","\\neq"),ep(ec,"rel","⩵","\\eqeq",!0),ep(ec,"rel","⩶","\\eqeqeq",!0),ep(ec,"rel","∷","\\dblcolon",!0),ep(ec,"rel","≔","\\coloneqq",!0),ep(ec,"rel","≕","\\eqqcolon",!0),ep(ec,"rel","∹","\\eqcolon",!0),ep(ec,"rel","⩴","\\Coloneqq",!0),ep(ec,ey,".","\\ldotp"),ep(ec,ey,"\xb7","\\cdotp"),ep(ec,ev,"#","\\#"),ep(ed,ev,"#","\\#"),ep(ec,ev,"&","\\&"),ep(ed,ev,"&","\\&"),ep(ec,ev,"ℵ","\\aleph",!0),ep(ec,ev,"∀","\\forall",!0),ep(ec,ev,"ℏ","\\hbar",!0),ep(ec,ev,"∃","\\exists",!0),ep(ec,"bin","∇","\\nabla",!0),ep(ec,ev,"♭","\\flat",!0),ep(ec,ev,"ℓ","\\ell",!0),ep(ec,ev,"♮","\\natural",!0),ep(ec,ev,"Å","\\Angstrom",!0),ep(ed,ev,"Å","\\Angstrom",!0),ep(ec,ev,"♣","\\clubsuit",!0),ep(ec,ev,"♧","\\varclubsuit",!0),ep(ec,ev,"℘","\\wp",!0),ep(ec,ev,"♯","\\sharp",!0),ep(ec,ev,"♢","\\diamondsuit",!0),ep(ec,ev,"♦","\\vardiamondsuit",!0),ep(ec,ev,"ℜ","\\Re",!0),ep(ec,ev,"♡","\\heartsuit",!0),ep(ec,ev,"♥","\\varheartsuit",!0),ep(ec,ev,"ℑ","\\Im",!0),ep(ec,ev,"♠","\\spadesuit",!0),ep(ec,ev,"♤","\\varspadesuit",!0),ep(ec,ev,"♀","\\female",!0),ep(ec,ev,"♂","\\male",!0),ep(ec,ev,"\xa7","\\S",!0),ep(ed,ev,"\xa7","\\S"),ep(ec,ev,"\xb6","\\P",!0),ep(ed,ev,"\xb6","\\P"),ep(ed,ev,"☺","\\smiley",!0),ep(ec,ev,"☺","\\smiley",!0),ep(ec,ev,"†","\\dag"),ep(ed,ev,"†","\\dag"),ep(ed,ev,"†","\\textdagger"),ep(ec,ev,"‡","\\ddag"),ep(ed,ev,"‡","\\ddag"),ep(ed,ev,"‡","\\textdaggerdbl"),ep(ec,eh,"⎱","\\rmoustache",!0),ep(ec,ex,"⎰","\\lmoustache",!0),ep(ec,eh,"⟯","\\rgroup",!0),ep(ec,ex,"⟮","\\lgroup",!0),ep(ec,"bin","∓","\\mp",!0),ep(ec,"bin","⊖","\\ominus",!0),ep(ec,"bin","⊎","\\uplus",!0),ep(ec,"bin","⊓","\\sqcap",!0),ep(ec,"bin","∗","\\ast"),ep(ec,"bin","⊔","\\sqcup",!0),ep(ec,"bin","◯","\\bigcirc",!0),ep(ec,"bin","∙","\\bullet",!0),ep(ec,"bin","‡","\\ddagger"),ep(ec,"bin","≀","\\wr",!0),ep(ec,"bin","⨿","\\amalg"),ep(ec,"bin","&","\\And"),ep(ec,"bin","⫽","\\sslash",!0),ep(ec,"rel","⟵","\\longleftarrow",!0),ep(ec,"rel","⇐","\\Leftarrow",!0),ep(ec,"rel","⟸","\\Longleftarrow",!0),ep(ec,"rel","⟶","\\longrightarrow",!0),ep(ec,"rel","⇒","\\Rightarrow",!0),ep(ec,"rel","⟹","\\Longrightarrow",!0),ep(ec,"rel","↔","\\leftrightarrow",!0),ep(ec,"rel","⟷","\\longleftrightarrow",!0),ep(ec,"rel","⇔","\\Leftrightarrow",!0),ep(ec,"rel","⟺","\\Longleftrightarrow",!0),ep(ec,"rel","↤","\\mapsfrom",!0),ep(ec,"rel","↦","\\mapsto",!0),ep(ec,"rel","⟼","\\longmapsto",!0),ep(ec,"rel","↗","\\nearrow",!0),ep(ec,"rel","↩","\\hookleftarrow",!0),ep(ec,"rel","↪","\\hookrightarrow",!0),ep(ec,"rel","↘","\\searrow",!0),ep(ec,"rel","↼","\\leftharpoonup",!0),ep(ec,"rel","⇀","\\rightharpoonup",!0),ep(ec,"rel","↙","\\swarrow",!0),ep(ec,"rel","↽","\\leftharpoondown",!0),ep(ec,"rel","⇁","\\rightharpoondown",!0),ep(ec,"rel","↖","\\nwarrow",!0),ep(ec,"rel","⇌","\\rightleftharpoons",!0),ep(ec,eb,"↯","\\lightning",!0),ep(ec,eb,"∎","\\QED",!0),ep(ec,eb,"‰","\\permil",!0),ep(ed,ev,"‰","\\permil"),ep(ec,eb,"☉","\\astrosun",!0),ep(ec,eb,"☼","\\sun",!0),ep(ec,eb,"☾","\\leftmoon",!0),ep(ec,eb,"☽","\\rightmoon",!0),ep(ec,eb,"⊕","\\Earth"),ep(ec,"rel","≮","\\nless",!0),ep(ec,"rel","⪇","\\lneq",!0),ep(ec,"rel","≨","\\lneqq",!0),ep(ec,"rel","≨︀","\\lvertneqq"),ep(ec,"rel","⋦","\\lnsim",!0),ep(ec,"rel","⪉","\\lnapprox",!0),ep(ec,"rel","⊀","\\nprec",!0),ep(ec,"rel","⋠","\\npreceq",!0),ep(ec,"rel","⋨","\\precnsim",!0),ep(ec,"rel","⪹","\\precnapprox",!0),ep(ec,"rel","≁","\\nsim",!0),ep(ec,"rel","∤","\\nmid",!0),ep(ec,"rel","∤","\\nshortmid"),ep(ec,"rel","⊬","\\nvdash",!0),ep(ec,"rel","⊭","\\nvDash",!0),ep(ec,"rel","⋪","\\ntriangleleft"),ep(ec,"rel","⋬","\\ntrianglelefteq",!0),ep(ec,"rel","⊄","\\nsubset",!0),ep(ec,"rel","⊅","\\nsupset",!0),ep(ec,"rel","⊊","\\subsetneq",!0),ep(ec,"rel","⊊︀","\\varsubsetneq"),ep(ec,"rel","⫋","\\subsetneqq",!0),ep(ec,"rel","⫋︀","\\varsubsetneqq"),ep(ec,"rel","≯","\\ngtr",!0),ep(ec,"rel","⪈","\\gneq",!0),ep(ec,"rel","≩","\\gneqq",!0),ep(ec,"rel","≩︀","\\gvertneqq"),ep(ec,"rel","⋧","\\gnsim",!0),ep(ec,"rel","⪊","\\gnapprox",!0),ep(ec,"rel","⊁","\\nsucc",!0),ep(ec,"rel","⋡","\\nsucceq",!0),ep(ec,"rel","⋩","\\succnsim",!0),ep(ec,"rel","⪺","\\succnapprox",!0),ep(ec,"rel","≆","\\ncong",!0),ep(ec,"rel","∦","\\nparallel",!0),ep(ec,"rel","∦","\\nshortparallel"),ep(ec,"rel","⊯","\\nVDash",!0),ep(ec,"rel","⋫","\\ntriangleright"),ep(ec,"rel","⋭","\\ntrianglerighteq",!0),ep(ec,"rel","⊋","\\supsetneq",!0),ep(ec,"rel","⊋","\\varsupsetneq"),ep(ec,"rel","⫌","\\supsetneqq",!0),ep(ec,"rel","⫌︀","\\varsupsetneqq"),ep(ec,"rel","⊮","\\nVdash",!0),ep(ec,"rel","⪵","\\precneqq",!0),ep(ec,"rel","⪶","\\succneqq",!0),ep(ec,"bin","⊴","\\unlhd"),ep(ec,"bin","⊵","\\unrhd"),ep(ec,"rel","↚","\\nleftarrow",!0),ep(ec,"rel","↛","\\nrightarrow",!0),ep(ec,"rel","⇍","\\nLeftarrow",!0),ep(ec,"rel","⇏","\\nRightarrow",!0),ep(ec,"rel","↮","\\nleftrightarrow",!0),ep(ec,"rel","⇎","\\nLeftrightarrow",!0),ep(ec,"rel","△","\\vartriangle"),ep(ec,ev,"ℏ","\\hslash"),ep(ec,ev,"▽","\\triangledown"),ep(ec,ev,"◊","\\lozenge"),ep(ec,ev,"Ⓢ","\\circledS"),ep(ec,ev,"\xae","\\circledR",!0),ep(ed,ev,"\xae","\\circledR"),ep(ed,ev,"\xae","\\textregistered"),ep(ec,ev,"∡","\\measuredangle",!0),ep(ec,ev,"∄","\\nexists"),ep(ec,ev,"℧","\\mho"),ep(ec,ev,"Ⅎ","\\Finv",!0),ep(ec,ev,"⅁","\\Game",!0),ep(ec,ev,"‵","\\backprime"),ep(ec,ev,"‶","\\backdprime"),ep(ec,ev,"‷","\\backtrprime"),ep(ec,ev,"▲","\\blacktriangle"),ep(ec,ev,"▼","\\blacktriangledown"),ep(ec,ev,"■","\\blacksquare"),ep(ec,ev,"⧫","\\blacklozenge"),ep(ec,ev,"★","\\bigstar"),ep(ec,ev,"∢","\\sphericalangle",!0),ep(ec,ev,"∁","\\complement",!0),ep(ec,ev,"\xf0","\\eth",!0),ep(ed,ev,"\xf0","\xf0"),ep(ec,ev,"╱","\\diagup"),ep(ec,ev,"╲","\\diagdown"),ep(ec,ev,"□","\\square"),ep(ec,ev,"□","\\Box"),ep(ec,ev,"◊","\\Diamond"),ep(ec,ev,"\xa5","\\yen",!0),ep(ed,ev,"\xa5","\\yen",!0),ep(ec,ev,"✓","\\checkmark",!0),ep(ed,ev,"✓","\\checkmark"),ep(ec,ev,"✗","\\ballotx",!0),ep(ed,ev,"✗","\\ballotx"),ep(ed,ev,"•","\\textbullet"),ep(ec,ev,"ℶ","\\beth",!0),ep(ec,ev,"ℸ","\\daleth",!0),ep(ec,ev,"ℷ","\\gimel",!0),ep(ec,ev,"ϝ","\\digamma",!0),ep(ec,ev,"ϰ","\\varkappa"),ep(ec,ex,"⌜","\\ulcorner",!0),ep(ec,eh,"⌝","\\urcorner",!0),ep(ec,ex,"⌞","\\llcorner",!0),ep(ec,eh,"⌟","\\lrcorner",!0),ep(ec,"rel","≦","\\leqq",!0),ep(ec,"rel","⩽","\\leqslant",!0),ep(ec,"rel","⪕","\\eqslantless",!0),ep(ec,"rel","≲","\\lesssim",!0),ep(ec,"rel","⪅","\\lessapprox",!0),ep(ec,"rel","≊","\\approxeq",!0),ep(ec,"bin","⋖","\\lessdot"),ep(ec,"rel","⋘","\\lll",!0),ep(ec,"rel","≶","\\lessgtr",!0),ep(ec,"rel","⋚","\\lesseqgtr",!0),ep(ec,"rel","⪋","\\lesseqqgtr",!0),ep(ec,"rel","≑","\\doteqdot"),ep(ec,"rel","≓","\\risingdotseq",!0),ep(ec,"rel","≒","\\fallingdotseq",!0),ep(ec,"rel","∽","\\backsim",!0),ep(ec,"rel","⋍","\\backsimeq",!0),ep(ec,"rel","⫅","\\subseteqq",!0),ep(ec,"rel","⋐","\\Subset",!0),ep(ec,"rel","⊏","\\sqsubset",!0),ep(ec,"rel","≼","\\preccurlyeq",!0),ep(ec,"rel","⋞","\\curlyeqprec",!0),ep(ec,"rel","≾","\\precsim",!0),ep(ec,"rel","⪷","\\precapprox",!0),ep(ec,"rel","⊲","\\vartriangleleft"),ep(ec,"rel","⊴","\\trianglelefteq"),ep(ec,"rel","⊨","\\vDash",!0),ep(ec,"rel","⊫","\\VDash",!0),ep(ec,"rel","⊪","\\Vvdash",!0),ep(ec,"rel","⌣","\\smallsmile"),ep(ec,"rel","⌢","\\smallfrown"),ep(ec,"rel","≏","\\bumpeq",!0),ep(ec,"rel","≎","\\Bumpeq",!0),ep(ec,"rel","≧","\\geqq",!0),ep(ec,"rel","⩾","\\geqslant",!0),ep(ec,"rel","⪖","\\eqslantgtr",!0),ep(ec,"rel","≳","\\gtrsim",!0),ep(ec,"rel","⪆","\\gtrapprox",!0),ep(ec,"bin","⋗","\\gtrdot"),ep(ec,"rel","⋙","\\ggg",!0),ep(ec,"rel","≷","\\gtrless",!0),ep(ec,"rel","⋛","\\gtreqless",!0),ep(ec,"rel","⪌","\\gtreqqless",!0),ep(ec,"rel","≖","\\eqcirc",!0),ep(ec,"rel","≗","\\circeq",!0),ep(ec,"rel","≜","\\triangleq",!0),ep(ec,"rel","∼","\\thicksim"),ep(ec,"rel","≈","\\thickapprox"),ep(ec,"rel","⫆","\\supseteqq",!0),ep(ec,"rel","⋑","\\Supset",!0),ep(ec,"rel","⊐","\\sqsupset",!0),ep(ec,"rel","≽","\\succcurlyeq",!0),ep(ec,"rel","⋟","\\curlyeqsucc",!0),ep(ec,"rel","≿","\\succsim",!0),ep(ec,"rel","⪸","\\succapprox",!0),ep(ec,"rel","⊳","\\vartriangleright"),ep(ec,"rel","⊵","\\trianglerighteq"),ep(ec,"rel","⊩","\\Vdash",!0),ep(ec,"rel","∣","\\shortmid"),ep(ec,"rel","∥","\\shortparallel"),ep(ec,"rel","≬","\\between",!0),ep(ec,"rel","⋔","\\pitchfork",!0),ep(ec,"rel","∝","\\varpropto"),ep(ec,"rel","◀","\\blacktriangleleft"),ep(ec,"rel","∴","\\therefore",!0),ep(ec,"rel","∍","\\backepsilon"),ep(ec,"rel","▶","\\blacktriangleright"),ep(ec,"rel","∵","\\because",!0),ep(ec,"rel","⋘","\\llless"),ep(ec,"rel","⋙","\\gggtr"),ep(ec,"bin","⊲","\\lhd"),ep(ec,"bin","⊳","\\rhd"),ep(ec,"rel","≂","\\eqsim",!0),ep(ec,"rel","≑","\\Doteq",!0),ep(ec,"rel","⥽","\\strictif",!0),ep(ec,"rel","⥼","\\strictfi",!0),ep(ec,"bin","∔","\\dotplus",!0),ep(ec,"bin","∖","\\smallsetminus"),ep(ec,"bin","⋒","\\Cap",!0),ep(ec,"bin","⋓","\\Cup",!0),ep(ec,"bin","⩞","\\doublebarwedge",!0),ep(ec,"bin","⊟","\\boxminus",!0),ep(ec,"bin","⊞","\\boxplus",!0),ep(ec,"bin","⧄","\\boxslash",!0),ep(ec,"bin","⋇","\\divideontimes",!0),ep(ec,"bin","⋉","\\ltimes",!0),ep(ec,"bin","⋊","\\rtimes",!0),ep(ec,"bin","⋋","\\leftthreetimes",!0),ep(ec,"bin","⋌","\\rightthreetimes",!0),ep(ec,"bin","⋏","\\curlywedge",!0),ep(ec,"bin","⋎","\\curlyvee",!0),ep(ec,"bin","⊝","\\circleddash",!0),ep(ec,"bin","⊛","\\circledast",!0),ep(ec,"bin","⊺","\\intercal",!0),ep(ec,"bin","⋒","\\doublecap"),ep(ec,"bin","⋓","\\doublecup"),ep(ec,"bin","⊠","\\boxtimes",!0),ep(ec,"bin","⋈","\\bowtie",!0),ep(ec,"bin","⋈","\\Join"),ep(ec,"bin","⟕","\\leftouterjoin",!0),ep(ec,"bin","⟖","\\rightouterjoin",!0),ep(ec,"bin","⟗","\\fullouterjoin",!0),ep(ec,"bin","∸","\\dotminus",!0),ep(ec,"bin","⟑","\\wedgedot",!0),ep(ec,"bin","⟇","\\veedot",!0),ep(ec,"bin","⩢","\\doublebarvee",!0),ep(ec,"bin","⩣","\\veedoublebar",!0),ep(ec,"bin","⩟","\\wedgebar",!0),ep(ec,"bin","⩠","\\wedgedoublebar",!0),ep(ec,"bin","⩔","\\Vee",!0),ep(ec,"bin","⩓","\\Wedge",!0),ep(ec,"bin","⩃","\\barcap",!0),ep(ec,"bin","⩂","\\barcup",!0),ep(ec,"bin","⩈","\\capbarcup",!0),ep(ec,"bin","⩀","\\capdot",!0),ep(ec,"bin","⩇","\\capovercup",!0),ep(ec,"bin","⩆","\\cupovercap",!0),ep(ec,"bin","⩍","\\closedvarcap",!0),ep(ec,"bin","⩌","\\closedvarcup",!0),ep(ec,"bin","⨪","\\minusdot",!0),ep(ec,"bin","⨫","\\minusfdots",!0),ep(ec,"bin","⨬","\\minusrdots",!0),ep(ec,"bin","⊻","\\Xor",!0),ep(ec,"bin","⊼","\\Nand",!0),ep(ec,"bin","⊽","\\Nor",!0),ep(ec,"bin","⊽","\\barvee"),ep(ec,"bin","⫴","\\interleave",!0),ep(ec,"bin","⧢","\\shuffle",!0),ep(ec,"bin","⫶","\\threedotcolon",!0),ep(ec,"bin","⦂","\\typecolon",!0),ep(ec,"bin","∾","\\invlazys",!0),ep(ec,"bin","⩋","\\twocaps",!0),ep(ec,"bin","⩊","\\twocups",!0),ep(ec,"bin","⩎","\\Sqcap",!0),ep(ec,"bin","⩏","\\Sqcup",!0),ep(ec,"bin","⩖","\\veeonvee",!0),ep(ec,"bin","⩕","\\wedgeonwedge",!0),ep(ec,"bin","⧗","\\blackhourglass",!0),ep(ec,"bin","⧆","\\boxast",!0),ep(ec,"bin","⧈","\\boxbox",!0),ep(ec,"bin","⧇","\\boxcircle",!0),ep(ec,"bin","⊜","\\circledequal",!0),ep(ec,"bin","⦷","\\circledparallel",!0),ep(ec,"bin","⦶","\\circledvert",!0),ep(ec,"bin","⦵","\\circlehbar",!0),ep(ec,"bin","⟡","\\concavediamond",!0),ep(ec,"bin","⟢","\\concavediamondtickleft",!0),ep(ec,"bin","⟣","\\concavediamondtickright",!0),ep(ec,"bin","⋄","\\diamond",!0),ep(ec,"bin","⧖","\\hourglass",!0),ep(ec,"bin","⟠","\\lozengeminus",!0),ep(ec,"bin","⌽","\\obar",!0),ep(ec,"bin","⦸","\\obslash",!0),ep(ec,"bin","⨸","\\odiv",!0),ep(ec,"bin","⧁","\\ogreaterthan",!0),ep(ec,"bin","⧀","\\olessthan",!0),ep(ec,"bin","⦹","\\operp",!0),ep(ec,"bin","⨷","\\Otimes",!0),ep(ec,"bin","⨶","\\otimeshat",!0),ep(ec,"bin","⋆","\\star",!0),ep(ec,"bin","△","\\triangle",!0),ep(ec,"bin","⨺","\\triangleminus",!0),ep(ec,"bin","⨹","\\triangleplus",!0),ep(ec,"bin","⨻","\\triangletimes",!0),ep(ec,"bin","⟤","\\whitesquaretickleft",!0),ep(ec,"bin","⟥","\\whitesquaretickright",!0),ep(ec,"bin","⨳","\\smashtimes",!0),ep(ec,"rel","⇢","\\dashrightarrow",!0),ep(ec,"rel","⇠","\\dashleftarrow",!0),ep(ec,"rel","⇇","\\leftleftarrows",!0),ep(ec,"rel","⇆","\\leftrightarrows",!0),ep(ec,"rel","⇚","\\Lleftarrow",!0),ep(ec,"rel","↞","\\twoheadleftarrow",!0),ep(ec,"rel","↢","\\leftarrowtail",!0),ep(ec,"rel","↫","\\looparrowleft",!0),ep(ec,"rel","⇋","\\leftrightharpoons",!0),ep(ec,"rel","↶","\\curvearrowleft",!0),ep(ec,"rel","↺","\\circlearrowleft",!0),ep(ec,"rel","↰","\\Lsh",!0),ep(ec,"rel","⇈","\\upuparrows",!0),ep(ec,"rel","↿","\\upharpoonleft",!0),ep(ec,"rel","⇃","\\downharpoonleft",!0),ep(ec,"rel","⊶","\\origof",!0),ep(ec,"rel","⊷","\\imageof",!0),ep(ec,"rel","⊸","\\multimap",!0),ep(ec,"rel","↭","\\leftrightsquigarrow",!0),ep(ec,"rel","⇉","\\rightrightarrows",!0),ep(ec,"rel","⇄","\\rightleftarrows",!0),ep(ec,"rel","↠","\\twoheadrightarrow",!0),ep(ec,"rel","↣","\\rightarrowtail",!0),ep(ec,"rel","↬","\\looparrowright",!0),ep(ec,"rel","↷","\\curvearrowright",!0),ep(ec,"rel","↻","\\circlearrowright",!0),ep(ec,"rel","↱","\\Rsh",!0),ep(ec,"rel","⇊","\\downdownarrows",!0),ep(ec,"rel","↾","\\upharpoonright",!0),ep(ec,"rel","⇂","\\downharpoonright",!0),ep(ec,"rel","⇝","\\rightsquigarrow",!0),ep(ec,"rel","⇝","\\leadsto"),ep(ec,"rel","⇛","\\Rrightarrow",!0),ep(ec,"rel","↾","\\restriction"),ep(ec,ev,"‘","`"),ep(ec,ev,"$","\\$"),ep(ed,ev,"$","\\$"),ep(ed,ev,"$","\\textdollar"),ep(ec,ev,"\xa2","\\cent"),ep(ed,ev,"\xa2","\\cent"),ep(ec,ev,"%","\\%"),ep(ed,ev,"%","\\%"),ep(ec,ev,"_","\\_"),ep(ed,ev,"_","\\_"),ep(ed,ev,"_","\\textunderscore"),ep(ed,ev,"␣","\\textvisiblespace",!0),ep(ec,ev,"∠","\\angle",!0),ep(ec,ev,"∞","\\infty",!0),ep(ec,ev,"′","\\prime"),ep(ec,ev,"″","\\dprime"),ep(ec,ev,"‴","\\trprime"),ep(ec,ev,"⁗","\\qprime"),ep(ec,ev,"△","\\triangle"),ep(ed,ev,"Α","\\Alpha",!0),ep(ed,ev,"Β","\\Beta",!0),ep(ed,ev,"Γ","\\Gamma",!0),ep(ed,ev,"Δ","\\Delta",!0),ep(ed,ev,"Ε","\\Epsilon",!0),ep(ed,ev,"Ζ","\\Zeta",!0),ep(ed,ev,"Η","\\Eta",!0),ep(ed,ev,"Θ","\\Theta",!0),ep(ed,ev,"Ι","\\Iota",!0),ep(ed,ev,"Κ","\\Kappa",!0),ep(ed,ev,"Λ","\\Lambda",!0),ep(ed,ev,"Μ","\\Mu",!0),ep(ed,ev,"Ν","\\Nu",!0),ep(ed,ev,"Ξ","\\Xi",!0),ep(ed,ev,"Ο","\\Omicron",!0),ep(ed,ev,"Π","\\Pi",!0),ep(ed,ev,"Ρ","\\Rho",!0),ep(ed,ev,"Σ","\\Sigma",!0),ep(ed,ev,"Τ","\\Tau",!0),ep(ed,ev,"Υ","\\Upsilon",!0),ep(ed,ev,"Φ","\\Phi",!0),ep(ed,ev,"Χ","\\Chi",!0),ep(ed,ev,"Ψ","\\Psi",!0),ep(ed,ev,"Ω","\\Omega",!0),ep(ec,eb,"Α","\\Alpha",!0),ep(ec,eb,"Β","\\Beta",!0),ep(ec,eb,"Γ","\\Gamma",!0),ep(ec,eb,"Δ","\\Delta",!0),ep(ec,eb,"Ε","\\Epsilon",!0),ep(ec,eb,"Ζ","\\Zeta",!0),ep(ec,eb,"Η","\\Eta",!0),ep(ec,eb,"Θ","\\Theta",!0),ep(ec,eb,"Ι","\\Iota",!0),ep(ec,eb,"Κ","\\Kappa",!0),ep(ec,eb,"Λ","\\Lambda",!0),ep(ec,eb,"Μ","\\Mu",!0),ep(ec,eb,"Ν","\\Nu",!0),ep(ec,eb,"Ξ","\\Xi",!0),ep(ec,eb,"Ο","\\Omicron",!0),ep(ec,eb,"Π","\\Pi",!0),ep(ec,eb,"Ρ","\\Rho",!0),ep(ec,eb,"Σ","\\Sigma",!0),ep(ec,eb,"Τ","\\Tau",!0),ep(ec,eb,"Υ","\\Upsilon",!0),ep(ec,eb,"Φ","\\Phi",!0),ep(ec,eb,"Χ","\\Chi",!0),ep(ec,eb,"Ψ","\\Psi",!0),ep(ec,eb,"Ω","\\Omega",!0),ep(ec,ex,"\xac","\\neg",!0),ep(ec,ex,"\xac","\\lnot"),ep(ec,ev,"⊤","\\top"),ep(ec,ev,"⊥","\\bot"),ep(ec,ev,"∅","\\emptyset"),ep(ec,ev,"⌀","\\varnothing"),ep(ec,eb,"α","\\alpha",!0),ep(ec,eb,"β","\\beta",!0),ep(ec,eb,"γ","\\gamma",!0),ep(ec,eb,"δ","\\delta",!0),ep(ec,eb,"ϵ","\\epsilon",!0),ep(ec,eb,"ζ","\\zeta",!0),ep(ec,eb,"η","\\eta",!0),ep(ec,eb,"θ","\\theta",!0),ep(ec,eb,"ι","\\iota",!0),ep(ec,eb,"κ","\\kappa",!0),ep(ec,eb,"λ","\\lambda",!0),ep(ec,eb,"μ","\\mu",!0),ep(ec,eb,"ν","\\nu",!0),ep(ec,eb,"ξ","\\xi",!0),ep(ec,eb,"ο","\\omicron",!0),ep(ec,eb,"π","\\pi",!0),ep(ec,eb,"ρ","\\rho",!0),ep(ec,eb,"σ","\\sigma",!0),ep(ec,eb,"τ","\\tau",!0),ep(ec,eb,"υ","\\upsilon",!0),ep(ec,eb,"ϕ","\\phi",!0),ep(ec,eb,"χ","\\chi",!0),ep(ec,eb,"ψ","\\psi",!0),ep(ec,eb,"ω","\\omega",!0),ep(ec,eb,"ε","\\varepsilon",!0),ep(ec,eb,"ϑ","\\vartheta",!0),ep(ec,eb,"ϖ","\\varpi",!0),ep(ec,eb,"ϱ","\\varrho",!0),ep(ec,eb,"ς","\\varsigma",!0),ep(ec,eb,"φ","\\varphi",!0),ep(ec,eb,"Ϙ","\\Coppa",!0),ep(ec,eb,"ϙ","\\coppa",!0),ep(ec,eb,"ϙ","\\varcoppa",!0),ep(ec,eb,"Ϟ","\\Koppa",!0),ep(ec,eb,"ϟ","\\koppa",!0),ep(ec,eb,"Ϡ","\\Sampi",!0),ep(ec,eb,"ϡ","\\sampi",!0),ep(ec,eb,"Ϛ","\\Stigma",!0),ep(ec,eb,"ϛ","\\stigma",!0),ep(ec,eb,"⫫","\\Bot"),ep(ec,"bin","∗","∗",!0),ep(ec,"bin","+","+"),ep(ec,"bin","*","*"),ep(ec,"bin","⁄","/",!0),ep(ec,"bin","⁄","⁄"),ep(ec,"bin","−","-",!0),ep(ec,"bin","⋅","\\cdot",!0),ep(ec,"bin","∘","\\circ",!0),ep(ec,"bin","\xf7","\\div",!0),ep(ec,"bin","\xb1","\\pm",!0),ep(ec,"bin","\xd7","\\times",!0),ep(ec,"bin","∩","\\cap",!0),ep(ec,"bin","∪","\\cup",!0),ep(ec,"bin","∖","\\setminus",!0),ep(ec,"bin","∧","\\land"),ep(ec,"bin","∨","\\lor"),ep(ec,"bin","∧","\\wedge",!0),ep(ec,"bin","∨","\\vee",!0),ep(ec,ex,"⟦","\\llbracket",!0),ep(ec,eh,"⟧","\\rrbracket",!0),ep(ec,ex,"⟨","\\langle",!0),ep(ec,ex,"⟪","\\lAngle",!0),ep(ec,ex,"⦉","\\llangle",!0),ep(ec,ex,"|","\\lvert"),ep(ec,ex,"‖","\\lVert"),ep(ec,ev,"!","\\oc"),ep(ec,ev,"?","\\wn"),ep(ec,ev,"↓","\\shpos"),ep(ec,ev,"↕","\\shift"),ep(ec,ev,"↑","\\shneg"),ep(ec,eh,"?","?"),ep(ec,eh,"!","!"),ep(ec,eh,"‼","‼"),ep(ec,eh,"⟩","\\rangle",!0),ep(ec,eh,"⟫","\\rAngle",!0),ep(ec,eh,"⦊","\\rrangle",!0),ep(ec,eh,"|","\\rvert"),ep(ec,eh,"‖","\\rVert"),ep(ec,ex,"⦃","\\lBrace",!0),ep(ec,eh,"⦄","\\rBrace",!0),ep(ec,"rel","=","\\equal",!0),ep(ec,"rel",":",":"),ep(ec,"rel","≈","\\approx",!0),ep(ec,"rel","≅","\\cong",!0),ep(ec,"rel","≥","\\ge"),ep(ec,"rel","≥","\\geq",!0),ep(ec,"rel","←","\\gets"),ep(ec,"rel",">","\\gt",!0),ep(ec,"rel","∈","\\in",!0),ep(ec,"rel","∉","\\notin",!0),ep(ec,"rel","","\\@not"),ep(ec,"rel","⊂","\\subset",!0),ep(ec,"rel","⊃","\\supset",!0),ep(ec,"rel","⊆","\\subseteq",!0),ep(ec,"rel","⊇","\\supseteq",!0),ep(ec,"rel","⊈","\\nsubseteq",!0),ep(ec,"rel","⊈","\\nsubseteqq"),ep(ec,"rel","⊉","\\nsupseteq",!0),ep(ec,"rel","⊉","\\nsupseteqq"),ep(ec,"rel","⊨","\\models"),ep(ec,"rel","←","\\leftarrow",!0),ep(ec,"rel","≤","\\le"),ep(ec,"rel","≤","\\leq",!0),ep(ec,"rel","<","\\lt",!0),ep(ec,"rel","→","\\rightarrow",!0),ep(ec,"rel","→","\\to"),ep(ec,"rel","≱","\\ngeq",!0),ep(ec,"rel","≱","\\ngeqq"),ep(ec,"rel","≱","\\ngeqslant"),ep(ec,"rel","≰","\\nleq",!0),ep(ec,"rel","≰","\\nleqq"),ep(ec,"rel","≰","\\nleqslant"),ep(ec,"rel","⫫","\\Perp",!0),ep(ec,ew,"\xa0","\\ "),ep(ec,ew,"\xa0","\\space"),ep(ec,ew,"\xa0","\\nobreakspace"),ep(ed,ew,"\xa0","\\ "),ep(ed,ew,"\xa0"," "),ep(ed,ew,"\xa0","\\space"),ep(ed,ew,"\xa0","\\nobreakspace"),ep(ec,ew,null,"\\nobreak"),ep(ec,ew,null,"\\allowbreak"),ep(ec,ey,",",","),ep(ed,ey,":",":"),ep(ec,ey,";",";"),ep(ec,"bin","⊼","\\barwedge"),ep(ec,"bin","⊻","\\veebar"),ep(ec,"bin","⊙","\\odot",!0),ep(ec,"bin","⊕︎","\\oplus"),ep(ec,"bin","⊗","\\otimes",!0),ep(ec,ev,"∂","\\partial",!0),ep(ec,"bin","⊘","\\oslash",!0),ep(ec,"bin","⊚","\\circledcirc",!0),ep(ec,"bin","⊡","\\boxdot",!0),ep(ec,"bin","△","\\bigtriangleup"),ep(ec,"bin","▽","\\bigtriangledown"),ep(ec,"bin","†","\\dagger"),ep(ec,"bin","⋄","\\diamond"),ep(ec,"bin","◃","\\triangleleft"),ep(ec,"bin","▹","\\triangleright"),ep(ec,ex,"{","\\{"),ep(ed,ev,"{","\\{"),ep(ed,ev,"{","\\textbraceleft"),ep(ec,eh,"}","\\}"),ep(ed,ev,"}","\\}"),ep(ed,ev,"}","\\textbraceright"),ep(ec,ex,"{","\\lbrace"),ep(ec,eh,"}","\\rbrace"),ep(ec,ex,"[","\\lbrack",!0),ep(ed,ev,"[","\\lbrack",!0),ep(ec,eh,"]","\\rbrack",!0),ep(ed,ev,"]","\\rbrack",!0),ep(ec,ex,"(","\\lparen",!0),ep(ec,eh,")","\\rparen",!0),ep(ec,ex,"⦇","\\llparenthesis",!0),ep(ec,eh,"⦈","\\rrparenthesis",!0),ep(ed,ev,"<","\\textless",!0),ep(ed,ev,">","\\textgreater",!0),ep(ec,ex,"⌊","\\lfloor",!0),ep(ec,eh,"⌋","\\rfloor",!0),ep(ec,ex,"⌈","\\lceil",!0),ep(ec,eh,"⌉","\\rceil",!0),ep(ec,ev,"\\","\\backslash"),ep(ec,ev,"|","|"),ep(ec,ev,"|","\\vert"),ep(ed,ev,"|","\\textbar",!0),ep(ec,ev,"‖","\\|"),ep(ec,ev,"‖","\\Vert"),ep(ed,ev,"‖","\\textbardbl"),ep(ed,ev,"~","\\textasciitilde"),ep(ed,ev,"\\","\\textbackslash"),ep(ed,ev,"^","\\textasciicircum"),ep(ec,"rel","↑","\\uparrow",!0),ep(ec,"rel","⇑","\\Uparrow",!0),ep(ec,"rel","↓","\\downarrow",!0),ep(ec,"rel","⇓","\\Downarrow",!0),ep(ec,"rel","↕","\\updownarrow",!0),ep(ec,"rel","⇕","\\Updownarrow",!0),ep(ec,ef,"∐","\\coprod"),ep(ec,ef,"⋁","\\bigvee"),ep(ec,ef,"⋀","\\bigwedge"),ep(ec,ef,"⨄","\\biguplus"),ep(ec,ef,"⨄","\\bigcupplus"),ep(ec,ef,"⨃","\\bigcupdot"),ep(ec,ef,"⨇","\\bigdoublevee"),ep(ec,ef,"⨈","\\bigdoublewedge"),ep(ec,ef,"⋂","\\bigcap"),ep(ec,ef,"⋃","\\bigcup"),ep(ec,ef,"∫","\\int"),ep(ec,ef,"∫","\\intop"),ep(ec,ef,"∬","\\iint"),ep(ec,ef,"∭","\\iiint"),ep(ec,ef,"∏","\\prod"),ep(ec,ef,"∑","\\sum"),ep(ec,ef,"⨂","\\bigotimes"),ep(ec,ef,"⨁","\\bigoplus"),ep(ec,ef,"⨀","\\bigodot"),ep(ec,ef,"⨉","\\bigtimes"),ep(ec,ef,"∮","\\oint"),ep(ec,ef,"∯","\\oiint"),ep(ec,ef,"∰","\\oiiint"),ep(ec,ef,"∱","\\intclockwise"),ep(ec,ef,"∲","\\varointclockwise"),ep(ec,ef,"⨌","\\iiiint"),ep(ec,ef,"⨍","\\intbar"),ep(ec,ef,"⨎","\\intBar"),ep(ec,ef,"⨏","\\fint"),ep(ec,ef,"⨒","\\rppolint"),ep(ec,ef,"⨓","\\scpolint"),ep(ec,ef,"⨕","\\pointint"),ep(ec,ef,"⨖","\\sqint"),ep(ec,ef,"⨗","\\intlarhk"),ep(ec,ef,"⨘","\\intx"),ep(ec,ef,"⨙","\\intcap"),ep(ec,ef,"⨚","\\intcup"),ep(ec,ef,"⨅","\\bigsqcap"),ep(ec,ef,"⨆","\\bigsqcup"),ep(ec,ef,"∫","\\smallint"),ep(ed,eg,"…","\\textellipsis"),ep(ec,eg,"…","\\mathellipsis"),ep(ed,eg,"…","\\ldots",!0),ep(ec,eg,"…","\\ldots",!0),ep(ec,eg,"⋰","\\iddots",!0),ep(ec,eg,"⋯","\\@cdots",!0),ep(ec,eg,"⋱","\\ddots",!0),ep(ec,ev,"⋮","\\varvdots"),ep(ed,ev,"⋮","\\textvdots"),ep(ec,em,"ˊ","\\acute"),ep(ec,em,"`","\\grave"),ep(ec,em,"\xa8","\\ddot"),ep(ec,em,"…","\\dddot"),ep(ec,em,"….","\\ddddot"),ep(ec,em,"~","\\tilde"),ep(ec,em,"‾","\\bar"),ep(ec,em,"˘","\\breve"),ep(ec,em,"ˇ","\\check"),ep(ec,em,"^","\\hat"),ep(ec,em,"→","\\vec"),ep(ec,em,"˙","\\dot"),ep(ec,em,"˚","\\mathring"),ep(ec,eb,"ı","\\imath",!0),ep(ec,eb,"ȷ","\\jmath",!0),ep(ec,ev,"ı","ı"),ep(ec,ev,"ȷ","ȷ"),ep(ed,ev,"ı","\\i",!0),ep(ed,ev,"ȷ","\\j",!0),ep(ed,ev,"\xdf","\\ss",!0),ep(ed,ev,"\xe6","\\ae",!0),ep(ed,ev,"œ","\\oe",!0),ep(ed,ev,"\xf8","\\o",!0),ep(ec,eb,"\xf8","\\o",!0),ep(ed,ev,"\xc6","\\AE",!0),ep(ed,ev,"Œ","\\OE",!0),ep(ed,ev,"\xd8","\\O",!0),ep(ec,eb,"\xd8","\\O",!0),ep(ed,em,"ˊ","\\'"),ep(ed,em,"ˋ","\\`"),ep(ed,em,"ˆ","\\^"),ep(ed,em,"˜","\\~"),ep(ed,em,"ˉ","\\="),ep(ed,em,"˘","\\u"),ep(ed,em,"˙","\\."),ep(ed,em,"\xb8","\\c"),ep(ed,em,"˚","\\r"),ep(ed,em,"ˇ","\\v"),ep(ed,em,"\xa8",'\\"'),ep(ed,em,"˝","\\H"),ep(ec,em,"ˊ","\\'"),ep(ec,em,"ˋ","\\`"),ep(ec,em,"ˆ","\\^"),ep(ec,em,"˜","\\~"),ep(ec,em,"ˉ","\\="),ep(ec,em,"˘","\\u"),ep(ec,em,"˙","\\."),ep(ec,em,"\xb8","\\c"),ep(ec,em,"˚","\\r"),ep(ec,em,"ˇ","\\v"),ep(ec,em,"\xa8",'\\"'),ep(ec,em,"˝","\\H");let ek={"--":!0,"---":!0,"``":!0,"''":!0};ep(ed,ev,"–","--",!0),ep(ed,ev,"–","\\textendash"),ep(ed,ev,"—","---",!0),ep(ed,ev,"—","\\textemdash"),ep(ed,ev,"‘","`",!0),ep(ed,ev,"‘","\\textquoteleft"),ep(ed,ev,"’","'",!0),ep(ed,ev,"’","\\textquoteright"),ep(ed,ev,"“","``",!0),ep(ed,ev,"“","\\textquotedblleft"),ep(ed,ev,"”","''",!0),ep(ed,ev,"”","\\textquotedblright"),ep(ec,ev,"\xb0","\\degree",!0),ep(ed,ev,"\xb0","\\degree"),ep(ed,ev,"\xb0","\\textdegree",!0),ep(ec,ev,"\xa3","\\pounds"),ep(ec,ev,"\xa3","\\mathsterling",!0),ep(ed,ev,"\xa3","\\pounds"),ep(ed,ev,"\xa3","\\textsterling",!0),ep(ec,ev,"✠","\\maltese"),ep(ed,ev,"✠","\\maltese"),ep(ec,ev,"€","\\euro",!0),ep(ed,ev,"€","\\euro",!0),ep(ed,ev,"€","\\texteuro"),ep(ec,ev,"\xa9","\\copyright",!0),ep(ed,ev,"\xa9","\\textcopyright"),ep(ec,ev,"⌀","\\diameter",!0),ep(ed,ev,"⌀","\\diameter"),ep(ec,ev,"\uD835\uDEE4","\\varGamma"),ep(ec,ev,"\uD835\uDEE5","\\varDelta"),ep(ec,ev,"\uD835\uDEE9","\\varTheta"),ep(ec,ev,"\uD835\uDEEC","\\varLambda"),ep(ec,ev,"\uD835\uDEEF","\\varXi"),ep(ec,ev,"\uD835\uDEF1","\\varPi"),ep(ec,ev,"\uD835\uDEF4","\\varSigma"),ep(ec,ev,"\uD835\uDEF6","\\varUpsilon"),ep(ec,ev,"\uD835\uDEF7","\\varPhi"),ep(ec,ev,"\uD835\uDEF9","\\varPsi"),ep(ec,ev,"\uD835\uDEFA","\\varOmega"),ep(ed,ev,"\uD835\uDEE4","\\varGamma"),ep(ed,ev,"\uD835\uDEE5","\\varDelta"),ep(ed,ev,"\uD835\uDEE9","\\varTheta"),ep(ed,ev,"\uD835\uDEEC","\\varLambda"),ep(ed,ev,"\uD835\uDEEF","\\varXi"),ep(ed,ev,"\uD835\uDEF1","\\varPi"),ep(ed,ev,"\uD835\uDEF4","\\varSigma"),ep(ed,ev,"\uD835\uDEF6","\\varUpsilon"),ep(ed,ev,"\uD835\uDEF7","\\varPhi"),ep(ed,ev,"\uD835\uDEF9","\\varPsi"),ep(ed,ev,"\uD835\uDEFA","\\varOmega");let eA='0123456789/@."';for(let e=0;e<eA.length;e++){let t=eA.charAt(e);ep(ec,ev,t,t)}let eq='0123456789!@*()-=+";:?/.,';for(let e=0;e<eq.length;e++){let t=eq.charAt(e);ep(ed,ev,t,t)}let e_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let e=0;e<e_.length;e++){let t=e_.charAt(e);ep(ec,eb,t,t),ep(ed,ev,t,t)}let eS="\xc7\xd0\xde\xe7\xfeℂℍℕℙℚℝℤℎℏℊℋℌℐℑℒℓ℘ℛℜℬℰℱℳℭℨ";for(let e=0;e<eS.length;e++){let t=eS.charAt(e);ep(ec,eb,t,t),ep(ed,ev,t,t)}let eT="";for(let e=0;e<e_.length;e++){ep(ec,eb,eT=String.fromCharCode(55349,56320+e),eT),ep(ed,ev,eT,eT),ep(ec,eb,eT=String.fromCharCode(55349,56372+e),eT),ep(ed,ev,eT,eT),ep(ec,eb,eT=String.fromCharCode(55349,56424+e),eT),ep(ed,ev,eT,eT),ep(ec,eb,eT=String.fromCharCode(55349,56580+e),eT),ep(ed,ev,eT,eT),ep(ec,eb,eT=String.fromCharCode(55349,56736+e),eT),ep(ed,ev,eT,eT),ep(ec,eb,eT=String.fromCharCode(55349,56788+e),eT),ep(ed,ev,eT,eT),ep(ec,eb,eT=String.fromCharCode(55349,56840+e),eT),ep(ed,ev,eT,eT),ep(ec,eb,eT=String.fromCharCode(55349,56944+e),eT),ep(ed,ev,eT,eT),ep(ec,eb,eT=String.fromCharCode(55349,56632+e),eT),ep(ed,ev,eT,eT);let t=e_.charAt(e);ep(ec,eb,t,eT=String.fromCharCode(55349,56476+e)),ep(ed,ev,t,eT)}for(let e=0;e<10;e++)ep(ec,eb,eT=String.fromCharCode(55349,57294+e),eT),ep(ed,ev,eT,eT),ep(ec,eb,eT=String.fromCharCode(55349,57314+e),eT),ep(ed,ev,eT,eT),ep(ec,eb,eT=String.fromCharCode(55349,57324+e),eT),ep(ed,ev,eT,eT),ep(ec,eb,eT=String.fromCharCode(55349,57334+e),eT),ep(ed,ev,eT,eT);let eN=function(e,t,r){return eu[t][e]&&eu[t][e].replace&&55349!==e.charCodeAt(0)&&!(Object.prototype.hasOwnProperty.call(ek,e)&&r&&(r.fontFamily&&"tt"===r.fontFamily.slice(4,6)||r.font&&"tt"===r.font.slice(4,6)))&&(e=eu[t][e].replace),new et.TextNode(e)},e$=(e,t)=>{if(0===e.children.length||"mtext"!==e.children[e.children.length-1].type){let r=new et.MathNode("mtext",[new et.TextNode(t.children[0].text)]);e.children.push(r)}else e.children[e.children.length-1].children[0].text+=t.children[0].text},eO=e=>{if("mrow"!==e.type&&"mstyle"!==e.type||0===e.children.length)return e;let t=new et.MathNode("mrow");for(let r=0;r<e.children.length;r++){let n=e.children[r];if("mtext"===n.type&&0===Object.keys(n.attributes).length)e$(t,n);else if("mrow"===n.type){let e=!0;for(let t=0;t<n.children.length;t++)if("mtext"!==n.children[t].type||0!==Object.keys(n.attributes).length){e=!1;break}if(e)for(let e=0;e<n.children.length;e++)e$(t,n.children[e]);else t.children.push(n)}else t.children.push(n)}for(let r=0;r<t.children.length;r++)if("mtext"===t.children[r].type){let n=t.children[r];" "===n.children[0].text.charAt(0)&&(n.children[0].text="\xa0"+n.children[0].text.slice(1));let a=n.children[0].text.length;for(let[t,r]of(a>0&&" "===n.children[0].text.charAt(a-1)&&(n.children[0].text=n.children[0].text.slice(0,-1)+"\xa0"),Object.entries(e.attributes)))n.attributes[t]=r}return 1===t.children.length&&"mtext"===t.children[0].type?t.children[0]:t},eM=/^[0-9]$/,eB=(e,t)=>("textord"===e.type&&"."===e.text||"atom"===e.type&&","===e.text)&&e.loc&&t.loc&&e.loc.end===t.loc.start,eC=e=>{if(e.length<2)return;let t=[],r=!1;for(let n=0;n<e.length;n++){let a=e[n];"textord"===a.type&&eM.test(a.text)?(r||t.push({start:n}),r=!0):(r&&(t[t.length-1].end=n-1),r=!1)}r&&(t[t.length-1].end=e.length-1);for(let r=t.length-1;r>0;r--)t[r-1].end===t[r].start-2&&eB(e[t[r].start-1],e[t[r].start])&&(t[r-1].end=t[r].end,t.splice(r,1));for(let r=t.length-1;r>=0;r--){for(let n=t[r].start+1;n<=t[r].end;n++)e[t[r].start].text+=e[n].text;if(e.splice(t[r].start+1,t[r].end-t[r].start),e.length>t[r].start+1){let n=e[t[r].start+1];"supsub"===n.type&&n.base&&"textord"===n.base.type&&eM.test(n.base.text)&&(n.base.text=e[t[r].start].text+n.base.text,e.splice(t[r].start,1))}}},ez=function(e,t=!1){if(1===e.length&&!(e[0]instanceof U))return e[0];if(!t){e[0]instanceof J&&"mo"===e[0].type&&!e[0].attributes.fence&&(e[0].attributes.lspace="0em",e[0].attributes.rspace="0em");let t=e.length-1;e[t]instanceof J&&"mo"===e[t].type&&!e[t].attributes.fence&&(e[t].attributes.lspace="0em",e[t].attributes.rspace="0em")}return new et.MathNode("mrow",e)},eI=e=>"atom"===e.type&&"rel"===e.family||"mclass"===e.type&&"mrel"===e.mclass,eD=function(e,t,r=!1){if(!r&&1===e.length){let r=eL(e[0],t);return r instanceof J&&"mo"===r.type&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}eC(e);let n=[];for(let r=0;r<e.length;r++){let a=eL(e[r],t);r<e.length-1&&eI(e[r])&&eI(e[r+1])&&a.setAttribute("rspace","0em"),r>0&&eI(e[r])&&eI(e[r-1])&&a.setAttribute("lspace","0em"),n.push(a)}return n},eE=function(e,t,r=!1){return ez(eD(e,t,r),r)},eL=function(e,t){if(!e)return new et.MathNode("mrow");if(F[e.type])return F[e.type](e,t);throw new n("Got group of unknown type: '"+e.type+"'")},eF=e=>new et.MathNode("mtd",[],[],{padding:"0",width:"50%"}),eG=(e,t,r,n)=>{(t=eO(t=eE(t[0].body,r))).classes.push("tml-tag"),e=new et.MathNode("mtd",[e]);let a=[eF(),e,eF()];a[n?0:2].classes.push(n?"tml-left":"tml-right"),a[n?0:2].children.push(t);let o=new et.MathNode("mtr",a,["tml-tageqn"]),l=new et.MathNode("mtable",[o]);return l.style.width="100%",l.setAttribute("displaystyle","true"),l},eP="acegıȷmnopqrsuvwxyzαγεηικμνοπρςστυχωϕ\uD835\uDC1A\uD835\uDC1C\uD835\uDC1E\uD835\uDC20\uD835\uDC26\uD835\uDC27\uD835\uDC28\uD835\uDC29\uD835\uDC2A\uD835\uDC2B\uD835\uDC2C\uD835\uDC2E\uD835\uDC2F\uD835\uDC30\uD835\uDC31\uD835\uDC32\uD835\uDC33",eR=new Set(["\\alpha","\\gamma","\\delta","\\epsilon","\\eta","\\iota","\\kappa","\\mu","\\nu","\\pi","\\rho","\\sigma","\\tau","\\upsilon","\\chi","\\psi","\\omega","\\imath","\\jmath"]),ej=new Set(["\\Gamma","\\Delta","\\Sigma","\\Omega","\\beta","\\delta","\\lambda","\\theta","\\psi"]),eU=(e,t)=>{let r=e.isStretchy?el.accentNode(e):new et.MathNode("mo",[eN(e.label,e.mode)]);if("\\vec"===e.label)r.style.transform="scale(0.75) translate(10%, 30%)";else if(r.style.mathStyle="normal",r.style.mathDepth="0",eV.has(e.label)&&D.isCharacterBox(e.base)){let t="",n=e.base.text;(eP.indexOf(n)>-1||eR.has(n))&&(t="tml-xshift"),("ABCDEFGHIJKLMNOPQRSTUVWXYZbdfhkltΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩβδλζφθψ\uD835\uDC00\uD835\uDC01\uD835\uDC02\uD835\uDC03\uD835\uDC04\uD835\uDC05\uD835\uDC06\uD835\uDC07\uD835\uDC08\uD835\uDC09\uD835\uDC0A\uD835\uDC0B\uD835\uDC0C\uD835\uDC0D\uD835\uDC0E\uD835\uDC0F\uD835\uDC10\uD835\uDC11\uD835\uDC12\uD835\uDC13\uD835\uDC14\uD835\uDC15\uD835\uDC16\uD835\uDC17\uD835\uDC18\uD835\uDC19\uD835\uDC1B\uD835\uDC1D\uD835\uDC1F\uD835\uDC21\uD835\uDC24\uD835\uDC25\uD835\uDC2D".indexOf(n)>-1||ej.has(n))&&(t="tml-capshift"),t&&r.classes.push(t)}return e.isStretchy||r.setAttribute("stretchy","false"),new et.MathNode("\\c"===e.label?"munder":"mover",[eL(e.base,t),r])},eZ=new Set(["\\acute","\\grave","\\ddot","\\dddot","\\ddddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"]),eV=new Set(["\\acute","\\bar","\\breve","\\check","\\dot","\\ddot","\\grave","\\hat","\\mathring","\\'","\\^","\\~","\\=","\\u","\\.",'\\"',"\\r","\\H","\\v"]),eH={"\\`":"̀","\\'":"́","\\^":"̂","\\~":"̃","\\=":"̄","\\u":"̆","\\.":"̇",'\\"':"̈","\\r":"̊","\\H":"̋","\\v":"̌"};G({type:"accent",names:["\\acute","\\grave","\\ddot","\\dddot","\\ddddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\overparen","\\widecheck","\\widehat","\\wideparen","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{let r=R(t[0]),n=!eZ.has(e.funcName);return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,base:r}},mathmlBuilder:eU}),G({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\c","\\u","\\.",'\\"',"\\r","\\H","\\v"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{let r=R(t[0]),n=e.parser.mode;return("math"===n&&e.parser.settings.strict&&console.log(`Temml parse error: Command ${e.funcName} is invalid in math mode.`),"text"===n&&r.text&&1===r.text.length&&e.funcName in eH&&eP.indexOf(r.text)>-1)?{type:"textord",mode:"text",text:r.text+eH[e.funcName]}:{type:"accent",mode:n,label:e.funcName,isStretchy:!1,base:r}},mathmlBuilder:eU}),G({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underparen","\\utilde"],props:{numArgs:1},handler:({parser:e,funcName:t},r)=>{let n=r[0];return{type:"accentUnder",mode:e.mode,label:t,base:n}},mathmlBuilder:(e,t)=>{let r=el.accentNode(e);return r.style["math-depth"]=0,new et.MathNode("munder",[eL(e.base,t),r])}});let eX={pt:800/803,pc:9600/803,dd:1238/1157*800/803,cc:14856/1157*800/803,nd:685/642*800/803,nc:1370/107*800/803,sp:1/65536*800/803,mm:25.4/72,cm:2.54/72,in:1/72,px:96/72},eW=["em","ex","mu","pt","mm","cm","in","px","bp","pc","dd","cc","nd","nc","sp"],eY=function(e){return"string"!=typeof e&&(e=e.unit),eW.indexOf(e)>-1},eK=e=>[1,.7,.5][Math.max(e-1,0)],eJ=function(e,t){let r=e.number;if(t.maxSize[0]<0&&r>0)return{number:0,unit:"em"};let a=e.unit;switch(a){case"mm":case"cm":case"in":case"px":if(r*eX[a]>t.maxSize[1])return{number:t.maxSize[1],unit:"pt"};return{number:r,unit:a};case"em":case"ex":return"ex"===a&&(r*=.431),r=Math.min(r/eK(t.level),t.maxSize[0]),{number:D.round(r),unit:"em"};case"bp":return r>t.maxSize[1]&&(r=t.maxSize[1]),{number:r,unit:"pt"};case"pt":case"pc":case"dd":case"cc":case"nd":case"nc":case"sp":return r=Math.min(r*eX[a],t.maxSize[1]),{number:D.round(r),unit:"pt"};case"mu":return r=Math.min(r/18,t.maxSize[0]),{number:D.round(r),unit:"em"};default:throw new n("Invalid unit: '"+a+"'")}},eQ=e=>{let t=new et.MathNode("mspace");return t.setAttribute("width",e+"em"),t},e0=(e,t=.3,r=0)=>{if(null==e&&0===r)return eQ(t);let n=e?[e]:[];return 0!==t&&n.unshift(eQ(t)),r>0&&n.push(eQ(r)),new et.MathNode("mrow",n)},e1=(e,t)=>Number(e)/eK(t),e2=(e,t,r,n)=>{let a,o,l;let i=el.mathMLnode(e),s="eq"===e.slice(1,3),u="x"===e.charAt(1)?"1.75":"cd"===e.slice(2,4)?"3.0":s?"1.0":"2.0";i.setAttribute("lspace","0"),i.setAttribute("rspace",s?"0.5em":"0");let p=n.withLevel(n.level<2?2:3),c=e1(u,p.level),d=e1(u,3),m=e0(null,c.toFixed(4),0),h=e0(null,d.toFixed(4),0),g=e1(s?0:.3,p.level).toFixed(4),b=t&&t.body&&(t.body.body||t.body.length>0);if(b){let e=eL(t,p);e=e0(e,g,g),a=new et.MathNode("mover",[e,h])}let f=r&&r.body&&(r.body.body||r.body.length>0);if(f){let e=eL(r,p);e=e0(e,g,g),o=new et.MathNode("munder",[e,h])}return l=b||f?b&&f?new et.MathNode("munderover",[i,o,a]):b?new et.MathNode("mover",[i,a]):new et.MathNode("munder",[i,o]):new et.MathNode("mover",[i,m]),"3.0"===u&&(l.style.height="1em"),l.setAttribute("accent","false"),l};G({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\yields","\\yieldsLeft","\\mesomerism","\\longrightharpoonup","\\longleftharpoondown","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler:({parser:e,funcName:t},r,n)=>({type:"xArrow",mode:e.mode,name:t,body:r[0],below:n[0]}),mathmlBuilder(e,t){let r=[e2(e.name,e.body,e.below,t)];return r.unshift(eQ(.2778)),r.push(eQ(.2778)),new et.MathNode("mrow",r)}});let e3={"\\xtofrom":["\\xrightarrow","\\xleftarrow"],"\\xleftrightharpoons":["\\xleftharpoonup","\\xrightharpoondown"],"\\xrightleftharpoons":["\\xrightharpoonup","\\xleftharpoondown"],"\\yieldsLeftRight":["\\yields","\\yieldsLeft"],"\\equilibrium":["\\longrightharpoonup","\\longleftharpoondown"],"\\equilibriumRight":["\\longrightharpoonup","\\eqleftharpoondown"],"\\equilibriumLeft":["\\eqrightharpoonup","\\longleftharpoondown"]};function e9(e,t){if(!e||e.type!==t)throw Error(`Expected node of type ${t}, but got `+(e?`node of type ${e.type}`:String(e)));return e}function e5(e){let t=e4(e);if(!t)throw Error("Expected node of symbol group type, but got "+(e?`node of type ${e.type}`:String(e)));return t}function e4(e){return e&&("atom"===e.type||Object.prototype.hasOwnProperty.call(es,e.type))?e:null}G({type:"stackedArrow",names:["\\xtofrom","\\xleftrightharpoons","\\xrightleftharpoons","\\yieldsLeftRight","\\equilibrium","\\equilibriumRight","\\equilibriumLeft"],props:{numArgs:1,numOptionalArgs:1},handler({parser:e,funcName:t},r,n){let a=r[0]?{type:"hphantom",mode:e.mode,body:r[0]}:null,o=n[0]?{type:"hphantom",mode:e.mode,body:n[0]}:null;return{type:"stackedArrow",mode:e.mode,name:t,body:r[0],upperArrowBelow:o,lowerArrowBody:a,below:n[0]}},mathmlBuilder(e,t){let r;let n=e3[e.name][0],a=e3[e.name][1],o=e2(n,e.body,e.upperArrowBelow,t),l=e2(a,e.lowerArrowBody,e.below,t),i=new et.MathNode("mpadded",[o]);if(i.setAttribute("voffset","0.3em"),i.setAttribute("height","+0.3em"),i.setAttribute("depth","-0.3em"),"\\equilibriumLeft"===e.name){let e=new et.MathNode("mpadded",[l]);e.setAttribute("width","0.5em"),r=new et.MathNode("mpadded",[eQ(.2778),e,i,eQ(.2778)])}else i.setAttribute("width","\\equilibriumRight"===e.name?"0.5em":"0"),r=new et.MathNode("mpadded",[eQ(.2778),i,l,eQ(.2778)]);return r.setAttribute("voffset","-0.18em"),r.setAttribute("height","-0.18em"),r.setAttribute("depth","+0.18em"),r}});let e8={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},e7=()=>({type:"styling",body:[],mode:"math",scriptLevel:"display"}),e6=e=>"textord"===e.type&&"@"===e.text,te=(e,t)=>("mathord"===e.type||"atom"===e.type)&&e.text===t;G({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler:({parser:e,funcName:t},r)=>({type:"cdlabel",mode:e.mode,side:t.slice(4),label:r[0]}),mathmlBuilder(e,t){let r=new et.MathNode("mrow",[eL(e.label,t)]);return(r=new et.MathNode("mpadded",[r])).setAttribute("width","0"),"left"===e.side&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),(r=new et.MathNode("mstyle",[r])).setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}}),G({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler:({parser:e},t)=>({type:"cdlabelparent",mode:e.mode,fragment:t[0]}),mathmlBuilder:(e,t)=>new et.MathNode("mrow",[eL(e.fragment,t)])}),G({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler({parser:e,token:t},r){let a=e9(r[0],"ordgroup").body,o="";for(let e=0;e<a.length;e++)o+=e9(a[e],"textord").text;let l=parseInt(o);if(isNaN(l))throw new n(`\\@char has non-numeric argument ${o}`,t);return{type:"textord",mode:e.mode,text:String.fromCodePoint(l)}}});let tt=/^(#[a-f0-9]{3}|#?[a-f0-9]{6})$/i,tr=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i,tn=/^ *\d{1,3} *(?:, *\d{1,3} *){2}$/,ta=/^ *[10](?:\.\d*)? *(?:, *[10](?:\.\d*)? *){2}$/,to=/^[a-f0-9]{6}$/i,tl=e=>{let t=e.toString(16);return 1===t.length&&(t="0"+t),t},ti=JSON.parse(`{
  "Apricot": "#ffb484",
  "Aquamarine": "#08b4bc",
  "Bittersweet": "#c84c14",
  "blue": "#0000FF",
  "Blue": "#303494",
  "BlueGreen": "#08b4bc",
  "BlueViolet": "#503c94",
  "BrickRed": "#b8341c",
  "brown": "#BF8040",
  "Brown": "#802404",
  "BurntOrange": "#f8941c",
  "CadetBlue": "#78749c",
  "CarnationPink": "#f884b4",
  "Cerulean": "#08a4e4",
  "CornflowerBlue": "#40ace4",
  "cyan": "#00FFFF",
  "Cyan": "#08acec",
  "Dandelion": "#ffbc44",
  "darkgray": "#404040",
  "DarkOrchid": "#a8548c",
  "Emerald": "#08ac9c",
  "ForestGreen": "#089c54",
  "Fuchsia": "#90348c",
  "Goldenrod": "#ffdc44",
  "gray": "#808080",
  "Gray": "#98949c",
  "green": "#00FF00",
  "Green": "#08a44c",
  "GreenYellow": "#e0e474",
  "JungleGreen": "#08ac9c",
  "Lavender": "#f89cc4",
  "lightgray": "#c0c0c0",
  "lime": "#BFFF00",
  "LimeGreen": "#90c43c",
  "magenta": "#FF00FF",
  "Magenta": "#f0048c",
  "Mahogany": "#b0341c",
  "Maroon": "#b03434",
  "Melon": "#f89c7c",
  "MidnightBlue": "#086494",
  "Mulberry": "#b03c94",
  "NavyBlue": "#086cbc",
  "olive": "#7F7F00",
  "OliveGreen": "#407c34",
  "orange": "#FF8000",
  "Orange": "#f8843c",
  "OrangeRed": "#f0145c",
  "Orchid": "#b074ac",
  "Peach": "#f8945c",
  "Periwinkle": "#8074bc",
  "PineGreen": "#088c74",
  "pink": "#ff7f7f",
  "Plum": "#98248c",
  "ProcessBlue": "#08b4ec",
  "purple": "#BF0040",
  "Purple": "#a0449c",
  "RawSienna": "#983c04",
  "red": "#ff0000",
  "Red": "#f01c24",
  "RedOrange": "#f86434",
  "RedViolet": "#a0246c",
  "Rhodamine": "#f0549c",
  "Royallue": "#0874bc",
  "RoyalPurple": "#683c9c",
  "RubineRed": "#f0047c",
  "Salmon": "#f8948c",
  "SeaGreen": "#30bc9c",
  "Sepia": "#701404",
  "SkyBlue": "#48c4dc",
  "SpringGreen": "#c8dc64",
  "Tan": "#e09c74",
  "teal": "#007F7F",
  "TealBlue": "#08acb4",
  "Thistle": "#d884b4",
  "Turquoise": "#08b4cc",
  "violet": "#800080",
  "Violet": "#60449c",
  "VioletRed": "#f054a4",
  "WildStrawberry": "#f0246c",
  "yellow": "#FFFF00",
  "Yellow": "#fff404",
  "YellowGreen": "#98cc6c",
  "YellowOrange": "#ffa41c"
}`),ts=(e,t)=>{let r="";if("HTML"===e){if(!tt.test(t))throw new n("Invalid HTML input.");r=t}else if("RGB"===e){if(!tn.test(t))throw new n("Invalid RGB input.");t.split(",").map(e=>{r+=tl(Number(e.trim()))})}else{if(!ta.test(t))throw new n("Invalid rbg input.");t.split(",").map(e=>{let t=Number(e.trim());if(t>1)throw new n("Color rgb input must be < 1.");r+=tl(Number((255*t).toFixed(0)))})}return"#"!==r.charAt(0)&&(r="#"+r),r},tu=(e,t,r)=>{let a=`\\\\color@${e}`;if(!tr.exec(e))throw new n("Invalid color: '"+e+"'",r);return to.test(e)?"#"+e:("#"===e.charAt(0)||(t.has(a)?e=t.get(a).tokens[0].text:ti[e]&&(e=ti[e])),e)},tp=(e,t)=>{let r=eD(e.body,t.withColor(e.color));return r=r.map(t=>(t.style.color=e.color,t)),et.newDocumentFragment(r)};G({type:"color",names:["\\textcolor"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","original"]},handler({parser:e,token:t},r,n){let a=n[0]&&e9(n[0],"raw").string,o="";o=a?ts(a,e9(r[0],"raw").string):tu(e9(r[0],"raw").string,e.gullet.macros,t);let l=r[1];return{type:"color",mode:e.mode,color:o,isTextColor:!0,body:j(l)}},mathmlBuilder:tp}),G({type:"color",names:["\\color"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw"]},handler({parser:e,breakOnTokenText:t,token:r},n,a){let o=a[0]&&e9(a[0],"raw").string,l="";l=o?ts(o,e9(n[0],"raw").string):tu(e9(n[0],"raw").string,e.gullet.macros,r);let i=e.parseExpression(!0,t,!0);return{type:"color",mode:e.mode,color:l,isTextColor:!1,body:i}},mathmlBuilder:tp}),G({type:"color",names:["\\definecolor"],props:{numArgs:3,allowedInText:!0,argTypes:["raw","raw","raw"]},handler({parser:e,funcName:t,token:r},a){let o=e9(a[0],"raw").string;if(!/^[A-Za-z]+$/.test(o))throw new n("Color name must be latin letters.",r);let l=e9(a[1],"raw").string;if(!["HTML","RGB","rgb"].includes(l))throw new n("Color model must be HTML, RGB, or rgb.",r);let i=ts(l,e9(a[2],"raw").string);return e.gullet.macros.set(`\\\\color@${o}`,{tokens:[{text:i}],numArgs:0}),{type:"internal",mode:e.mode}}}),G({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler({parser:e},t,r){let n="["===e.gullet.future().text?e.parseSizeGroup(!0):null,a=!e.settings.displayMode;return{type:"cr",mode:e.mode,newLine:a,size:n&&e9(n,"size").value}},mathmlBuilder(e,t){let r=new et.MathNode("mo");if(e.newLine&&(r.setAttribute("linebreak","newline"),e.size)){let n=eJ(e.size,t);r.setAttribute("height",n.number+n.unit)}return r}});let tc={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},td=e=>{let t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new n("Expected a control sequence",e);return t},tm=e=>{let t=e.gullet.popToken();return"="===t.text&&" "===(t=e.gullet.popToken()).text&&(t=e.gullet.popToken()),t},th=(e,t,r,n)=>{let a=e.gullet.macros.get(r.text);null==a&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,a,n)};G({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler({parser:e,funcName:t}){e.consumeSpaces();let r=e.fetch();if(tc[r.text])return("\\global"===t||"\\\\globallong"===t)&&(r.text=tc[r.text]),e9(e.parseFunction(),"internal");throw new n("Invalid token after macro prefix",r)}}),G({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){let r,a=e.gullet.popToken(),o=a.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(o))throw new n("Expected a control sequence",a);let l=0,i=[[]];for(;"{"!==e.gullet.future().text;)if("#"===(a=e.gullet.popToken()).text){if("{"===e.gullet.future().text){r=e.gullet.future(),i[l].push("{");break}if(a=e.gullet.popToken(),!/^[1-9]$/.test(a.text))throw new n(`Invalid argument number "${a.text}"`);if(parseInt(a.text)!==l+1)throw new n(`Argument number "${a.text}" out of order`);l++,i.push([])}else if("EOF"===a.text)throw new n("Expected a macro definition");else i[l].push(a.text);let{tokens:s}=e.gullet.consumeArg();if(r&&s.unshift(r),"\\edef"===t||"\\xdef"===t){if((s=e.gullet.expandTokens(s)).length>e.gullet.settings.maxExpand)throw new n("Too many expansions in an "+t);s.reverse()}return e.gullet.macros.set(o,{tokens:s,numArgs:l,delimiters:i},t===tc[t]),{type:"internal",mode:e.mode}}}),G({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){let r=td(e.gullet.popToken());e.gullet.consumeSpaces();let n=tm(e);return th(e,r,n,"\\\\globallet"===t),{type:"internal",mode:e.mode}}}),G({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){let r=td(e.gullet.popToken()),n=e.gullet.popToken(),a=e.gullet.popToken();return th(e,r,a,"\\\\globalfuture"===t),e.gullet.pushToken(a),e.gullet.pushToken(n),{type:"internal",mode:e.mode}}}),G({type:"internal",names:["\\newcommand","\\renewcommand","\\providecommand"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){let r="",a=e.gullet.popToken();"{"===a.text?(r=td(e.gullet.popToken()),e.gullet.popToken()):r=td(a);let o=e.gullet.isDefined(r);if(o&&"\\newcommand"===t)throw new n(`\\newcommand{${r}} attempting to redefine ${r}; use \\renewcommand`);if(!o&&"\\renewcommand"===t)throw new n(`\\renewcommand{${r}} when command ${r} does not yet exist; use \\newcommand`);let l=0;if("["===e.gullet.future().text){let t=e.gullet.popToken();if(t=e.gullet.popToken(),!/^[0-9]$/.test(t.text))throw new n(`Invalid number of arguments: "${t.text}"`);if(l=parseInt(t.text),"]"!==(t=e.gullet.popToken()).text)throw new n(`Invalid argument "${t.text}"`)}let{tokens:i}=e.gullet.consumeArg();return e.gullet.macros.set(r,{tokens:i,numArgs:l}),{type:"internal",mode:e.mode}}});let tg={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},tb=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","⦇","\\llparenthesis","⦈","\\rrparenthesis","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lAngle","⟪","\\rAngle","⟫","\\llangle","⦉","\\rrangle","⦊","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","\\llbracket","\\rrbracket","⟦","⟦","\\lBrace","\\rBrace","⦃","⦄","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."],tf=["}","\\left","\\middle","\\right"],tx=e=>e.length>0&&(tb.includes(e)||tg[e]||tf.includes(e)),ty=[0,1.2,1.8,2.4,3];function tw(e,t){let r=e4(e);if(r&&tb.includes(r.text))return["<","\\lt"].includes(r.text)&&(r.text="⟨"),[">","\\gt"].includes(r.text)&&(r.text="⟩"),r;if(r)throw new n(`Invalid delimiter '${r.text}' after '${t.funcName}'`,e);throw new n(`Invalid delimiter type '${e.type}'`,e)}let tv=["/","\\","\\backslash","\\vert","|"];G({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{let r=tw(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:tg[e.funcName].size,mclass:tg[e.funcName].mclass,delim:r.text}},mathmlBuilder:e=>{let t=[];"."===e.delim&&(e.delim=""),t.push(eN(e.delim,e.mode));let r=new et.MathNode("mo",t);return"mopen"===e.mclass||"mclose"===e.mclass?r.setAttribute("fence","true"):r.setAttribute("fence","false"),(tv.includes(e.delim)||e.delim.indexOf("arrow")>-1)&&r.setAttribute("stretchy","true"),r.setAttribute("symmetric","true"),r.setAttribute("minsize",ty[e.size]+"em"),r.setAttribute("maxsize",ty[e.size]+"em"),r}}),G({type:"leftright-right",names:["\\right"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>({type:"leftright-right",mode:e.parser.mode,delim:tw(t[0],e).text})}),G({type:"leftright",names:["\\left"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{let r=tw(t[0],e),a=e.parser;++a.leftrightDepth;let o=a.parseExpression(!1,null,!0),l=a.fetch();for(;"\\middle"===l.text;){a.consume();let e=a.fetch().text;if(!eu.math[e])throw new n(`Invalid delimiter '${e}' after '\\middle'`);tw({type:"atom",mode:"math",text:e},{funcName:"\\middle"}),o.push({type:"middle",mode:"math",delim:e}),a.consume(),o=o.concat(a.parseExpression(!1,null,!0)),l=a.fetch()}--a.leftrightDepth,a.expect("\\right",!1);let i=e9(a.parseFunction(),"leftright-right");return{type:"leftright",mode:a.mode,body:o,left:r.text,right:i.delim}},mathmlBuilder:(e,t)=>{!function(e){if(!e.body)throw Error("Bug: The leftright ParseNode wasn't fully parsed.")}(e);let r=eD(e.body,t);"."===e.left&&(e.left="");let n=new et.MathNode("mo",[eN(e.left,e.mode)]);n.setAttribute("fence","true"),n.setAttribute("form","prefix"),("/"===e.left||"\\"===e.left||e.left.indexOf("arrow")>-1)&&n.setAttribute("stretchy","true"),r.unshift(n),"."===e.right&&(e.right="");let a=new et.MathNode("mo",[eN(e.right,e.mode)]);if(a.setAttribute("fence","true"),a.setAttribute("form","postfix"),("∖"===e.right||e.right.indexOf("arrow")>-1)&&a.setAttribute("stretchy","true"),e.body.length>0){let t=e.body[e.body.length-1];"color"!==t.type||t.isTextColor||a.setAttribute("mathcolor",t.color)}return r.push(a),ez(r)}}),G({type:"middle",names:["\\middle"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{let r=tw(t[0],e);if(!e.parser.leftrightDepth)throw new n("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},mathmlBuilder:(e,t)=>{let r=eN(e.delim,e.mode),n=new et.MathNode("mo",[r]);return n.setAttribute("fence","true"),e.delim.indexOf("arrow")>-1&&n.setAttribute("stretchy","true"),n.setAttribute("form","prefix"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});let tk=e=>{let t=new et.MathNode("mspace");return t.setAttribute("width","3pt"),t},tA=(e,t)=>{let r;switch(r=e.label.indexOf("colorbox")>-1||"\\boxed"===e.label?new et.MathNode("mrow",[tk(),eL(e.body,t),tk()]):new et.MathNode("menclose",[eL(e.body,t)]),e.label){case"\\overline":r.setAttribute("notation","top"),r.classes.push("tml-overline");break;case"\\underline":r.setAttribute("notation","bottom"),r.classes.push("tml-underline");break;case"\\cancel":r.setAttribute("notation","updiagonalstrike"),r.children.push(new et.MathNode("mrow",[],["tml-cancel","upstrike"]));break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike"),r.children.push(new et.MathNode("mrow",[],["tml-cancel","downstrike"]));break;case"\\sout":r.setAttribute("notation","horizontalstrike"),r.children.push(new et.MathNode("mrow",[],["tml-cancel","sout"]));break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike"),r.classes.push("tml-xcancel");break;case"\\longdiv":r.setAttribute("notation","longdiv"),r.classes.push("longdiv-top"),r.children.push(new et.MathNode("mrow",[],["longdiv-arc"]));break;case"\\phase":r.setAttribute("notation","phasorangle"),r.classes.push("phasor-bottom"),r.children.push(new et.MathNode("mrow",[],["phasor-angle"]));break;case"\\textcircled":r.setAttribute("notation","circle"),r.classes.push("circle-pad"),r.children.push(new et.MathNode("mrow",[],["textcircle"]));break;case"\\angl":r.setAttribute("notation","actuarial"),r.classes.push("actuarial");break;case"\\boxed":r.setAttribute("notation","box"),r.classes.push("tml-box"),r.setAttribute("scriptlevel","0"),r.setAttribute("displaystyle","true");break;case"\\fbox":r.setAttribute("notation","box"),r.classes.push("tml-fbox");break;case"\\fcolorbox":case"\\colorbox":{let t={padding:"3pt 0 3pt 0"};"\\fcolorbox"===e.label&&(t.border="0.0667em solid "+String(e.borderColor)),r.style=t}}return e.backgroundColor&&r.setAttribute("mathbackground",e.backgroundColor),r};G({type:"enclose",names:["\\colorbox"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","text"]},handler({parser:e,funcName:t},r,n){let a=n[0]&&e9(n[0],"raw").string,o="";o=a?ts(a,e9(r[0],"raw").string):tu(e9(r[0],"raw").string,e.gullet.macros);let l=r[1];return{type:"enclose",mode:e.mode,label:t,backgroundColor:o,body:l}},mathmlBuilder:tA}),G({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","raw","text"]},handler({parser:e,funcName:t},r,n){let a;let o=n[0]&&e9(n[0],"raw").string,l="";if(o){let e=e9(r[0],"raw").string,t=e9(r[0],"raw").string;l=ts(o,e),a=ts(o,t)}else l=tu(e9(r[0],"raw").string,e.gullet.macros),a=tu(e9(r[1],"raw").string,e.gullet.macros);let i=r[2];return{type:"enclose",mode:e.mode,label:t,backgroundColor:a,borderColor:l,body:i}},mathmlBuilder:tA}),G({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:({parser:e},t)=>({type:"enclose",mode:e.mode,label:"\\fbox",body:t[0]})}),G({type:"enclose",names:["\\angl","\\cancel","\\bcancel","\\xcancel","\\sout","\\overline","\\boxed","\\longdiv","\\phase"],props:{numArgs:1},handler({parser:e,funcName:t},r){let n=r[0];return{type:"enclose",mode:e.mode,label:t,body:n}},mathmlBuilder:tA}),G({type:"enclose",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler({parser:e,funcName:t},r){let n=r[0];return{type:"enclose",mode:e.mode,label:t,body:n}},mathmlBuilder:tA}),G({type:"enclose",names:["\\textcircled"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler({parser:e,funcName:t},r){let n=r[0];return{type:"enclose",mode:e.mode,label:t,body:n}},mathmlBuilder:tA});let tq={};function t_({type:e,names:t,props:r,handler:n,mathmlBuilder:a}){let o={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:n};for(let e=0;e<t.length;++e)tq[t[e]]=o;a&&(F[e]=a)}let tS={DISPLAY:0,TEXT:1,SCRIPT:2,SCRIPTSCRIPT:3},tT={};u=function(e){let t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}},tT["\\noexpand"]=u,p=function(e){let t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}},tT["\\expandafter"]=p,c=function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}},tT["\\@firstoftwo"]=c,d=function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}},tT["\\@secondoftwo"]=d,m=function(e){let t=e.consumeArgs(3);e.consumeSpaces();let r=e.future();return 1===t[0].length&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}},tT["\\@ifnextchar"]=m,tT["\\@ifstar"]="\\@ifnextchar *{\\@firstoftwo{#1}}",h=function(e){let t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}},tT["\\TextOrMath"]=h;let tN=e=>{let t="";for(let r=e.length-1;r>-1;r--)t+=e[r].text;return t},t$={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15},tO=e=>{let t=e.future().text;return"EOF"===t?[null,""]:[t$[t.charAt(0)],t]},tM=(e,t,r)=>{for(let n=1;n<t.length;n++){let a=t$[t.charAt(n)];e*=r,e+=a}return e};function tB(e){let t=e.consumeArgs(1)[0],r="",n=t[t.length-1].loc.start;for(let e=t.length-1;e>=0;e--){let a=t[e].loc.start;a>n&&(r+=" ",n=a),r+=t[e].text,n+=t[e].text.length}return r}g=function(e){let t,r=e.popToken(),a="";if("'"===r.text)t=8,r=e.popToken();else if('"'===r.text)t=16,r=e.popToken();else if("`"===r.text){if("\\"===(r=e.popToken()).text[0])a=r.text.charCodeAt(1);else if("EOF"===r.text)throw new n("\\char` missing argument");else a=r.text.charCodeAt(0)}else t=10;if(t){let o,l=r.text;if(null==(a=t$[l.charAt(0)])||a>=t)throw new n(`Invalid base-${t} digit ${r.text}`);for(a=tM(a,l,t),[o,l]=tO(e);null!=o&&o<t;)a*=t,a+=o,a=tM(a,l,t),e.popToken(),[o,l]=tO(e)}return`\\@char{${a}}`},tT["\\char"]=g,tT["\\surd"]="\\sqrt{\\vphantom{|}}",tT["⊕"]="\\oplus",tT["\\long"]="",tT["\\bgroup"]="{",tT["\\egroup"]="}",tT["~"]="\\nobreakspace",tT["\\lq"]="`",tT["\\rq"]="'",tT["\\aa"]="\\r a",tT["\\Bbbk"]="\\Bbb{k}",tT["\\mathstrut"]="\\vphantom{(}",tT["\\underbar"]="\\underline{\\text{#1}}",tT["\\vdots"]="\\TextOrMath{\\textvdots}{{\\varvdots\\rule{0pt}{15pt}}}\\relax",tT["⋮"]="\\vdots",tT["\\arraystretch"]="1",tT["\\arraycolsep"]="6pt",tT["\\substack"]="\\begin{subarray}{c}#1\\end{subarray}",tT["\\iff"]="\\DOTSB\\;\\Longleftrightarrow\\;",tT["\\implies"]="\\DOTSB\\;\\Longrightarrow\\;",tT["\\impliedby"]="\\DOTSB\\;\\Longleftarrow\\;";let tC={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcap":"\\dotsb","\\bigsqcup":"\\dotsb","\\bigtimes":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};b=function(e){let t="\\dotso",r=e.expandAfterFuture().text;return r in tC?t=tC[r]:"\\not"===r.slice(0,4)?t="\\dotsb":r in eu.math&&["bin","rel"].includes(eu.math[r].group)&&(t="\\dotsb"),t},tT["\\dots"]=b;let tz={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};f=function(e){return e.future().text in tz?"\\ldots\\,":"\\ldots"},tT["\\dotso"]=f,x=function(e){let t=e.future().text;return t in tz&&","!==t?"\\ldots\\,":"\\ldots"},tT["\\dotsc"]=x,y=function(e){return e.future().text in tz?"\\@cdots\\,":"\\@cdots"},tT["\\cdots"]=y,tT["\\dotsb"]="\\cdots",tT["\\dotsm"]="\\cdots",tT["\\dotsi"]="\\!\\cdots",tT["\\idotsint"]="\\dotsi",tT["\\dotsx"]="\\ldots\\,",tT["\\DOTSI"]="\\relax",tT["\\DOTSB"]="\\relax",tT["\\DOTSX"]="\\relax",tT["\\tmspace"]="\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax",tT["\\,"]="{\\tmspace+{3mu}{.1667em}}",tT["\\thinspace"]="\\,",tT["\\>"]="\\mskip{4mu}",tT["\\:"]="{\\tmspace+{4mu}{.2222em}}",tT["\\medspace"]="\\:",tT["\\;"]="{\\tmspace+{5mu}{.2777em}}",tT["\\thickspace"]="\\;",tT["\\!"]="{\\tmspace-{3mu}{.1667em}}",tT["\\negthinspace"]="\\!",tT["\\negmedspace"]="{\\tmspace-{4mu}{.2222em}}",tT["\\negthickspace"]="{\\tmspace-{5mu}{.277em}}",tT["\\enspace"]="\\kern.5em ",tT["\\enskip"]="\\hskip.5em\\relax",tT["\\quad"]="\\hskip1em\\relax",tT["\\qquad"]="\\hskip2em\\relax",tT["\\AA"]="\\TextOrMath{\\Angstrom}{\\mathring{A}}\\relax",tT["\\tag"]="\\@ifstar\\tag@literal\\tag@paren",tT["\\tag@paren"]="\\tag@literal{({#1})}",w=e=>{if(e.macros.get("\\df@tag"))throw new n("Multiple \\tag");return"\\def\\df@tag{\\text{#1}}"},tT["\\tag@literal"]=w,tT["\\bmod"]="\\mathbin{\\text{mod}}",tT["\\pod"]="\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)",tT["\\pmod"]="\\pod{{\\rm mod}\\mkern6mu#1}",tT["\\mod"]="\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1",tT["\\newline"]="\\\\\\relax",tT["\\TeX"]="\\textrm{T}\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125em\\textrm{X}",tT["\\LaTeX"]="\\textrm{L}\\kern-.35em\\raisebox{0.2em}{\\scriptstyle A}\\kern-.15em\\TeX",tT["\\Temml"]="\\textrm{T}\\kern-0.2em\\lower{0.2em}{\\textrm{E}}\\kern-0.08em{\\textrm{M}\\kern-0.08em\\raise{0.2em}\\textrm{M}\\kern-0.08em\\textrm{L}}",tT["\\hspace"]="\\@ifstar\\@hspacer\\@hspace",tT["\\@hspace"]="\\hskip #1\\relax",tT["\\@hspacer"]="\\rule{0pt}{0pt}\\hskip #1\\relax",tT["\\colon"]='\\mathpunct{\\char"3a}',tT["\\prescript"]="\\pres@cript{_{#1}^{#2}}{}{#3}",tT["\\ordinarycolon"]='\\char"3a',tT["\\vcentcolon"]="\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}}",tT["\\coloneq"]='\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"2212}',tT["\\Coloneq"]='\\mathrel{\\char"2237\\char"2212}',tT["\\Eqqcolon"]='\\mathrel{\\char"3d\\char"2237}',tT["\\Eqcolon"]='\\mathrel{\\char"2212\\char"2237}',tT["\\colonapprox"]='\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"2248}',tT["\\Colonapprox"]='\\mathrel{\\char"2237\\char"2248}',tT["\\colonsim"]='\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"223c}',tT["\\Colonsim"]='\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"223c}',tT["\\ratio"]="\\vcentcolon",tT["\\coloncolon"]="\\dblcolon",tT["\\colonequals"]="\\coloneqq",tT["\\coloncolonequals"]="\\Coloneqq",tT["\\equalscolon"]="\\eqqcolon",tT["\\equalscoloncolon"]="\\Eqqcolon",tT["\\colonminus"]="\\coloneq",tT["\\coloncolonminus"]="\\Coloneq",tT["\\minuscolon"]="\\eqcolon",tT["\\minuscoloncolon"]="\\Eqcolon",tT["\\coloncolonapprox"]="\\Colonapprox",tT["\\coloncolonsim"]="\\Colonsim",tT["\\notni"]="\\mathrel{\\char`∌}",tT["\\limsup"]="\\DOTSB\\operatorname*{lim\\,sup}",tT["\\liminf"]="\\DOTSB\\operatorname*{lim\\,inf}",tT["\\injlim"]="\\DOTSB\\operatorname*{inj\\,lim}",tT["\\projlim"]="\\DOTSB\\operatorname*{proj\\,lim}",tT["\\varlimsup"]="\\DOTSB\\operatorname*{\\overline{\\text{lim}}}",tT["\\varliminf"]="\\DOTSB\\operatorname*{\\underline{\\text{lim}}}",tT["\\varinjlim"]="\\DOTSB\\operatorname*{\\underrightarrow{\\text{lim}}}",tT["\\varprojlim"]="\\DOTSB\\operatorname*{\\underleftarrow{\\text{lim}}}",tT["\\centerdot"]="{\\medspace\\rule{0.167em}{0.189em}\\medspace}",tT["\\argmin"]="\\DOTSB\\operatorname*{arg\\,min}",tT["\\argmax"]="\\DOTSB\\operatorname*{arg\\,max}",tT["\\plim"]="\\DOTSB\\operatorname*{plim}",tT["\\leftmodels"]="\\mathop{\\reflectbox{$\\models$}}",tT["\\bra"]="\\mathinner{\\langle{#1}|}",tT["\\ket"]="\\mathinner{|{#1}\\rangle}",tT["\\braket"]="\\mathinner{\\langle{#1}\\rangle}",tT["\\Bra"]="\\left\\langle#1\\right|",tT["\\Ket"]="\\left|#1\\right\\rangle";let tI=(e,t)=>{let r="|"===t[0]?"\\vert":"\\Vert",n=`}\\,\\middle${r}\\,{`;return e.slice(0,t.index)+n+e.slice(t.index+t[0].length)};v=function(e){let t,r=tB(e),n=/\|\||\||\\\|/g;for(;null!==(t=n.exec(r));)r=tI(r,t);return"\\left\\langle{"+r+"}\\right\\rangle"},tT["\\Braket"]=v,k=function(e){let t=tB(e),r=/\|\||\||\\\|/.exec(t);return r&&(t=tI(t,r)),"\\left\\{\\:{"+t+"}\\:\\right\\}"},tT["\\Set"]=k,A=function(e){return"\\{{"+tB(e).replace(/\|/,"}\\mid{")+"}\\}"},tT["\\set"]=A,tT["\\angln"]="{\\angl n}",tT["\\odv"]="\\@ifstar\\odv@next\\odv@numerator",tT["\\odv@numerator"]="\\frac{\\mathrm{d}#1}{\\mathrm{d}#2}",tT["\\odv@next"]="\\frac{\\mathrm{d}}{\\mathrm{d}#2}#1",tT["\\pdv"]="\\@ifstar\\pdv@next\\pdv@numerator";let tD=e=>{let t=e[0][0].text,r=tN(e[1]).split(","),n=String(r.length),a="1"===n?"\\partial":`\\partial^${n}`,o="";return r.map(e=>{o+="\\partial "+e.trim()+"\\,"}),[t,a,o.replace(/\\,$/,"")]};q=function(e){let[t,r,n]=tD(e.consumeArgs(2));return`\\frac{${r} ${t}}{${n}}`},tT["\\pdv@numerator"]=q,_=function(e){let[t,r,n]=tD(e.consumeArgs(2));return`\\frac{${r}}{${n}} ${t}`},tT["\\pdv@next"]=_,tT["\\upalpha"]="\\up@greek{\\alpha}",tT["\\upbeta"]="\\up@greek{\\beta}",tT["\\upgamma"]="\\up@greek{\\gamma}",tT["\\updelta"]="\\up@greek{\\delta}",tT["\\upepsilon"]="\\up@greek{\\epsilon}",tT["\\upzeta"]="\\up@greek{\\zeta}",tT["\\upeta"]="\\up@greek{\\eta}",tT["\\uptheta"]="\\up@greek{\\theta}",tT["\\upiota"]="\\up@greek{\\iota}",tT["\\upkappa"]="\\up@greek{\\kappa}",tT["\\uplambda"]="\\up@greek{\\lambda}",tT["\\upmu"]="\\up@greek{\\mu}",tT["\\upnu"]="\\up@greek{\\nu}",tT["\\upxi"]="\\up@greek{\\xi}",tT["\\upomicron"]="\\up@greek{\\omicron}",tT["\\uppi"]="\\up@greek{\\pi}",tT["\\upalpha"]="\\up@greek{\\alpha}",tT["\\uprho"]="\\up@greek{\\rho}",tT["\\upsigma"]="\\up@greek{\\sigma}",tT["\\uptau"]="\\up@greek{\\tau}",tT["\\upupsilon"]="\\up@greek{\\upsilon}",tT["\\upphi"]="\\up@greek{\\phi}",tT["\\upchi"]="\\up@greek{\\chi}",tT["\\uppsi"]="\\up@greek{\\psi}",tT["\\upomega"]="\\up@greek{\\omega}",tT["\\invamp"]='\\mathbin{\\char"214b}',tT["\\parr"]='\\mathbin{\\char"214b}',tT["\\with"]='\\mathbin{\\char"26}',tT["\\multimapinv"]='\\mathrel{\\char"27dc}',tT["\\multimapboth"]='\\mathrel{\\char"29df}',tT["\\scoh"]='{\\mkern5mu\\char"2322\\mkern5mu}',tT["\\sincoh"]='{\\mkern5mu\\char"2323\\mkern5mu}',S=`{\\mkern5mu\\rule{}{0.7em}\\mathrlap{\\smash{\\raise2mu{\\char"2322}}}
{\\smash{\\lower4mu{\\char"2323}}}\\mkern5mu}`,tT["\\coh"]=S,T=`{\\mkern5mu\\rule{}{0.7em}\\mathrlap{\\smash{\\raise2mu{\\char"2323}}}
{\\smash{\\lower4mu{\\char"2322}}}\\mkern5mu}`,tT["\\incoh"]=T,tT["\\standardstate"]="\\text{\\tiny\\char`⦵}",N=function(e){return tE(e.consumeArgs(1)[0],"ce")},tT["\\ce"]=N,$=function(e){return tE(e.consumeArgs(1)[0],"pu")},tT["\\pu"]=$,O=`{\\rule{0.672em}{0.06em}}`,tT["\\uniDash"]=O,M=`{\\rule{0.15em}{0.06em}\\kern2mu\\rule{0.15em}{0.06em}\\kern2mu\\rule{0.15em}{0.06em}}`,tT["\\triDash"]=M,B=`\\kern0.075em\\raise0.25em{\\triDash}\\kern0.075em`,tT["\\tripleDash"]=B,C=`\\kern0.075em\\mathrlap{\\raise0.125em{\\uniDash}}\\raise0.34em{\\triDash}\\kern0.075em`,tT["\\tripleDashOverLine"]=C,z=`\\kern0.075em\\mathrlap{\\mathrlap{\\raise0.48em{\\triDash}}\\raise0.27em{\\uniDash}}{\\raise0.05em{\\uniDash}}\\kern0.075em`,tT["\\tripleDashOverDoubleLine"]=z,I=`\\kern0.075em\\mathrlap{\\mathrlap{\\raise0.48em{\\uniDash}}\\raise0.27em{\\triDash}}{\\raise0.05em{\\uniDash}}\\kern0.075em`,tT["\\tripleDashBetweenDoubleLine"]=I;var tE=function(e,t){for(var r="",n=e.length&&e[e.length-1].loc.start,a=e.length-1;a>=0;a--)e[a].loc.start>n&&(r+=" ",n=e[a].loc.start),r+=e[a].text,n+=e[a].text.length;return tF.go(tL.go(r,t))},tL={go:function(e,t){if(!e)return[];void 0===t&&(t="ce");var r="0",n={};n.parenthesisLevel=0,e=(e=(e=e.replace(/\n/g," ")).replace(/[\u2212\u2013\u2014\u2010]/g,"-")).replace(/[\u2026]/g,"...");for(var a=10,o=[];;){p!==e?(a=10,p=e):a--;for(var l=tL.stateMachines[t],i=l.transitions[r]||l.transitions["*"],s=0;s<i.length;s++){var u=tL.patterns.match_(i[s].pattern,e);if(u){for(var p,c,d=i[s].task,m=0;m<d.action_.length;m++){if(l.actions[d.action_[m].type_])c=l.actions[d.action_[m].type_](n,u.match_,d.action_[m].option);else if(tL.actions[d.action_[m].type_])c=tL.actions[d.action_[m].type_](n,u.match_,d.action_[m].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+d.action_[m].type_+")"];tL.concatArray(o,c)}if(r=d.nextState||r,!(e.length>0))return o;if(d.revisit||(e=u.remainder),!d.toContinue)break}}if(a<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(e,t){if(t){if(Array.isArray(t))for(var r=0;r<t.length;r++)e.push(t[r]);else e.push(t)}},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(e){var t=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return t&&t[0]?{match_:t.splice(1),remainder:e.substr(t[0].length)}:null},"(-)(9)^(-9)":function(e){var t=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return t&&t[0]?{match_:t.splice(1),remainder:e.substr(t[0].length)}:null},"state of aggregation $":function(e){var t=tL.patterns.findObserveGroups(e,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(t&&t.remainder.match(/^($|[\s,;\)\]\}])/))return t;var r=e.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return r?{match_:r[0],remainder:e.substr(r[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(e){return tL.patterns.findObserveGroups(e,"^{","","","}")},"^($...$)":function(e){return tL.patterns.findObserveGroups(e,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(e){return tL.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(e){return tL.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(e){return tL.patterns.findObserveGroups(e,"_{","","","}")},"_($...$)":function(e){return tL.patterns.findObserveGroups(e,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(e){return tL.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(e){return tL.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(e){return tL.patterns.findObserveGroups(e,"","{","}","")},"{(...)}":function(e){return tL.patterns.findObserveGroups(e,"{","","","}")},"$...$":function(e){return tL.patterns.findObserveGroups(e,"","$","$","")},"${(...)}$":function(e){return tL.patterns.findObserveGroups(e,"${","","","}$")},"$(...)$":function(e){return tL.patterns.findObserveGroups(e,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(e){return tL.patterns.findObserveGroups(e,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(e){return tL.patterns.findObserveGroups(e,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(e){return tL.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(e){return tL.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(e){return tL.patterns.findObserveGroups(e,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(e){return tL.patterns.findObserveGroups(e,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(e){return tL.patterns.findObserveGroups(e,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(e){return tL.patterns.findObserveGroups(e,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(e){return tL.patterns.findObserveGroups(e,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(e){return tL.patterns.findObserveGroups(e,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(e){return tL.patterns.findObserveGroups(e,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(e){return tL.patterns.findObserveGroups(e,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(e){if(t=e.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/))return{match_:t[0],remainder:e.substr(t[0].length)};var t,r=tL.patterns.findObserveGroups(e,"","$","$","");return r&&(t=r.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/))?{match_:t[0],remainder:e.substr(t[0].length)}:null},amount2:function(e){return this.amount(e)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(e){if(e.match(/^\([a-z]+\)$/))return null;var t=e.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return t?{match_:t[0],remainder:e.substr(t[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(e,t,r,n,a,o,l,i,s,u){var p=function(e,t){if("string"==typeof t)return 0!==e.indexOf(t)?null:t;var r=e.match(t);return r?r[0]:null},c=p(e,t);if(null===c||null===(c=p(e=e.substr(c.length),r)))return null;var d=function(e,t,r){for(var n=0;t<e.length;){var a=e.charAt(t),o=p(e.substr(t),r);if(null!==o&&0===n)return{endMatchBegin:t,endMatchEnd:t+o.length};if("{"===a)n++;else if("}"===a){if(0===n)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];n--}t++}return null}(e,c.length,n||a);if(null===d)return null;var m=e.substring(0,n?d.endMatchEnd:d.endMatchBegin);if(!(o||l))return{match_:m,remainder:e.substr(d.endMatchEnd)};var h=this.findObserveGroups(e.substr(d.endMatchEnd),o,l,i,s);if(null===h)return null;var g=[m,h.match_];return{match_:u?g.join(""):g,remainder:h.remainder}},match_:function(e,t){var r=tL.patterns.patterns[e];if(void 0===r)throw["MhchemBugP","mhchem bug P. Please report. ("+e+")"];if("function"==typeof r)return tL.patterns.patterns[e](t);var n=t.match(r);return n?{match_:n[2]?[n[1],n[2]]:n[1]?n[1]:n[0],remainder:t.substr(n[0].length)}:null}},actions:{"a=":function(e,t){e.a=(e.a||"")+t},"b=":function(e,t){e.b=(e.b||"")+t},"p=":function(e,t){e.p=(e.p||"")+t},"o=":function(e,t){e.o=(e.o||"")+t},"q=":function(e,t){e.q=(e.q||"")+t},"d=":function(e,t){e.d=(e.d||"")+t},"rm=":function(e,t){e.rm=(e.rm||"")+t},"text=":function(e,t){e.text_=(e.text_||"")+t},insert:function(e,t,r){return{type_:r}},"insert+p1":function(e,t,r){return{type_:r,p1:t}},"insert+p1+p2":function(e,t,r){return{type_:r,p1:t[0],p2:t[1]}},copy:function(e,t){return t},rm:function(e,t){return{type_:"rm",p1:t||""}},text:function(e,t){return tL.go(t,"text")},"{text}":function(e,t){var r=["{"];return tL.concatArray(r,tL.go(t,"text")),r.push("}"),r},"tex-math":function(e,t){return tL.go(t,"tex-math")},"tex-math tight":function(e,t){return tL.go(t,"tex-math tight")},bond:function(e,t,r){return{type_:"bond",kind_:r||t}},"color0-output":function(e,t){return{type_:"color0",color:t[0]}},ce:function(e,t){return tL.go(t)},"1/2":function(e,t){var r=[];t.match(/^[+\-]/)&&(r.push(t.substr(0,1)),t=t.substr(1));var n=t.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return n[1]=n[1].replace(/\$/g,""),r.push({type_:"frac",p1:n[1],p2:n[2]}),n[3]&&(n[3]=n[3].replace(/\$/g,""),r.push({type_:"tex-math",p1:n[3]})),r},"9,9":function(e,t){return tL.go(t,"9,9")}},createTransitions:function(e){var t,r,n,a,o={};for(t in e)for(r in e[t])for(a=0,n=r.split("|"),e[t][r].stateArray=n;a<n.length;a++)o[n[a]]=[];for(t in e)for(r in e[t])for(a=0,n=e[t][r].stateArray||[];a<n.length;a++){var l=e[t][r];if(l.action_){l.action_=[].concat(l.action_);for(var i=0;i<l.action_.length;i++)"string"==typeof l.action_[i]&&(l.action_[i]={type_:l.action_[i]})}else l.action_=[];for(var s=t.split("|"),u=0;u<s.length;u++)if("*"===n[a])for(var p in o)o[p].push({pattern:s[u],task:l});else o[n[a]].push({pattern:s[u],task:l})}return o},stateMachines:{}};tL.stateMachines={ce:{transitions:tL.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(e,t){var r;if((e.d||"").match(/^[0-9]+$/)){var n=e.d;e.d=void 0,r=this.output(e),e.b=n}else r=this.output(e);return tL.actions["o="](e,t),r},"d= kv":function(e,t){e.d=t,e.dType="kv"},"charge or bond":function(e,t){if(e.beginsWithBond){var r=[];return tL.concatArray(r,this.output(e)),tL.concatArray(r,tL.actions.bond(e,t,"-")),r}e.d=t},"- after o/d":function(e,t,r){var n=tL.patterns.match_("orbital",e.o||""),a=tL.patterns.match_("one lowercase greek letter $",e.o||""),o=tL.patterns.match_("one lowercase latin letter $",e.o||""),l=tL.patterns.match_("$one lowercase latin letter$ $",e.o||""),i="-"===t&&(n&&""===n.remainder||a||o||l);!i||e.a||e.b||e.p||e.d||e.q||n||!o||(e.o="$"+e.o+"$");var s=[];return i?(tL.concatArray(s,this.output(e)),s.push({type_:"hyphen"})):(n=tL.patterns.match_("digits",e.d||""),r&&n&&""===n.remainder?(tL.concatArray(s,tL.actions["d="](e,t)),tL.concatArray(s,this.output(e))):(tL.concatArray(s,this.output(e)),tL.concatArray(s,tL.actions.bond(e,t,"-")))),s},"a to o":function(e){e.o=e.a,e.a=void 0},"sb=true":function(e){e.sb=!0},"sb=false":function(e){e.sb=!1},"beginsWithBond=true":function(e){e.beginsWithBond=!0},"beginsWithBond=false":function(e){e.beginsWithBond=!1},"parenthesisLevel++":function(e){e.parenthesisLevel++},"parenthesisLevel--":function(e){e.parenthesisLevel--},"state of aggregation":function(e,t){return{type_:"state of aggregation",p1:tL.go(t,"o")}},comma:function(e,t){var r=t.replace(/\s*$/,"");return r!==t&&0===e.parenthesisLevel?{type_:"comma enumeration L",p1:r}:{type_:"comma enumeration M",p1:r}},output:function(e,t,r){var n,a,o;for(var l in e.r?(a="M"===e.rdt?tL.go(e.rd,"tex-math"):"T"===e.rdt?[{type_:"text",p1:e.rd||""}]:tL.go(e.rd),o="M"===e.rqt?tL.go(e.rq,"tex-math"):"T"===e.rqt?[{type_:"text",p1:e.rq||""}]:tL.go(e.rq),n={type_:"arrow",r:e.r,rd:a,rq:o}):(n=[],(e.a||e.b||e.p||e.o||e.q||e.d||r)&&(e.sb&&n.push({type_:"entitySkip"}),e.o||e.q||e.d||e.b||e.p||2===r?e.o||e.q||e.d||!e.b&&!e.p?e.o&&"kv"===e.dType&&tL.patterns.match_("d-oxidation$",e.d||"")?e.dType="oxidation":e.o&&"kv"===e.dType&&!e.q&&(e.dType=void 0):(e.o=e.a,e.d=e.b,e.q=e.p,e.a=e.b=e.p=void 0):(e.o=e.a,e.a=void 0),n.push({type_:"chemfive",a:tL.go(e.a,"a"),b:tL.go(e.b,"bd"),p:tL.go(e.p,"pq"),o:tL.go(e.o,"o"),q:tL.go(e.q,"pq"),d:tL.go(e.d,"oxidation"===e.dType?"oxidation":"bd"),dType:e.dType}))),e)"parenthesisLevel"!==l&&"beginsWithBond"!==l&&delete e[l];return n},"oxidation-output":function(e,t){var r=["{"];return tL.concatArray(r,tL.go(t,"oxidation")),r.push("}"),r},"frac-output":function(e,t){return{type_:"frac-ce",p1:tL.go(t[0]),p2:tL.go(t[1])}},"overset-output":function(e,t){return{type_:"overset",p1:tL.go(t[0]),p2:tL.go(t[1])}},"underset-output":function(e,t){return{type_:"underset",p1:tL.go(t[0]),p2:tL.go(t[1])}},"underbrace-output":function(e,t){return{type_:"underbrace",p1:tL.go(t[0]),p2:tL.go(t[1])}},"color-output":function(e,t){return{type_:"color",color1:t[0],color2:tL.go(t[1])}},"r=":function(e,t){e.r=t},"rdt=":function(e,t){e.rdt=t},"rd=":function(e,t){e.rd=t},"rqt=":function(e,t){e.rqt=t},"rq=":function(e,t){e.rq=t},operator:function(e,t,r){return{type_:"operator",kind_:r||t}}}},a:{transitions:tL.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:tL.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:tL.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(e){if(e.text_){var t={type_:"text",p1:e.text_};for(var r in e)delete e[r];return t}}}},pq:{transitions:tL.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(e,t){return{type_:"state of aggregation subscript",p1:tL.go(t,"o")}},"color-output":function(e,t){return{type_:"color",color1:t[0],color2:tL.go(t[1],"pq")}}}},bd:{transitions:tL.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(e,t){return{type_:"color",color1:t[0],color2:tL.go(t[1],"bd")}}}},oxidation:{transitions:tL.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(e,t){return{type_:"roman numeral",p1:t||""}}}},"tex-math":{transitions:tL.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(e){if(e.o){var t={type_:"tex-math",p1:e.o};for(var r in e)delete e[r];return t}}}},"tex-math tight":{transitions:tL.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(e,t){e.o=(e.o||"")+"{"+t+"}"},output:function(e){if(e.o){var t={type_:"tex-math",p1:e.o};for(var r in e)delete e[r];return t}}}},"9,9":{transitions:tL.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:tL.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(e,t){var r=[];return"+-"===t[0]||"+/-"===t[0]?r.push("\\pm "):t[0]&&r.push(t[0]),t[1]&&(tL.concatArray(r,tL.go(t[1],"pu-9,9")),t[2]&&(t[2].match(/[,.]/)?tL.concatArray(r,tL.go(t[2],"pu-9,9")):r.push(t[2])),t[3]=t[4]||t[3],t[3]&&(t[3]=t[3].trim(),"e"===t[3]||"*"===t[3].substr(0,1)?r.push({type_:"cdot"}):r.push({type_:"times"}))),t[3]&&r.push("10^{"+t[5]+"}"),r},"number^":function(e,t){var r=[];return"+-"===t[0]||"+/-"===t[0]?r.push("\\pm "):t[0]&&r.push(t[0]),tL.concatArray(r,tL.go(t[1],"pu-9,9")),r.push("^{"+t[2]+"}"),r},operator:function(e,t,r){return{type_:"operator",kind_:r||t}},space:function(){return{type_:"pu-space-1"}},output:function(e){var t,r=tL.patterns.match_("{(...)}",e.d||"");r&&""===r.remainder&&(e.d=r.match_);var n=tL.patterns.match_("{(...)}",e.q||"");if(n&&""===n.remainder&&(e.q=n.match_),e.d&&(e.d=e.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.d=e.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),e.q){e.q=e.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.q=e.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var a={d:tL.go(e.d,"pu"),q:tL.go(e.q,"pu")};"//"===e.o?t={type_:"pu-frac",p1:a.d,p2:a.q}:(t=a.d,a.d.length>1||a.q.length>1?t.push({type_:" / "}):t.push({type_:"/"}),tL.concatArray(t,a.q))}else t=tL.go(e.d,"pu-2");for(var o in e)delete e[o];return t}}},"pu-2":{transitions:tL.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(e,t){e.rm+="^{"+t+"}"},space:function(){return{type_:"pu-space-2"}},output:function(e){var t=[];if(e.rm){var r=tL.patterns.match_("{(...)}",e.rm||"");t=r&&""===r.remainder?tL.go(r.match_,"pu"):{type_:"rm",p1:e.rm}}for(var n in e)delete e[n];return t}}},"pu-9,9":{transitions:tL.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(e){var t=[];if(e.text_=e.text_||"",e.text_.length>4){var r=e.text_.length%3;0===r&&(r=3);for(var n=e.text_.length-3;n>0;n-=3)t.push(e.text_.substr(n,3)),t.push({type_:"1000 separator"});t.push(e.text_.substr(0,r)),t.reverse()}else t.push(e.text_);for(var a in e)delete e[a];return t},"output-o":function(e){var t=[];if(e.text_=e.text_||"",e.text_.length>4){for(var r=e.text_.length-3,n=0;n<r;n+=3)t.push(e.text_.substr(n,3)),t.push({type_:"1000 separator"});t.push(e.text_.substr(n))}else t.push(e.text_);for(var a in e)delete e[a];return t}}}};var tF={go:function(e,t){if(!e)return"";for(var r="",n=!1,a=0;a<e.length;a++){var o=e[a];"string"==typeof o?r+=o:(r+=tF._go2(o),"1st-level escape"===o.type_&&(n=!0))}return t||n||!r||(r="{"+r+"}"),r},_goInner:function(e){return e?tF.go(e,!0):e},_go2:function(e){var t;switch(e.type_){case"chemfive":t="";var r={a:tF._goInner(e.a),b:tF._goInner(e.b),p:tF._goInner(e.p),o:tF._goInner(e.o),q:tF._goInner(e.q),d:tF._goInner(e.d)};r.a&&(r.a.match(/^[+\-]/)&&(r.a="{"+r.a+"}"),t+=r.a+"\\,"),(r.b||r.p)&&(t+="{\\vphantom{X}}"+("^{\\hphantom{"+(r.b||"")+"}}_{\\hphantom{")+(r.p||"")+"}}{\\vphantom{X}}^{\\vphantom{2}\\mathllap{"+(r.b||"")+"}}_{\\vphantom{2}\\mathllap{"+(r.p||"")+"}}"),r.o&&(r.o.match(/^[+\-]/)&&(r.o="{"+r.o+"}"),t+=r.o),"kv"===e.dType?((r.d||r.q)&&(t+="{\\vphantom{X}}"),r.d&&(t+="^{"+r.d+"}"),r.q&&(t+="_{"+r.q+"}")):"oxidation"===e.dType?(r.d&&(t+="{\\vphantom{X}}^{"+r.d+"}"),r.q&&(t+="{{}}_{"+r.q+"}")):(r.q&&(t+="{{}}_{"+r.q+"}"),r.d&&(t+="{{}}^{"+r.d+"}"));break;case"rm":case"roman numeral":t="\\mathrm{"+e.p1+"}";break;case"text":e.p1.match(/[\^_]/)?(e.p1=e.p1.replace(" ","~").replace("-","\\text{-}"),t="\\mathrm{"+e.p1+"}"):t="\\text{"+e.p1+"}";break;case"state of aggregation":t="\\mskip2mu "+tF._goInner(e.p1);break;case"state of aggregation subscript":t="\\mskip1mu "+tF._goInner(e.p1);break;case"bond":if(!(t=tF._getBond(e.kind_)))throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+e.kind_+")"];break;case"frac":var n="\\frac{"+e.p1+"}{"+e.p2+"}";t="\\mathchoice{\\textstyle"+n+"}{"+n+"}{"+n+"}{"+n+"}";break;case"pu-frac":var a="\\frac{"+tF._goInner(e.p1)+"}{"+tF._goInner(e.p2)+"}";t="\\mathchoice{\\textstyle"+a+"}{"+a+"}{"+a+"}{"+a+"}";break;case"tex-math":case"1st-level escape":t=e.p1+" ";break;case"frac-ce":t="\\frac{"+tF._goInner(e.p1)+"}{"+tF._goInner(e.p2)+"}";break;case"overset":t="\\overset{"+tF._goInner(e.p1)+"}{"+tF._goInner(e.p2)+"}";break;case"underset":t="\\underset{"+tF._goInner(e.p1)+"}{"+tF._goInner(e.p2)+"}";break;case"underbrace":t="\\underbrace{"+tF._goInner(e.p1)+"}_{"+tF._goInner(e.p2)+"}";break;case"color":t="{\\color{"+e.color1+"}{"+tF._goInner(e.color2)+"}}";break;case"color0":t="\\color{"+e.color+"}";break;case"arrow":var o={rd:tF._goInner(e.rd),rq:tF._goInner(e.rq)},l=tF._getArrow(e.r);o.rq&&(l+="[{\\rm "+o.rq+"}]"),o.rd?l+="{\\rm "+o.rd+"}":l+="{}",t=l;break;case"operator":t=tF._getOperator(e.kind_);break;case"space":t=" ";break;case"entitySkip":case"pu-space-1":t="~";break;case"pu-space-2":t="\\mkern3mu ";break;case"1000 separator":t="\\mkern2mu ";break;case"commaDecimal":t="{,}";break;case"comma enumeration L":t="{"+e.p1+"}\\mkern6mu ";break;case"comma enumeration M":t="{"+e.p1+"}\\mkern3mu ";break;case"comma enumeration S":t="{"+e.p1+"}\\mkern1mu ";break;case"hyphen":t="\\text{-}";break;case"addition compound":t="\\,{\\cdot}\\,";break;case"electron dot":t="\\mkern1mu \\text{\\textbullet}\\mkern1mu ";break;case"KV x":t="{\\times}";break;case"prime":t="\\prime ";break;case"cdot":t="\\cdot ";break;case"tight cdot":t="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":t="\\times ";break;case"circa":t="{\\sim}";break;case"^":t="uparrow";break;case"v":t="downarrow";break;case"ellipsis":t="\\ldots ";break;case"/":t="/";break;case" / ":t="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return t},_getArrow:function(e){switch(e){case"->":case"→":case"⟶":return"\\yields";case"<-":return"\\yieldsLeft";case"<->":return"\\mesomerism";case"<-->":return"\\yieldsLeftRight";case"<=>":case"⇌":return"\\equilibrium";case"<=>>":return"\\equilibriumRight";case"<<=>":return"\\equilibriumLeft";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(e){switch(e){case"-":case"1":return"{-}";case"=":case"2":return"{=}";case"#":case"3":return"{\\equiv}";case"~":return"{\\tripleDash}";case"~-":return"{\\tripleDashOverLine}";case"~=":case"~--":return"{\\tripleDashOverDoubleLine}";case"-~-":return"{\\tripleDashBetweenDoubleLine}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(e){switch(e){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":case"$\\approx$":return" {}\\approx{} ";case"v":case"(v)":return" \\downarrow{} ";case"^":case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}};function tG(e){let t=[];e.consumeSpaces();let r=e.fetch().text;for("\\relax"===r&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);"\\hline"===r||"\\hdashline"===r;)e.consume(),t.push("\\hdashline"===r),e.consumeSpaces(),r=e.fetch().text;return t}tT["\\darr"]="\\downarrow",tT["\\dArr"]="\\Downarrow",tT["\\Darr"]="\\Downarrow",tT["\\lang"]="\\langle",tT["\\rang"]="\\rangle",tT["\\uarr"]="\\uparrow",tT["\\uArr"]="\\Uparrow",tT["\\Uarr"]="\\Uparrow",tT["\\N"]="\\mathbb{N}",tT["\\R"]="\\mathbb{R}",tT["\\Z"]="\\mathbb{Z}",tT["\\alef"]="\\aleph",tT["\\alefsym"]="\\aleph",tT["\\bull"]="\\bullet",tT["\\clubs"]="\\clubsuit",tT["\\cnums"]="\\mathbb{C}",tT["\\Complex"]="\\mathbb{C}",tT["\\Dagger"]="\\ddagger",tT["\\diamonds"]="\\diamondsuit",tT["\\empty"]="\\emptyset",tT["\\exist"]="\\exists",tT["\\harr"]="\\leftrightarrow",tT["\\hArr"]="\\Leftrightarrow",tT["\\Harr"]="\\Leftrightarrow",tT["\\hearts"]="\\heartsuit",tT["\\image"]="\\Im",tT["\\infin"]="\\infty",tT["\\isin"]="\\in",tT["\\larr"]="\\leftarrow",tT["\\lArr"]="\\Leftarrow",tT["\\Larr"]="\\Leftarrow",tT["\\lrarr"]="\\leftrightarrow",tT["\\lrArr"]="\\Leftrightarrow",tT["\\Lrarr"]="\\Leftrightarrow",tT["\\natnums"]="\\mathbb{N}",tT["\\plusmn"]="\\pm",tT["\\rarr"]="\\rightarrow",tT["\\rArr"]="\\Rightarrow",tT["\\Rarr"]="\\Rightarrow",tT["\\real"]="\\Re",tT["\\reals"]="\\mathbb{R}",tT["\\Reals"]="\\mathbb{R}",tT["\\sdot"]="\\cdot",tT["\\sect"]="\\S",tT["\\spades"]="\\spadesuit",tT["\\sub"]="\\subset",tT["\\sube"]="\\subseteq",tT["\\supe"]="\\supseteq",tT["\\thetasym"]="\\vartheta",tT["\\weierp"]="\\wp",tT["\\quantity"]="{\\left\\{ #1 \\right\\}}",tT["\\qty"]="{\\left\\{ #1 \\right\\}}",tT["\\pqty"]="{\\left( #1 \\right)}",tT["\\bqty"]="{\\left[ #1 \\right]}",tT["\\vqty"]="{\\left\\vert #1 \\right\\vert}",tT["\\Bqty"]="{\\left\\{ #1 \\right\\}}",tT["\\absolutevalue"]="{\\left\\vert #1 \\right\\vert}",tT["\\abs"]="{\\left\\vert #1 \\right\\vert}",tT["\\norm"]="{\\left\\Vert #1 \\right\\Vert}",tT["\\evaluated"]="{\\left.#1 \\right\\vert}",tT["\\eval"]="{\\left.#1 \\right\\vert}",tT["\\order"]="{\\mathcal{O} \\left( #1 \\right)}",tT["\\commutator"]="{\\left[ #1 , #2 \\right]}",tT["\\comm"]="{\\left[ #1 , #2 \\right]}",tT["\\anticommutator"]="{\\left\\{ #1 , #2 \\right\\}}",tT["\\acomm"]="{\\left\\{ #1 , #2 \\right\\}}",tT["\\poissonbracket"]="{\\left\\{ #1 , #2 \\right\\}}",tT["\\pb"]="{\\left\\{ #1 , #2 \\right\\}}",tT["\\vectorbold"]="{\\boldsymbol{ #1 }}",tT["\\vb"]="{\\boldsymbol{ #1 }}",tT["\\vectorarrow"]="{\\vec{\\boldsymbol{ #1 }}}",tT["\\va"]="{\\vec{\\boldsymbol{ #1 }}}",tT["\\vectorunit"]="{{\\boldsymbol{\\hat{ #1 }}}}",tT["\\vu"]="{{\\boldsymbol{\\hat{ #1 }}}}",tT["\\dotproduct"]="\\mathbin{\\boldsymbol\\cdot}",tT["\\vdot"]="{\\boldsymbol\\cdot}",tT["\\crossproduct"]="\\mathbin{\\boldsymbol\\times}",tT["\\cross"]="\\mathbin{\\boldsymbol\\times}",tT["\\cp"]="\\mathbin{\\boldsymbol\\times}",tT["\\gradient"]="{\\boldsymbol\\nabla}",tT["\\grad"]="{\\boldsymbol\\nabla}",tT["\\divergence"]="{\\grad\\vdot}",tT["\\curl"]="{\\grad\\cross}",tT["\\laplacian"]="\\nabla^2",tT["\\tr"]="{\\operatorname{tr}}",tT["\\Tr"]="{\\operatorname{Tr}}",tT["\\rank"]="{\\operatorname{rank}}",tT["\\erf"]="{\\operatorname{erf}}",tT["\\Res"]="{\\operatorname{Res}}",tT["\\principalvalue"]="{\\mathcal{P}}",tT["\\pv"]="{\\mathcal{P}}",tT["\\PV"]="{\\operatorname{P.V.}}",tT["\\qqtext"]="{\\quad\\text{ #1 }\\quad}",tT["\\qq"]="{\\quad\\text{ #1 }\\quad}",tT["\\qcomma"]="{\\text{,}\\quad}",tT["\\qc"]="{\\text{,}\\quad}",tT["\\qcc"]="{\\quad\\text{c.c.}\\quad}",tT["\\qif"]="{\\quad\\text{if}\\quad}",tT["\\qthen"]="{\\quad\\text{then}\\quad}",tT["\\qelse"]="{\\quad\\text{else}\\quad}",tT["\\qotherwise"]="{\\quad\\text{otherwise}\\quad}",tT["\\qunless"]="{\\quad\\text{unless}\\quad}",tT["\\qgiven"]="{\\quad\\text{given}\\quad}",tT["\\qusing"]="{\\quad\\text{using}\\quad}",tT["\\qassume"]="{\\quad\\text{assume}\\quad}",tT["\\qsince"]="{\\quad\\text{since}\\quad}",tT["\\qlet"]="{\\quad\\text{let}\\quad}",tT["\\qfor"]="{\\quad\\text{for}\\quad}",tT["\\qall"]="{\\quad\\text{all}\\quad}",tT["\\qeven"]="{\\quad\\text{even}\\quad}",tT["\\qodd"]="{\\quad\\text{odd}\\quad}",tT["\\qinteger"]="{\\quad\\text{integer}\\quad}",tT["\\qand"]="{\\quad\\text{and}\\quad}",tT["\\qor"]="{\\quad\\text{or}\\quad}",tT["\\qas"]="{\\quad\\text{as}\\quad}",tT["\\qin"]="{\\quad\\text{in}\\quad}",tT["\\differential"]="{\\text{d}}",tT["\\dd"]="{\\text{d}}",tT["\\derivative"]="{\\frac{\\text{d}{ #1 }}{\\text{d}{ #2 }}}",tT["\\dv"]="{\\frac{\\text{d}{ #1 }}{\\text{d}{ #2 }}}",tT["\\partialderivative"]="{\\frac{\\partial{ #1 }}{\\partial{ #2 }}}",tT["\\variation"]="{\\delta}",tT["\\var"]="{\\delta}",tT["\\functionalderivative"]="{\\frac{\\delta{ #1 }}{\\delta{ #2 }}}",tT["\\fdv"]="{\\frac{\\delta{ #1 }}{\\delta{ #2 }}}",tT["\\innerproduct"]="{\\left\\langle {#1} \\mid { #2} \\right\\rangle}",tT["\\outerproduct"]="{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}",tT["\\dyad"]="{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}",tT["\\ketbra"]="{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}",tT["\\op"]="{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}",tT["\\expectationvalue"]="{\\left\\langle {#1 } \\right\\rangle}",tT["\\expval"]="{\\left\\langle {#1 } \\right\\rangle}",tT["\\ev"]="{\\left\\langle {#1 } \\right\\rangle}",tT["\\matrixelement"]="{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}",tT["\\matrixel"]="{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}",tT["\\mel"]="{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}";let tP=e=>{if(!e.parser.settings.displayMode)throw new n(`{${e.envName}} can be used only in display mode.`)},tR=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/,tj=e=>{let t=e.get("\\arraystretch");"string"!=typeof t&&(t=tN(t.tokens)),t=isNaN(t)?null:Number(t);let r=e.get("\\arraycolsep");"string"!=typeof r&&(r=tN(r.tokens));let n=tR.exec(r);return[t,n?{number:+(n[1]+n[2]),unit:n[3]}:null]},tU=(e,t,r)=>{let n;let a=e.tags.shift();return a?a.body?(n=eE(a.body,t,!0)).classes=["tml-tag"]:n=new et.MathNode("mtext",[],[]):n=e.envClasses.includes("multline")&&(e.leqno&&0!==r||!e.leqno&&r!==e.body.length-1)?new et.MathNode("mtext",[],[]):new et.MathNode("mtext",[new W(["tml-eqn"])]),n};function tZ(e,{cols:t,envClasses:r,addEqnNum:a,singleRow:o,emptySingleRow:l,maxNumCols:i,leqno:s,arraystretch:u,arraycolsep:p},c){let d;e.gullet.beginGroup(),o||e.gullet.macros.set("\\cr","\\\\\\relax"),a&&(e.gullet.macros.set("\\tag","\\@ifstar\\envtag@literal\\envtag@paren"),e.gullet.macros.set("\\envtag@paren","\\env@tag{{(\\text{#1})}}"),e.gullet.macros.set("\\envtag@literal","\\env@tag{\\text{#1}}"),e.gullet.macros.set("\\notag","\\env@notag"),e.gullet.macros.set("\\nonumber","\\env@notag")),e.gullet.beginGroup();let m=[],h=[m],g=[],b=[],f=[];for(f.push(tG(e));;){let t=e.parseExpression(!1,o?"\\end":"\\\\");if(a&&!d){for(let e=0;e<t.length;e++)if("envTag"===t[e].type||"noTag"===t[e].type){d="envTag"===t[e].type?t.splice(e,1)[0].body.body[0]:{body:null};break}}e.gullet.endGroup(),e.gullet.beginGroup(),t={type:"ordgroup",mode:e.mode,body:t,semisimple:!0},m.push(t);let s=e.fetch().text;if("&"===s){if(i&&m.length===i){if(r.includes("array")){if(e.settings.strict)throw new n("Too few columns specified in the {array} column argument.",e.nextToken)}else if(2===i)throw new n("The split environment accepts no more than two columns",e.nextToken);else throw new n("The equation environment accepts only one column",e.nextToken)}e.consume()}else if("\\end"===s){1===m.length&&0===t.body.length&&(h.length>1||!l)&&h.pop(),f.length<h.length+1&&f.push([]);break}else if("\\\\"===s){let t;e.consume()," "!==e.gullet.future().text&&(t=e.parseSizeGroup(!0)),g.push(t?t.value:null),b.push(d),f.push(tG(e)),m=[],d=null,h.push(m)}else throw new n("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),b.push(d),{type:"array",mode:e.mode,body:h,cols:t,rowGaps:g,hLinesBeforeRow:f,envClasses:r,addEqnNum:a,scriptLevel:c,tags:b,leqno:s,arraystretch:u,arraycolsep:p}}function tV(e){return"d"===e.slice(0,1)?"display":"text"}let tH={c:"center ",l:"left ",r:"right "},tX=e=>{let t=new et.MathNode("mtd",[]);return t.style={padding:"0",width:"50%"},e.envClasses.includes("multline")&&(t.style.width="7.5%"),t},tW=function(e,t){let r=[],n=e.body.length,a=e.hLinesBeforeRow;for(let o=0;o<n;o++){let l=e.body[o],i=[],s="text"===e.scriptLevel?tS.TEXT:"script"===e.scriptLevel?tS.SCRIPT:tS.DISPLAY;for(let r=0;r<l.length;r++){let a=new et.MathNode("mtd",[eL(l[r],t.withLevel(s))]);if(e.envClasses.includes("multline")){let e=0===o?"left":o===n-1?"right":"center";a.setAttribute("columnalign",e),"center"!==e&&a.classes.push("tml-"+e)}i.push(a)}if(e.addEqnNum){i.unshift(tX(e)),i.push(tX(e));let r=tU(e,t.withLevel(s),o);e.leqno?(i[0].children.push(r),i[0].classes.push("tml-left")):(i[i.length-1].children.push(r),i[i.length-1].classes.push("tml-right"))}let u=new et.MathNode("mtr",i,[]);0===o&&a[0].length>0&&(2===a[0].length?u.children.forEach(e=>{e.style.borderTop="0.15em double"}):u.children.forEach(e=>{e.style.borderTop=a[0][0]?"0.06em dashed":"0.06em solid"})),a[o+1].length>0&&(2===a[o+1].length?u.children.forEach(e=>{e.style.borderBottom="0.15em double"}):u.children.forEach(e=>{e.style.borderBottom=a[o+1][0]?"0.06em dashed":"0.06em solid"})),r.push(u)}if(e.envClasses.length>0){let n=e.envClasses.includes("jot")?"0.7":e.envClasses.includes("small")?"0.35":"0.5";e.arraystretch&&1!==e.arraystretch&&(n=String(1.4*e.arraystretch-.8));let a=e.envClasses.includes("abut")?"0":e.envClasses.includes("cases")?"0":e.envClasses.includes("small")?"0.1389":e.envClasses.includes("cd")?"0.25":"0.4",o="em";if(e.arraycolsep){let r=eJ(e.arraycolsep,t);a=r.number,o=r.unit}let l=0===r.length?0:r[0].children.length,i=(t,r)=>0===t&&0===r||t===l-1&&1===r?"0":"align"!==e.envClasses[0]?a:1===r?"0":e.addEqnNum?t%2?"1":"0":t%2?"0":"1";for(let e=0;e<r.length;e++)for(let t=0;t<r[e].children.length;t++)r[e].children[t].style.padding=`${n}ex ${i(t,1)}${o} ${n}ex ${i(t,0)}${o}`;let s=e.envClasses.includes("align")||e.envClasses.includes("alignat");for(let t=0;t<r.length;t++){let n=r[t];if(s){for(let e=0;e<n.children.length;e++)n.children[e].classes=["tml-"+(e%2?"left":"right")];if(e.addEqnNum){let t=e.leqno?0:n.children.length-1;n.children[t].classes=["tml-"+(e.leqno?"left":"right")]}}if(n.children.length>1&&e.envClasses.includes("cases")&&(n.children[1].style.padding=n.children[1].style.padding.replace(/0em$/,"1em")),e.envClasses.includes("cases")||e.envClasses.includes("subarray"))for(let e of n.children)e.classes.push("tml-left")}}else for(let e=0;e<r.length;e++)r[e].children[0].style.paddingLeft="0em",r[e].children.length===r[0].children.length&&(r[e].children[r[e].children.length-1].style.paddingRight="0em");let o=new et.MathNode("mtable",r);"display"===e.scriptLevel&&o.setAttribute("displaystyle","true"),(e.addEqnNum||e.envClasses.includes("multline"))&&(o.style.width="100%");let l="";if(e.cols&&e.cols.length>0){let t=e.cols,r=!1,n=0,a=t.length;for(;"separator"===t[n].type;)n+=1;for(;"separator"===t[a-1].type;)a-=1;if("separator"===t[0].type){let e="separator"===t[1].type?"0.15em double":"|"===t[0].separator?"0.06em solid ":"0.06em dashed ";for(let t of o.children)t.children[0].style.borderLeft=e}let i=e.addEqnNum?0:-1;for(let e=n;e<a;e++)if("align"===t[e].type){let n=tH[t[e].align];for(let e of(l+=n,i+=1,o.children))"center"!==n.trim()&&i<e.children.length&&(e.children[i].classes=["tml-"+n.trim()]);r=!0}else if("separator"===t[e].type){if(r){let r="separator"===t[e+1].type?"0.15em double":"|"===t[e].separator?"0.06em solid":"0.06em dashed";for(let e of o.children)i<e.children.length&&(e.children[i].style.borderRight=r)}r=!1}if("separator"===t[t.length-1].type){let e="separator"===t[t.length-2].type?"0.15em double":"|"===t[t.length-1].separator?"0.06em solid":"0.06em dashed";for(let t of o.children)t.children[t.children.length-1].style.borderRight=e,t.children[t.children.length-1].style.paddingRight="0.4em"}}return e.addEqnNum&&(l="left "+(l.length>0?l:"center ")+"right "),l&&o.setAttribute("columnalign",l.trim()),e.envClasses.includes("small")&&(o=new et.MathNode("mstyle",[o])).setAttribute("scriptlevel","1"),o},tY=function(e,t){let r;-1===e.envName.indexOf("ed")&&tP(e);let a=[],o=tZ(e.parser,{cols:a,addEqnNum:"align"===e.envName||"alignat"===e.envName,emptySingleRow:!0,envClasses:["abut","jot"],maxNumCols:"split"===e.envName?2:void 0,leqno:e.parser.settings.leqno},"display"),l=0,i=e.envName.indexOf("at")>-1;if(t[0]&&i){let e="";for(let r=0;r<t[0].body.length;r++)e+=e9(t[0].body[r],"textord").text;if(isNaN(e))throw new n("The alignat enviroment requires a numeric first argument.");l=2*(r=Number(e))}o.body.forEach(function(e){if(i){let t=e.length/2;if(r<t)throw new n(`Too many math in a row: expected ${r}, but got ${t}`,e[0])}else l<e.length&&(l=e.length)});for(let e=0;e<l;++e){let t="r";e%2==1&&(t="l"),a[e]={type:"align",align:t}}return"split"===e.envName||(i?o.envClasses.push("alignat"):o.envClasses[0]="align"),o};t_({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){let r=(e4(t[0])?[t[0]]:e9(t[0],"ordgroup").body).map(function(e){let t=e5(e).text;if(-1!=="lcr".indexOf(t))return{type:"align",align:t};if("|"===t)return{type:"separator",separator:"|"};if(":"===t)return{type:"separator",separator:":"};throw new n("Unknown column alignment: "+t,e)}),[a,o]=tj(e.parser.gullet.macros),l={cols:r,envClasses:["array"],maxNumCols:r.length,arraystretch:a,arraycolsep:o};return tZ(e.parser,l,tV(e.envName))},mathmlBuilder:tW}),t_({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){let t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",a={envClasses:[],cols:[]};if("*"===e.envName.charAt(e.envName.length-1)){let t=e.parser;if(t.consumeSpaces(),"["===t.fetch().text){if(t.consume(),t.consumeSpaces(),r=t.fetch().text,-1==="lcr".indexOf(r))throw new n("Expected l or c or r",t.nextToken);t.consume(),t.consumeSpaces(),t.expect("]"),t.consume(),a.cols=[]}}let o=tZ(e.parser,a,"text");o.cols=Array(o.body[0].length).fill({type:"align",align:r});let[l,i]=tj(e.parser.gullet.macros);return t?{type:"leftright",mode:e.mode,body:[o],left:t[0],right:t[1],rightColor:void 0,arraystretch:l,arraycolsep:i}:o},mathmlBuilder:tW}),t_({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){let t=tZ(e.parser,{type:"small"},"script");return t.envClasses=["small"],t},mathmlBuilder:tW}),t_({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){let r=(e4(t[0])?[t[0]]:e9(t[0],"ordgroup").body).map(function(e){let t=e5(e).text;if(-1!=="lc".indexOf(t))return{type:"align",align:t};throw new n("Unknown column alignment: "+t,e)});if(r.length>1)throw new n("{subarray} can contain only one column");let a={cols:r,envClasses:["small"]};if((a=tZ(e.parser,a,"script")).body.length>0&&a.body[0].length>1)throw new n("{subarray} can contain only one column");return a},mathmlBuilder:tW}),t_({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){let t=tZ(e.parser,{cols:[],envClasses:["cases"]},tV(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},mathmlBuilder:tW}),t_({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:tY,mathmlBuilder:tW}),t_({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:tY,mathmlBuilder:tW}),t_({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){"gathered"!==e.envName&&tP(e);let t={cols:[],envClasses:["abut","jot"],addEqnNum:"gather"===e.envName,emptySingleRow:!0,leqno:e.parser.settings.leqno};return tZ(e.parser,t,"display")},mathmlBuilder:tW}),t_({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){tP(e);let t={addEqnNum:"equation"===e.envName,emptySingleRow:!0,singleRow:!0,maxNumCols:1,envClasses:["align"],leqno:e.parser.settings.leqno};return tZ(e.parser,t,"display")},mathmlBuilder:tW}),t_({type:"array",names:["multline","multline*"],props:{numArgs:0},handler(e){tP(e);let t={addEqnNum:"multline"===e.envName,maxNumCols:1,envClasses:["jot","multline"],leqno:e.parser.settings.leqno};return tZ(e.parser,t,"display")},mathmlBuilder:tW}),t_({type:"array",names:["CD"],props:{numArgs:0},handler:e=>(tP(e),function(e){let t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();let r=e.fetch().text;if("&"===r||"\\\\"===r)e.consume();else if("\\end"===r){0===t[t.length-1].length&&t.pop();break}else throw new n("Expected \\\\ or \\cr or \\end",e.nextToken)}let r=[],a=[r];for(let o=0;o<t.length;o++){let l=t[o],i=e7();for(let t=0;t<l.length;t++)if(e6(l[t])){r.push(i);let a=e5(l[t+=1]).text,o=[,,];if(o[0]={type:"ordgroup",mode:"math",body:[]},o[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(a)>-1);else if("<>AV".indexOf(a)>-1)for(let e=0;e<2;e++){let r=!0;for(let i=t+1;i<l.length;i++){if(te(l[i],a)){r=!1,t=i;break}if(e6(l[i]))throw new n("Missing a "+a+" character to complete a CD arrow.",l[i]);o[e].body.push(l[i])}if(r)throw new n("Missing a "+a+" character to complete a CD arrow.",l[t])}else throw new n('Expected one of "<>AV=|." after @.');let s=function(e,t,r){let n=e8[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{let e=r.callFunction("\\\\cdleft",[t[0]],[]),a=r.callFunction("\\Big",[{type:"atom",text:n,mode:"math",family:"rel"}],[]),o=r.callFunction("\\\\cdright",[t[1]],[]);return r.callFunction("\\\\cdparent",[{type:"ordgroup",mode:"math",body:[e,a,o],semisimple:!0}],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return r.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}(a,o,e);r.push(s),i=e7()}else i.body.push(l[t]);o%2==0?r.push(i):r.shift(),r=[],a.push(r)}return a.pop(),e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:"math",body:a,envClasses:["jot","cd"],cols:[],hLinesBeforeRow:Array(a.length+1).fill([])}}(e.parser)),mathmlBuilder:tW}),G({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new n(`${e.funcName} valid only within array environment`)}}),G({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler({parser:e,funcName:t},r){let a=r[0];if("ordgroup"!==a.type)throw new n("Invalid environment name",a);let o="";for(let e=0;e<a.body.length;++e)o+=e9(a.body[e],"textord").text;if("\\begin"===t){if(!Object.prototype.hasOwnProperty.call(tq,o))throw new n("No such environment: "+o,a);let t=tq[o],{args:r,optArgs:l}=e.parseArguments("\\begin{"+o+"}",t),i={mode:e.mode,envName:o,parser:e},s=t.handler(i,r,l);e.expect("\\end",!1);let u=e.nextToken,p=e9(e.parseFunction(),"environment");if(p.name!==o)throw new n(`Mismatch: \\begin{${o}} matched by \\end{${p.name}}`,u);return s}return{type:"environment",mode:e.mode,name:o,nameGroup:a}}}),G({type:"envTag",names:["\\env@tag"],props:{numArgs:1,argTypes:["math"]},handler:({parser:e},t)=>({type:"envTag",mode:e.mode,body:t[0]}),mathmlBuilder:(e,t)=>new et.MathNode("mrow")}),G({type:"noTag",names:["\\env@notag"],props:{numArgs:0},handler:({parser:e})=>({type:"noTag",mode:e.mode}),mathmlBuilder:(e,t)=>new et.MathNode("mrow")});let tK=(e,t)=>{if("mathrm"!==t||"ordgroup"!==e.body.type||1===e.body.body.length||"mathord"!==e.body.body[0].type)return!1;for(let t=1;t<e.body.body.length;t++){let r=e.body.body[t].type;if(!("mathord"===r||"textord"===r&&!isNaN(e.body.body[t].text)))return!1}return!0},tJ=(e,t)=>{let r=e.font,n=t.withFont(r),a=eL(e.body,n);if(0===a.children.length)return a;if("boldsymbol"===r&&["mo","mpadded","mrow"].includes(a.type))return a.style.fontWeight="bold",a;if(tK(e,r)){let e=a.children[0].children[0];delete e.attributes.mathvariant;for(let t=1;t<a.children.length;t++)e.children[0].text+="mn"===a.children[t].type?a.children[t].children[0].text:a.children[t].children[0].children[0].text;let t=new et.MathNode("mtext",new et.TextNode("​"));return new et.MathNode("mrow",[t,e])}let o="mo"===a.children[0].type;for(let e=1;e<a.children.length;e++)"mo"===a.children[e].type&&"boldsymbol"===r&&(a.children[e].style.fontWeight="bold"),"mi"!==a.children[e].type&&(o=!1),"normal"!==(a.children[e].attributes&&a.children[e].attributes.mathvariant||"")&&(o=!1);if(!o)return a;let l=a.children[0];for(let e=1;e<a.children.length;e++)l.children.push(a.children[e].children[0]);if(l.attributes.mathvariant&&"normal"===l.attributes.mathvariant){let e=new et.MathNode("mtext",new et.TextNode("​"));return new et.MathNode("mrow",[e,l])}return l},tQ={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};G({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\up@greek","\\boldsymbol","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bm","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{let n=R(r[0]),a=t;return a in tQ&&(a=tQ[a]),{type:"font",mode:e.mode,font:a.slice(1),body:n}},mathmlBuilder:tJ}),G({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:({parser:e,funcName:t,breakOnTokenText:r},n)=>{let{mode:a}=e,o=e.parseExpression(!0,r,!0);return{type:"font",mode:a,font:`math${t.slice(1)}`,body:{type:"ordgroup",mode:e.mode,body:o}}},mathmlBuilder:tJ});let t0=["display","text","script","scriptscript"],t1={auto:-1,display:0,text:0,script:1,scriptscript:2},t2=(e,t)=>{let r="auto"===e.scriptLevel?t.incrementLevel():"display"===e.scriptLevel?t.withLevel(tS.TEXT):"text"===e.scriptLevel?t.withLevel(tS.SCRIPT):t.withLevel(tS.SCRIPTSCRIPT),n=new et.MathNode("mfrac",[eL(e.numer,r),eL(e.denom,r)]);if(e.hasBarLine){if(e.barSize){let r=eJ(e.barSize,t);n.setAttribute("linethickness",r.number+r.unit)}}else n.setAttribute("linethickness","0px");if(null!=e.leftDelim||null!=e.rightDelim){let t=[];if(null!=e.leftDelim){let r=new et.MathNode("mo",[new et.TextNode(e.leftDelim.replace("\\",""))]);r.setAttribute("fence","true"),t.push(r)}if(t.push(n),null!=e.rightDelim){let r=new et.MathNode("mo",[new et.TextNode(e.rightDelim.replace("\\",""))]);r.setAttribute("fence","true"),t.push(r)}n=ez(t)}return"auto"!==e.scriptLevel&&((n=new et.MathNode("mstyle",[n])).setAttribute("displaystyle",String("display"===e.scriptLevel)),n.setAttribute("scriptlevel",t1[e.scriptLevel])),n};G({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{let n=r[0],a=r[1],o=!1,l=null,i=null,s="auto";switch(t){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":l="(",i=")";break;case"\\\\bracefrac":l="\\{",i="\\}";break;case"\\\\brackfrac":l="[",i="]";break;default:throw Error("Unrecognized genfrac command")}switch(t){case"\\dfrac":case"\\dbinom":s="display";break;case"\\tfrac":case"\\tbinom":s="text"}return{type:"genfrac",mode:e.mode,continued:!1,numer:n,denom:a,hasBarLine:o,leftDelim:l,rightDelim:i,scriptLevel:s,barSize:null}},mathmlBuilder:t2}),G({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:({parser:e,funcName:t},r)=>{let n=r[0],a=r[1];return{type:"genfrac",mode:e.mode,continued:!0,numer:n,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,scriptLevel:"display",barSize:null}}}),G({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler({parser:e,funcName:t,token:r}){let n;switch(t){case"\\over":n="\\frac";break;case"\\choose":n="\\binom";break;case"\\atop":n="\\\\atopfrac";break;case"\\brace":n="\\\\bracefrac";break;case"\\brack":n="\\\\brackfrac";break;default:throw Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:n,token:r}}});let t3=function(e){let t=null;return e.length>0&&(t="."===(t=e)?null:t),t};G({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler({parser:e},t){let r;let n=t[4],a=t[5],o=R(t[0]),l="atom"===o.type&&"open"===o.family?t3(o.text):null,i=R(t[1]),s="atom"===i.type&&"close"===i.family?t3(i.text):null,u=e9(t[2],"size"),p=null;r=!!u.isBlank||(p=u.value).number>0;let c="auto",d=t[3];return"ordgroup"===d.type?d.body.length>0&&(c=t0[Number(e9(d.body[0],"textord").text)]):c=t0[Number((d=e9(d,"textord")).text)],{type:"genfrac",mode:e.mode,numer:n,denom:a,continued:!1,hasBarLine:r,barSize:p,leftDelim:l,rightDelim:s,scriptLevel:c}},mathmlBuilder:t2}),G({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:({parser:e,funcName:t,token:r},n)=>({type:"infix",mode:e.mode,replaceWith:"\\\\abovefrac",barSize:e9(n[0],"size").value,token:r})}),G({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:({parser:e,funcName:t},r)=>{let n=r[0],a=s(e9(r[1],"infix").barSize),o=r[2],l=a.number>0;return{type:"genfrac",mode:e.mode,numer:n,denom:o,continued:!1,hasBarLine:l,barSize:a,leftDelim:null,rightDelim:null,scriptLevel:"auto"}},mathmlBuilder:t2}),G({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["hbox"],allowedInArgument:!0,allowedInText:!1},handler:({parser:e},t)=>({type:"hbox",mode:e.mode,body:j(t[0])}),mathmlBuilder(e,t){let r=t.withLevel(tS.TEXT);return eO(eE(e.body,r))}}),G({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:({parser:e,funcName:t},r)=>({type:"horizBrace",mode:e.mode,label:t,isOver:/^\\over/.test(t),base:r[0]}),mathmlBuilder:(e,t)=>{let r=el.mathMLnode(e.label);return r.style["math-depth"]=0,new et.MathNode(e.isOver?"mover":"munder",[eL(e.base,t),r])}}),G({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:({parser:e,token:t},r)=>{let a=r[1],o=e9(r[0],"url").url;if(!e.settings.isTrusted({command:"\\href",url:o}))throw new n('Function "\\href" is not trusted',t);return{type:"href",mode:e.mode,href:o,body:j(a)}},mathmlBuilder:(e,t)=>{let r=eE(e.body,t);return r instanceof J||(r=new J("mrow",[r])),r.setAttribute("href",e.href),r}}),G({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:({parser:e,token:t},r)=>{let a=e9(r[0],"url").url;if(!e.settings.isTrusted({command:"\\url",url:a}))throw new n(`Function "\\url" is not trusted`,t);let o=[];for(let e=0;e<a.length;e++){let t=a[e];"~"===t&&(t="\\textasciitilde"),o.push({type:"textord",mode:"text",text:t})}let l={type:"text",mode:e.mode,font:"\\texttt",body:o};return{type:"href",mode:e.mode,href:a,body:j(l)}}}),G({type:"html",names:["\\class","\\id","\\style","\\data"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:({parser:e,funcName:t,token:r},a)=>{let o;let l=e9(a[0],"raw").string,i=a[1];if(e.settings.strict)throw new n(`Function "${t}" is disabled in strict mode`,r);let s={};switch(t){case"\\class":s.class=l,o={command:"\\class",class:l};break;case"\\id":s.id=l,o={command:"\\id",id:l};break;case"\\style":s.style=l,o={command:"\\style",style:l};break;case"\\data":{let e=l.split(",");for(let t=0;t<e.length;t++){let r=e[t].split("=");if(2!==r.length)throw new n("Error parsing key-value for \\data");s["data-"+r[0].trim()]=r[1].trim()}o={command:"\\data",attributes:s};break}default:throw Error("Unrecognized html command")}if(!e.settings.isTrusted(o))throw new n(`Function "${t}" is not trusted`,r);return{type:"html",mode:e.mode,attributes:s,body:j(i)}},mathmlBuilder:(e,t)=>{let r=eE(e.body,t),n=[];for(let t in e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/)),r.classes=n,e.attributes)"class"!==t&&Object.prototype.hasOwnProperty.call(e.attributes,t)&&r.setAttribute(t,e.attributes[t]);return r}});let t9=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};{let t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new n("Invalid size: '"+e+"' in \\includegraphics");let r={number:+(t[1]+t[2]),unit:t[3]};if(!eY(r))throw new n("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r}};G({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:({parser:e,token:t},r,a)=>{let o={number:0,unit:"em"},l={number:.9,unit:"em"},i={number:0,unit:"em"},s="";if(a[0]){let e=e9(a[0],"raw").string.split(",");for(let t=0;t<e.length;t++){let r=e[t].split("=");if(2===r.length){let e=r[1].trim();switch(r[0].trim()){case"alt":s=e;break;case"width":o=t9(e);break;case"height":l=t9(e);break;case"totalheight":i=t9(e);break;default:throw new n("Invalid key: '"+r[0]+"' in \\includegraphics.")}}}}let u=e9(r[0],"url").url;if(""===s&&(s=(s=(s=u).replace(/^.*[\\/]/,"")).substring(0,s.lastIndexOf("."))),!e.settings.isTrusted({command:"\\includegraphics",url:u}))throw new n('Function "\\includegraphics" is not trusted',t);return{type:"includegraphics",mode:e.mode,alt:s,width:o,height:l,totalheight:i,src:u}},mathmlBuilder:(e,t)=>{let r=eJ(e.height,t),n={number:0,unit:"em"};e.totalheight.number>0&&e.totalheight.unit===r.unit&&e.totalheight.number>r.number&&(n.number=e.totalheight.number-r.number,n.unit=r.unit);let a=0;e.width.number>0&&(a=eJ(e.width,t));let o={height:r.number+n.number+"em"};a.number>0&&(o.width=a.number+a.unit),n.number>0&&(o.verticalAlign=-n.number+n.unit);let l=new K(e.src,e.alt,o);return l.height=r,l.depth=n,new et.MathNode("mtext",[l])}}),G({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler({parser:e,funcName:t,token:r},a){let o=e9(a[0],"size");if(e.settings.strict){let a="m"===t[1],l="mu"===o.value.unit;if(a){if(!l)throw new n(`LaTeX's ${t} supports only mu units, not ${o.value.unit} units`,r);if("math"!==e.mode)throw new n(`LaTeX's ${t} works only in math mode`,r)}else if(l)throw new n(`LaTeX's ${t} doesn't support mu units`,r)}return{type:"kern",mode:e.mode,dimension:o.value}},mathmlBuilder(e,t){let r=eJ(e.dimension,t),n="em"===r.unit?t5(r.number):"";if("text"===e.mode&&n.length>0){let e=new et.TextNode(n);return new et.MathNode("mtext",[e])}{let e=new et.MathNode("mspace");return e.setAttribute("width",r.number+r.unit),r.number<0&&(e.style.marginLeft=r.number+r.unit),e}}});let t5=function(e){return e>=.05555&&e<=.05556?" ":e>=.1666&&e<=.1667?" ":e>=.2222&&e<=.2223?" ":e>=.2777&&e<=.2778?"  ":""},t4=/[^A-Za-z_0-9-]/g;G({type:"label",names:["\\label"],props:{numArgs:1,argTypes:["raw"]},handler:({parser:e},t)=>({type:"label",mode:e.mode,string:t[0].string.replace(t4,"")}),mathmlBuilder(e,t){let r=new et.MathNode("mrow",[],["tml-label"]);return e.string.length>0&&r.setAttribute("id",e.string),r}});let t8=["\\clap","\\llap","\\rlap"];G({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap","\\clap","\\llap","\\rlap"],props:{numArgs:1,allowedInText:!0},handler:({parser:e,funcName:t,token:r},a)=>{if(t8.includes(t)){if(e.settings.strict&&"text"!==e.mode)throw new n(`{${t}} can be used only in text mode.
 Try \\math${t.slice(1)}`,r);t=t.slice(1)}else t=t.slice(5);let o=a[0];return{type:"lap",mode:e.mode,alignment:t,body:o}},mathmlBuilder:(e,t)=>{let r,n;if("llap"===e.alignment){let n=eD(j(e.body),t),a=new et.MathNode("mphantom",n);(r=new et.MathNode("mpadded",[a])).setAttribute("width","0px")}let a=eL(e.body,t);if("llap"===e.alignment?(a.style.position="absolute",a.style.right="0",a.style.bottom="0",n=new et.MathNode("mpadded",[r,a])):n=new et.MathNode("mpadded",[a]),"rlap"===e.alignment)e.body.body.length>0&&"genfrac"===e.body.body[0].type&&n.setAttribute("lspace","0.16667em");else{let t="llap"===e.alignment?"-1":"-0.5";n.setAttribute("lspace",t+"width"),"llap"===e.alignment?n.style.position="relative":(n.style.display="flex",n.style.justifyContent="center")}return n.setAttribute("width","0px"),n}}),G({type:"ordgroup",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler({funcName:e,parser:t},r){let n=t.mode;t.switchMode("math");let a="\\("===e?"\\)":"$",o=t.parseExpression(!1,a);return t.expect(a),t.switchMode(n),{type:"ordgroup",mode:t.mode,body:o}}}),G({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new n(`Mismatched ${e.funcName}`,t)}});let t7=(e,t)=>{switch(t.level){case tS.DISPLAY:return e.display;case tS.TEXT:return e.text;case tS.SCRIPT:return e.script;case tS.SCRIPTSCRIPT:return e.scriptscript;default:return e.text}};G({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:({parser:e},t)=>({type:"mathchoice",mode:e.mode,display:j(t[0]),text:j(t[1]),script:j(t[2]),scriptscript:j(t[3])}),mathmlBuilder:(e,t)=>eE(t7(e,t),t)});let t6=["text","textord","mathord","atom"],re=e=>{let t=new et.MathNode("mspace");return t.setAttribute("width",e+"em"),t};function rt(e,t){let r;let n=eD(e.body,t);if("minner"===e.mclass)r=new et.MathNode("mpadded",n);else if("mord"===e.mclass)e.isCharacterBox||"mathord"===n[0].type?((r=n[0]).type="mi",1===r.children.length&&r.children[0].text&&"∇"===r.children[0].text&&r.setAttribute("mathvariant","normal")):r=new et.MathNode("mi",n);else{r=new et.MathNode("mrow",n),e.mustPromote?((r=n[0]).type="mo",e.isCharacterBox&&e.body[0].text&&/[A-Za-z]/.test(e.body[0].text)&&r.setAttribute("mathvariant","italic")):r=new et.MathNode("mrow",n);let a=t.level<2;"mrow"===r.type?a&&("mbin"===e.mclass?(r.children.unshift(re(.2222)),r.children.push(re(.2222))):"mrel"===e.mclass?(r.children.unshift(re(.2778)),r.children.push(re(.2778))):"mpunct"===e.mclass?r.children.push(re(.1667)):"minner"===e.mclass&&(r.children.unshift(re(.0556)),r.children.push(re(.0556)))):"mbin"===e.mclass?(r.attributes.lspace=a?"0.2222em":"0",r.attributes.rspace=a?"0.2222em":"0"):"mrel"===e.mclass?(r.attributes.lspace=a?"0.2778em":"0",r.attributes.rspace=a?"0.2778em":"0"):"mpunct"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace=a?"0.1667em":"0"):"mopen"===e.mclass||"mclose"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace="0em"):"minner"===e.mclass&&a&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em"),"mopen"===e.mclass||"mclose"===e.mclass||(delete r.attributes.stretchy,delete r.attributes.form)}return r}G({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler({parser:e,funcName:t},r){let n=r[0],a=D.isCharacterBox(n),o=!0,l={type:"mathord",text:"",mode:e.mode};for(let t of n.body?n.body:[n])if(t6.includes(t.type))eu[e.mode][t.text]?l.text+=eu[e.mode][t.text].replace:t.text?l.text+=t.text:t.body&&t.body.map(e=>{l.text+=e.text});else{o=!1;break}return{type:"mclass",mode:e.mode,mclass:"m"+t.slice(5),body:j(o?l:n),isCharacterBox:a,mustPromote:o}},mathmlBuilder:rt});let rr=e=>{let t="ordgroup"===e.type&&e.body.length?e.body[0]:e;return"atom"===t.type&&("bin"===t.family||"rel"===t.family)?"m"+t.family:"mord"};G({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:({parser:e},t)=>({type:"mclass",mode:e.mode,mclass:rr(t[0]),body:j(t[1]),isCharacterBox:D.isCharacterBox(t[1])})}),G({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler({parser:e,funcName:t},r){let n=r[1],a=r[0],o={type:"op",mode:n.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,stack:!0,suppressBaseShift:"\\stackrel"!==t,body:j(n)};return{type:"supsub",mode:a.mode,base:o,sup:"\\underset"===t?null:a,sub:"\\underset"===t?a:null}},mathmlBuilder:rt});let rn=(e,t,r)=>{if(!e)return r;let n=eL(e,t);return"mrow"===n.type&&0===n.children.length?r:n};G({type:"multiscript",names:["\\sideset","\\pres@cript"],props:{numArgs:3},handler({parser:e,funcName:t,token:r},a){if(0===a[2].body.length)throw new n(t+"cannot parse an empty base.");let o=a[2].body[0];if(e.settings.strict&&"\\sideset"===t&&!o.symbol)throw new n("The base of \\sideset must be a big operator. Try \\prescript.");if(a[0].body.length>0&&"supsub"!==a[0].body[0].type||a[1].body.length>0&&"supsub"!==a[1].body[0].type)throw new n("\\sideset can parse only subscripts and superscripts in its first two arguments",r);let l=a[0].body.length>0?a[0].body[0]:null,i=a[1].body.length>0?a[1].body[0]:null;return l||i?l?{type:"multiscript",mode:e.mode,isSideset:"\\sideset"===t,prescripts:l,postscripts:i,base:o}:{type:"styling",mode:e.mode,scriptLevel:"text",body:[{type:"supsub",mode:e.mode,base:o,sup:i.sup,sub:i.sub}]}:o},mathmlBuilder(e,t){let r=eL(e.base,t),n=new et.MathNode("mprescripts"),a=new et.MathNode("none"),o=[],l=rn(e.prescripts.sub,t,a),i=rn(e.prescripts.sup,t,a);return e.isSideset&&(l.setAttribute("style","text-align: left;"),i.setAttribute("style","text-align: left;")),o=e.postscripts?[r,rn(e.postscripts.sub,t,a),rn(e.postscripts.sup,t,a),n,l,i]:[r,n,l,i],new et.MathNode("mmultiscripts",o)}}),G({type:"not",names:["\\not"],props:{numArgs:1,primitive:!0,allowedInText:!1},handler({parser:e},t){let r;let n=D.isCharacterBox(t[0]);return n?("\\"===(r=j(t[0]))[0].text.charAt(0)&&(r[0].text=eu.math[r[0].text].replace),r[0].text=r[0].text.slice(0,1)+"̸"+r[0].text.slice(1)):r=[{type:"textord",mode:"math",text:"̸"},{type:"kern",mode:"math",dimension:{number:-.6,unit:"em"}},t[0]],{type:"not",mode:e.mode,body:r,isCharacterBox:n}},mathmlBuilder:(e,t)=>e.isCharacterBox?eD(e.body,t,!0)[0]:eE(e.body,t)});let ra=["textord","mathord","atom"],ro=["\\smallint"],rl=["textord","mathord","ordgroup","close","leftright","font"],ri=e=>{e.attributes.lspace="0.1667em",e.attributes.rspace="0.1667em"},rs=(e,t)=>{let r;if(e.symbol)r=new J("mo",[eN(e.name,e.mode)]),ro.includes(e.name)?r.setAttribute("largeop","false"):e.limits?r.setAttribute("stretchy","true"):r.setAttribute("movablelimits","false"),e.fromMathOp&&ri(r);else if(e.body)r=new J("mo",eD(e.body,t)),e.fromMathOp&&ri(r);else if(r=new J("mi",[new Q(e.name.slice(1))]),!e.parentIsSupSub){let t=[r,new J("mo",[eN("⁡","text")])];if(e.needsLeadingSpace){let e=new J("mspace");e.setAttribute("width","0.1667em"),t.unshift(e)}if(!e.isFollowedByDelimiter){let e=new J("mspace");e.setAttribute("width","0.1667em"),t.push(e)}r=new J("mrow",t)}return r},ru={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨅":"\\bigsqcap","⨆":"\\bigsqcup","⨃":"\\bigcupdot","⨇":"\\bigdoublevee","⨈":"\\bigdoublewedge","⨉":"\\bigtimes"};G({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcupplus","\\bigcupdot","\\bigcap","\\bigcup","\\bigdoublevee","\\bigdoublewedge","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcap","\\bigsqcup","\\bigtimes","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:({parser:e,funcName:t},r)=>{let n=t;return 1===n.length&&(n=ru[n]),{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!0,stack:!1,name:n}},mathmlBuilder:rs}),G({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:({parser:e},t)=>{let r=t[0],n=r.body?r.body:[r],a=1===n.length&&ra.includes(n[0].type);return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:a,fromMathOp:!0,stack:!1,name:a?n[0].text:null,body:a?null:j(r)}},mathmlBuilder:rs});let rp={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint","∱":"\\intclockwise","∲":"\\varointclockwise","⨌":"\\iiiint","⨍":"\\intbar","⨎":"\\intBar","⨏":"\\fint","⨒":"\\rppolint","⨓":"\\scpolint","⨕":"\\pointint","⨖":"\\sqint","⨗":"\\intlarhk","⨘":"\\intx","⨙":"\\intcap","⨚":"\\intcup"};G({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\sgn","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler({parser:e,funcName:t}){let r=e.prevAtomType,n=e.gullet.future().text;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,stack:!1,isFollowedByDelimiter:tx(n),needsLeadingSpace:r.length>0&&rl.includes(r),name:t}},mathmlBuilder:rs}),G({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler({parser:e,funcName:t}){let r=e.prevAtomType,n=e.gullet.future().text;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,stack:!1,isFollowedByDelimiter:tx(n),needsLeadingSpace:r.length>0&&rl.includes(r),name:t}},mathmlBuilder:rs}),G({type:"op",names:["\\int","\\iint","\\iiint","\\iiiint","\\oint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\intbar","\\intBar","\\fint","\\rppolint","\\scpolint","\\pointint","\\sqint","\\intlarhk","\\intx","\\intcap","\\intcup","∫","∬","∭","∮","∯","∰","∱","∲","⨌","⨍","⨎","⨏","⨒","⨓","⨕","⨖","⨗","⨘","⨙","⨚"],props:{numArgs:0},handler({parser:e,funcName:t}){let r=t;return 1===r.length&&(r=rp[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,stack:!1,name:r}},mathmlBuilder:rs}),G({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{let n=r[0],a=e.prevAtomType,o=e.gullet.future().text;return{type:"operatorname",mode:e.mode,body:j(n),alwaysHandleSupSub:"\\operatornamewithlimits"===t,limits:!1,parentIsSupSub:!1,isFollowedByDelimiter:tx(o),needsLeadingSpace:a.length>0&&rl.includes(a)}},mathmlBuilder:(e,t)=>{let r,n=eD(e.body,t.withFont("mathrm")),a=!0;for(let e=0;e<n.length;e++){let t=n[e];if(t instanceof et.MathNode)switch("mrow"===t.type&&1===t.children.length&&t.children[0]instanceof et.MathNode&&(t=t.children[0]),t.type){case"mi":case"mn":case"ms":case"mtext":break;case"mspace":if(t.attributes.width){let r=t5(Number(t.attributes.width.replace("em","")));""===r?a=!1:n[e]=new et.MathNode("mtext",[new et.TextNode(r)])}break;case"mo":{let e=t.children[0];1===t.children.length&&e instanceof et.TextNode?e.text=e.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):a=!1;break}default:a=!1}else a=!1}if(a){let e=n.map(e=>e.toText()).join("");n=[new et.TextNode(e)]}else if(1===n.length&&["mover","munder"].includes(n[0].type)&&("mi"===n[0].children[0].type||"mtext"===n[0].children[0].type)){if(n[0].children[0].type="mi",e.parentIsSupSub)return new et.MathNode("mrow",n);{let e=new et.MathNode("mo",[eN("⁡","text")]);return et.newDocumentFragment([n[0],e])}}if(a?(r=new et.MathNode("mi",n),1===n[0].text.length&&r.setAttribute("mathvariant","normal")):r=new et.MathNode("mrow",n),!e.parentIsSupSub){let t=[r,new et.MathNode("mo",[eN("⁡","text")])];if(e.needsLeadingSpace){let e=new et.MathNode("mspace");e.setAttribute("width","0.1667em"),t.unshift(e)}if(!e.isFollowedByDelimiter){let e=new et.MathNode("mspace");e.setAttribute("width","0.1667em"),t.push(e)}return et.newDocumentFragment(t)}return r}}),tT["\\operatorname"]="\\@ifstar\\operatornamewithlimits\\operatorname@",P({type:"ordgroup",mathmlBuilder:(e,t)=>eE(e.body,t,e.semisimple)}),G({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{let r=t[0];return{type:"phantom",mode:e.mode,body:j(r)}},mathmlBuilder:(e,t)=>{let r=eD(e.body,t);return new et.MathNode("mphantom",r)}}),G({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{let r=t[0];return{type:"hphantom",mode:e.mode,body:r}},mathmlBuilder:(e,t)=>{let r=eD(j(e.body),t),n=new et.MathNode("mphantom",r),a=new et.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}}),G({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{let r=t[0];return{type:"vphantom",mode:e.mode,body:r}},mathmlBuilder:(e,t)=>{let r=eD(j(e.body),t),n=new et.MathNode("mphantom",r),a=new et.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}}),G({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>({type:"pmb",mode:e.mode,body:j(t[0])}),mathmlBuilder(e,t){let r=ee(eD(e.body,t));return r.setAttribute("style","font-weight:bold"),r}});let rc=(e,t)=>{let r=t.withLevel(tS.TEXT),n=new et.MathNode("mpadded",[eL(e.body,r)]),a=eJ(e.dy,t);return n.setAttribute("voffset",a.number+a.unit),a.number>0?n.style.padding=a.number+a.unit+" 0 0 0":n.style.padding="0 0 "+Math.abs(a.number)+a.unit+" 0",n};G({type:"raise",names:["\\raise","\\lower"],props:{numArgs:2,argTypes:["size","primitive"],primitive:!0},handler({parser:e,funcName:t},r){let n=e9(r[0],"size").value;"\\lower"===t&&(n.number*=-1);let a=r[1];return{type:"raise",mode:e.mode,dy:n,body:a}},mathmlBuilder:rc}),G({type:"raise",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler({parser:e,funcName:t},r){let n=e9(r[0],"size").value,a=r[1];return{type:"raise",mode:e.mode,dy:n,body:a}},mathmlBuilder:rc}),G({type:"ref",names:["\\ref","\\eqref"],props:{numArgs:1,argTypes:["raw"]},handler:({parser:e,funcName:t},r)=>({type:"ref",mode:e.mode,funcName:t,string:r[0].string.replace(t4,"")}),mathmlBuilder(e,t){let r="\\ref"===e.funcName?["tml-ref"]:["tml-ref","tml-eqref"],n=new et.MathNode("mtext",[new et.TextNode("")],r);return n.setAttribute("href","#"+e.string),n}}),G({type:"reflect",names:["\\reflectbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:({parser:e},t)=>({type:"reflect",mode:e.mode,body:t[0]}),mathmlBuilder(e,t){let r=eL(e.body,t);return r.style.transform="scaleX(-1)",r}}),G({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler:({parser:e})=>({type:"internal",mode:e.mode})}),G({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler({parser:e},t,r){let n=r[0],a=e9(t[0],"size"),o=e9(t[1],"size");return{type:"rule",mode:e.mode,shift:n&&e9(n,"size").value,width:a.value,height:o.value}},mathmlBuilder(e,t){let r=eJ(e.width,t),n=eJ(e.height,t),a=e.shift?eJ(e.shift,t):{number:0,unit:"em"},o=t.color&&t.getColor()||"black",l=new et.MathNode("mspace");if(r.number>0&&n.number>0&&l.setAttribute("mathbackground",o),l.setAttribute("width",r.number+r.unit),l.setAttribute("height",n.number+n.unit),0===a.number)return l;let i=new et.MathNode("mpadded",[l]);return a.number>=0?i.setAttribute("height","+"+a.number+a.unit):(i.setAttribute("height",a.number+a.unit),i.setAttribute("depth","+"+-a.number+a.unit)),i.setAttribute("voffset",a.number+a.unit),i}});let rd={"\\tiny":.5,"\\sixptsize":.6,"\\Tiny":.6,"\\scriptsize":.7,"\\footnotesize":.8,"\\small":.9,"\\normalsize":1,"\\large":1.2,"\\Large":1.44,"\\LARGE":1.728,"\\huge":2.074,"\\Huge":2.488};G({type:"sizing",names:["\\tiny","\\sixptsize","\\Tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],props:{numArgs:0,allowedInText:!0},handler:({breakOnTokenText:e,funcName:t,parser:r},n)=>{r.settings.strict&&"math"===r.mode&&console.log(`Temml strict-mode warning: Command ${t} is invalid in math mode.`);let a=r.parseExpression(!1,e,!0);return{type:"sizing",mode:r.mode,funcName:t,body:a}},mathmlBuilder:(e,t)=>{let r=t.withFontSize(rd[e.funcName]),n=ee(eD(e.body,r)),a=(rd[e.funcName]/t.fontSize).toFixed(4);return n.setAttribute("mathsize",a+"em"),n}}),G({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:({parser:e},t,r)=>{let n=!1,a=!1,o=r[0]&&e9(r[0],"ordgroup");if(o){let e="";for(let t=0;t<o.body.length;++t)if("t"===(e=o.body[t].text))n=!0;else if("b"===e)a=!0;else{n=!1,a=!1;break}}else n=!0,a=!0;let l=t[0];return{type:"smash",mode:e.mode,body:l,smashHeight:n,smashDepth:a}},mathmlBuilder:(e,t)=>{let r=new et.MathNode("mpadded",[eL(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}}),G({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler({parser:e},t,r){let n=r[0],a=t[0];return{type:"sqrt",mode:e.mode,body:a,index:n}},mathmlBuilder(e,t){let{body:r,index:n}=e;return n?new et.MathNode("mroot",[eL(r,t),eL(n,t.incrementLevel())]):new et.MathNode("msqrt",[eL(r,t)])}});let rm={display:0,text:1,script:2,scriptscript:3},rh={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]};G({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({breakOnTokenText:e,funcName:t,parser:r},n){let a=r.parseExpression(!0,e,!0),o=t.slice(1,t.length-5);return{type:"styling",mode:r.mode,scriptLevel:o,body:a}},mathmlBuilder(e,t){let r=t.withLevel(rm[e.scriptLevel]),n=ee(eD(e.body,r)),a=rh[e.scriptLevel];return n.setAttribute("scriptlevel",a[0]),n.setAttribute("displaystyle",a[1]),n}});let rg=/^m(over|under|underover)$/;P({type:"supsub",mathmlBuilder(e,t){let r,n,a=!1,o=!1,l=!1,i=!1;e.base&&"horizBrace"===e.base.type&&!!e.sup===e.base.isOver&&(a=!0,r=e.base.isOver),e.base&&!e.base.stack&&("op"===e.base.type||"operatorname"===e.base.type)&&(e.base.parentIsSupSub=!0,l=(o=!e.base.symbol)&&!e.isFollowedByDelimiter,i=e.base.needsLeadingSpace);let s=e.base&&e.base.stack?[eL(e.base.body[0],t)]:[eL(e.base,t)],u=t.inSubOrSup();if(e.sub&&s.push(eL(e.sub,u)),e.sup){let t=eL(e.sup,u),r="mrow"===t.type?t.children[0]:t;r&&"mo"===r.type&&r.classes.includes("tml-prime")&&e.base&&e.base.text&&"f"===e.base.text&&r.classes.push("prime-pad"),s.push(t)}if(a)n=r?"mover":"munder";else if(e.sub){if(e.sup){let r=e.base;n=r&&("op"===r.type&&r.limits||"multiscript"===r.type)&&(t.level===tS.DISPLAY||r.alwaysHandleSupSub)?"munderover":r&&"operatorname"===r.type&&r.alwaysHandleSupSub&&(t.level===tS.DISPLAY||r.limits)?"munderover":"msubsup"}else{let r=e.base;n=r&&"op"===r.type&&r.limits&&(t.level===tS.DISPLAY||r.alwaysHandleSupSub)?"munder":r&&"operatorname"===r.type&&r.alwaysHandleSupSub&&(r.limits||t.level===tS.DISPLAY)?"munder":"msub"}}else{let r=e.base;n=r&&"op"===r.type&&r.limits&&(t.level===tS.DISPLAY||r.alwaysHandleSupSub)?"mover":r&&"operatorname"===r.type&&r.alwaysHandleSupSub&&(r.limits||t.level===tS.DISPLAY)?"mover":"msup"}let p=new et.MathNode(n,s);if(o){let e=new et.MathNode("mo",[eN("⁡","text")]);if(i){let t=new et.MathNode("mspace");t.setAttribute("width","0.1667em"),p=et.newDocumentFragment([t,p,e])}else p=et.newDocumentFragment([p,e]);if(l){let e=new et.MathNode("mspace");e.setAttribute("width","0.1667em"),p.children.push(e)}}else rg.test(n)&&(p=new et.MathNode("mrow",[p]));return p}});let rb=["\\shortmid","\\nshortmid","\\shortparallel","\\nshortparallel","\\smallsetminus"],rf=["\\Rsh","\\Lsh","\\restriction"],rx=e=>{if(1===e.length){let t=e.codePointAt(0);return 8591<t&&t<8704}return e.indexOf("arrow")>-1||e.indexOf("harpoon")>-1||rf.includes(e)};P({type:"atom",mathmlBuilder(e,t){let r=new et.MathNode("mo",[eN(e.text,e.mode)]);return"punct"===e.family?r.setAttribute("separator","true"):"open"===e.family||"close"===e.family?"open"===e.family?(r.setAttribute("form","prefix"),r.setAttribute("stretchy","false")):"close"===e.family&&(r.setAttribute("form","postfix"),r.setAttribute("stretchy","false")):"\\mid"===e.text?(r.setAttribute("lspace","0.22em"),r.setAttribute("rspace","0.22em"),r.setAttribute("stretchy","false")):"rel"===e.family&&rx(e.text)?r.setAttribute("stretchy","false"):rb.includes(e.text)?r.setAttribute("mathsize","70%"):":"===e.text&&(r.attributes.lspace="0.2222em",r.attributes.rspace="0.2222em"),r}});let ry={mathbf:"bold",mathrm:"normal",textit:"italic",mathit:"italic",mathnormal:"italic",mathbb:"double-struck",mathcal:"script",mathfrak:"fraktur",mathscr:"script",mathsf:"sans-serif",mathtt:"monospace"},rw=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsc"===t.fontFamily)return"normal";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"sans-serif-bold":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";let r=t.font;if(!r||"mathnormal"===r)return null;let n=e.mode;switch(r){case"mathit":case"greekItalic":return"italic";case"mathrm":{let t=e.text.codePointAt(0);return 939<t&&t<975?"italic":"normal"}case"up@greek":return"normal";case"boldsymbol":case"mathboldsymbol":return"bold-italic";case"mathbf":return"bold";case"mathbb":return"double-struck";case"mathfrak":return"fraktur";case"mathscr":case"mathcal":return"script";case"mathsf":return"sans-serif";case"mathtt":return"monospace"}let a=e.text;return eu[n][a]&&eu[n][a].replace&&(a=eu[n][a].replace),Object.prototype.hasOwnProperty.call(ry,r)?ry[r]:null},rv=Object.freeze({B:8426,E:8427,F:8427,H:8387,I:8391,L:8390,M:8422,R:8393,e:8394,g:8355,o:8389}),rk=Object.freeze({C:8426,H:8388,I:8392,R:8394,Z:8398}),rA=Object.freeze({C:8383,H:8389,N:8391,P:8393,Q:8393,R:8395,Z:8394}),rq=Object.freeze({ϵ:119527,ϑ:119564,ϰ:119534,φ:119577,ϱ:119535,ϖ:119563}),r_=Object.freeze({ϵ:119643,ϑ:119680,ϰ:119650,φ:119693,ϱ:119651,ϖ:119679}),rS=Object.freeze({ϵ:119701,ϑ:119738,ϰ:119708,φ:119751,ϱ:119709,ϖ:119737}),rT=Object.freeze({ϵ:119759,ϑ:119796,ϰ:119766,φ:119809,ϱ:119767,ϖ:119795}),rN=Object.freeze({upperCaseLatin:{normal:e=>0,bold:e=>119743,italic:e=>119795,"bold-italic":e=>119847,script:e=>rv[e]||119899,"script-bold":e=>119951,fraktur:e=>rk[e]||120003,"fraktur-bold":e=>120107,"double-struck":e=>rA[e]||120055,"sans-serif":e=>120159,"sans-serif-bold":e=>120211,"sans-serif-italic":e=>120263,"sans-serif-bold-italic":e=>120380,monospace:e=>120367},lowerCaseLatin:{normal:e=>0,bold:e=>119737,italic:e=>"h"===e?8358:119789,"bold-italic":e=>119841,script:e=>rv[e]||119893,"script-bold":e=>119945,fraktur:e=>119997,"fraktur-bold":e=>120101,"double-struck":e=>120049,"sans-serif":e=>120153,"sans-serif-bold":e=>120205,"sans-serif-italic":e=>120257,"sans-serif-bold-italic":e=>120309,monospace:e=>120361},upperCaseGreek:{normal:e=>0,bold:e=>119575,italic:e=>119633,"bold-italic":e=>119575,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>119749,"sans-serif-bold":e=>119749,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>119807,monospace:e=>0},lowerCaseGreek:{normal:e=>0,bold:e=>119569,italic:e=>119627,"bold-italic":e=>"ϕ"===e?119678:119685,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>119743,"sans-serif-bold":e=>119743,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>119801,monospace:e=>0},varGreek:{normal:e=>0,bold:e=>rq[e]||-51,italic:e=>0,"bold-italic":e=>r_[e]||58,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>rS[e]||116,"sans-serif-bold":e=>rS[e]||116,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>rT[e]||174,monospace:e=>0},numeral:{normal:e=>0,bold:e=>120734,italic:e=>0,"bold-italic":e=>0,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>120744,"sans-serif":e=>120754,"sans-serif-bold":e=>120764,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>0,monospace:e=>120774}}),r$=(e,t)=>{let r=e.codePointAt(0),n=64<r&&r<91?"upperCaseLatin":96<r&&r<123?"lowerCaseLatin":912<r&&r<938?"upperCaseGreek":944<r&&r<970||"ϕ"===e?"lowerCaseGreek":120545<r&&r<120572||rq[e]?"varGreek":47<r&&r<58?"numeral":"other";return"other"===n?e:String.fromCodePoint(r+rN[n][t](e))},rO=Object.freeze({a:"ᴀ",b:"ʙ",c:"ᴄ",d:"ᴅ",e:"ᴇ",f:"ꜰ",g:"ɢ",h:"ʜ",i:"ɪ",j:"ᴊ",k:"ᴋ",l:"ʟ",m:"ᴍ",n:"ɴ",o:"ᴏ",p:"ᴘ",q:"ǫ",r:"ʀ",s:"s",t:"ᴛ",u:"ᴜ",v:"ᴠ",w:"ᴡ",x:"x",y:"ʏ",z:"ᴢ"}),rM=/^\d(?:[\d,.]*\d)?$/,rB=/[A-Ba-z]/,rC=new Set(["\\prime","\\dprime","\\trprime","\\qprime","\\backprime","\\backdprime","\\backtrprime"]),rz=(e,t,r)=>{let n=new et.MathNode(r,[e]),a=new et.MathNode("mstyle",[n]);return a.style["font-style"]="italic",a.style["font-family"]="Cambria, 'Times New Roman', serif","bold-italic"===t&&(a.style["font-weight"]="bold"),a};P({type:"mathord",mathmlBuilder(e,t){let r=eN(e.text,e.mode,t),n=r.text.codePointAt(0),a=rw(e,t)||(912<n&&n<938?"normal":"italic");if("script"===a)return r.text=r$(r.text,a),new et.MathNode("mi",[r],[t.font]);"italic"!==a&&(r.text=r$(r.text,a));let o=new et.MathNode("mi",[r]);return"normal"===a&&(o.setAttribute("mathvariant","normal"),1===r.text.length&&(o=new et.MathNode("mrow",[o]))),o}}),P({type:"textord",mathmlBuilder(e,t){let r,n=e.text,a=n.codePointAt(0);"textsc"===t.fontFamily&&96<a&&a<123&&(n=rO[n]);let o=eN(n,e.mode,t),l=rw(e,t)||"normal";if(rM.test(e.text)){let t="text"===e.mode?"mtext":"mn";if("italic"===l||"bold-italic"===l)return rz(o,l,t);"normal"!==l&&(o.text=o.text.split("").map(e=>r$(e,l)).join("")),r=new et.MathNode(t,[o])}else if("text"===e.mode)"normal"!==l&&(o.text=r$(o.text,l)),r=new et.MathNode("mtext",[o]);else if(rC.has(e.text))(r=new et.MathNode("mo",[o])).classes.push("tml-prime");else{let e=o.text;"italic"!==l&&(o.text=r$(o.text,l)),r=new et.MathNode("mi",[o]),o.text===e&&rB.test(e)&&r.setAttribute("mathvariant","italic")}return r}});let rI={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},rD={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};P({type:"spacing",mathmlBuilder(e,t){let r;if(Object.prototype.hasOwnProperty.call(rD,e.text))r=new et.MathNode("mtext",[new et.TextNode("\xa0")]);else if(Object.prototype.hasOwnProperty.call(rI,e.text))r=new et.MathNode("mo"),"\\nobreak"===e.text&&r.setAttribute("linebreak","nobreak");else throw new n(`Unknown type of space "${e.text}"`);return r}}),P({type:"tag"});let rE={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm","\\textsc":"textsc"},rL={"\\textbf":"textbf","\\textmd":"textmd"},rF={"\\textit":"textit","\\textup":"textup"},rG=(e,t)=>{let r=e.font;return r?rE[r]?t.withTextFontFamily(rE[r]):rL[r]?t.withTextFontWeight(rL[r]):"\\emph"===r?"textit"===t.fontShape?t.withTextFontShape("textup"):t.withTextFontShape("textit"):t.withTextFontShape(rF[r]):t};G({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textsc","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler({parser:e,funcName:t},r){let n=r[0];return{type:"text",mode:e.mode,body:j(n),font:t}},mathmlBuilder(e,t){let r=rG(e,t);return eO(eE(e.body,r))}}),G({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new n("\\verb ended by end of line instead of matching delimiter")},mathmlBuilder(e,t){let r=new et.TextNode(rP(e)),n=new et.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});let rP=e=>e.body.replace(/ /g,e.star?"␣":"\xa0");class rR{constructor(e,t,r){this.lexer=e,this.start=t,this.end=r}static range(e,t){return t?e&&e.loc&&t.loc&&e.loc.lexer===t.loc.lexer?new rR(e.loc.lexer,e.loc.start,t.loc.end):null:e&&e.loc}}class rj{constructor(e,t){this.text=e,this.loc=t}range(e,t){return new rj(t,rR.range(this,e))}}let rU="[ \r\n	]",rZ=`(\\\\[a-zA-Z@]+)${rU}*`,rV="[̀-ͯ]",rH=RegExp(`${rV}+$`),rX=`(${rU}+)|\\\\(
|[ \r	]+
?)[ \r	]*|([!-\\[\\]-\u2027\u202A-\uD7FF\uF900-\uFFFF]${rV}*|[\uD800-\uDBFF][\uDC00-\uDFFF]${rV}*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|${rZ}|\\\\[^\uD800-\uDFFF])`;class rW{constructor(e,t){this.input=e,this.settings=t,this.tokenRegex=RegExp(rX,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){let e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new rj("EOF",new rR(this,t,t));let r=this.tokenRegex.exec(e);if(null===r||r.index!==t)throw new n(`Unexpected character: '${e[t]}'`,new rj(e[t],new rR(this,t,t+1)));let a=r[6]||r[3]||(r[2]?"\\ ":" ");if(14===this.catcodes[a]){let t=e.indexOf("\n",this.tokenRegex.lastIndex);if(-1===t){if(this.tokenRegex.lastIndex=e.length,this.settings.strict)throw new n("% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode")}else this.tokenRegex.lastIndex=t+1;return this.lex()}return new rj(a,new rR(this,t,this.tokenRegex.lastIndex))}}class rY{constructor(e={},t={}){this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(0===this.undefStack.length)throw new n("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");let e=this.undefStack.pop();for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0===e[t]?delete this.current[t]:this.current[t]=e[t])}has(e){return Object.prototype.hasOwnProperty.call(this.current,e)||Object.prototype.hasOwnProperty.call(this.builtins,e)}get(e){return Object.prototype.hasOwnProperty.call(this.current,e)?this.current[e]:this.builtins[e]}set(e,t,r=!1){if(r){for(let t=0;t<this.undefStack.length;t++)delete this.undefStack[t][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{let t=this.undefStack[this.undefStack.length-1];t&&!Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=this.current[e])}this.current[e]=t}}let rK={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class rJ{constructor(e,t,r){this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new rY(tT,t.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new rW(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}future(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){let t,r,n;if(e){if(this.consumeSpaces(),"["!==this.future().text)return null;t=this.popToken(),{tokens:n,end:r}=this.consumeArg(["]"])}else({tokens:n,start:t,end:r}=this.consumeArg());return this.pushToken(new rj("EOF",r.loc)),this.pushTokens(n),t.range(r,"")}consumeSpaces(){for(;;)if(" "===this.future().text)this.stack.pop();else break}consumeArg(e){let t;let r=[],a=e&&e.length>0;a||this.consumeSpaces();let o=this.future(),l=0,i=0;do{if(t=this.popToken(),r.push(t),"{"===t.text)++l;else if("}"===t.text){if(-1==--l)throw new n("Extra }",t)}else if("EOF"===t.text)throw new n("Unexpected end of input in a macro argument, expected '"+(e&&a?e[i]:"}")+"'",t);if(e&&a){if((0===l||1===l&&"{"===e[i])&&t.text===e[i]){if(++i===e.length){r.splice(-i,i);break}}else i=0}}while(0!==l||a);return"{"===o.text&&"}"===r[r.length-1].text&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:o,end:t}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new n("The length of delimiters doesn't match the number of args!");let r=t[0];for(let e=0;e<r.length;e++){let t=this.popToken();if(r[e]!==t.text)throw new n("Use of the macro doesn't match its definition",t)}}let r=[];for(let n=0;n<e;n++)r.push(this.consumeArg(t&&t[n+1]).tokens);return r}expandOnce(e){let t=this.popToken(),r=t.text,a=t.noexpand?null:this._getExpansion(r);if(null==a||e&&a.unexpandable){if(e&&null==a&&"\\"===r[0]&&!this.isDefined(r))throw new n("Undefined control sequence: "+r);return this.pushToken(t),!1}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new n("Too many expansions: infinite loop or need to increase maxExpand setting");let o=a.tokens,l=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){o=o.slice();for(let e=o.length-1;e>=0;--e){let t=o[e];if("#"===t.text){if(0===e)throw new n("Incomplete placeholder at end of macro body",t);if("#"===(t=o[--e]).text)o.splice(e+1,1);else if(/^[1-9]$/.test(t.text))o.splice(e,2,...l[+t.text-1]);else throw new n("Not a valid argument number",t)}}}return this.pushTokens(o),o.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(!1===this.expandOnce()){let e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw Error()}expandMacro(e){return this.macros.has(e)?this.expandTokens([new rj(e)]):void 0}expandTokens(e){let t=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(!1===this.expandOnce(!0)){let e=this.stack.pop();e.treatAsRelax&&(e.noexpand=!1,e.treatAsRelax=!1),t.push(e)}return t}expandMacroAsText(e){let t=this.expandMacro(e);return t?t.map(e=>e.text).join(""):t}_getExpansion(e){let t=this.macros.get(e);if(null==t)return t;if(1===e.length){let t=this.lexer.catcodes[e];if(null!=t&&13!==t)return}let r="function"==typeof t?t(this):t;if("string"==typeof r){let e=0;if(-1!==r.indexOf("#")){let t=r.replace(/##/g,"");for(;-1!==t.indexOf("#"+(e+1));)++e}let t=new rW(r,this.settings),n=[],a=t.lex();for(;"EOF"!==a.text;)n.push(a),a=t.lex();return n.reverse(),{tokens:n,numArgs:e}}return r}isDefined(e){return this.macros.has(e)||Object.prototype.hasOwnProperty.call(L,e)||Object.prototype.hasOwnProperty.call(eu.math,e)||Object.prototype.hasOwnProperty.call(eu.text,e)||Object.prototype.hasOwnProperty.call(rK,e)}isExpandable(e){let t=this.macros.get(e);return null!=t?"string"==typeof t||"function"==typeof t||!t.unexpandable:Object.prototype.hasOwnProperty.call(L,e)&&!L[e].primitive}}let rQ=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,r0=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9",ₐ:"a",ₑ:"e",ₕ:"h",ᵢ:"i",ⱼ:"j",ₖ:"k",ₗ:"l",ₘ:"m",ₙ:"n",ₒ:"o",ₚ:"p",ᵣ:"r",ₛ:"s",ₜ:"t",ᵤ:"u",ᵥ:"v",ₓ:"x",ᵦ:"β",ᵧ:"γ",ᵨ:"ρ",ᵩ:"ϕ",ᵪ:"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","\xb9":"1","\xb2":"2","\xb3":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9",ᴬ:"A",ᴮ:"B",ᴰ:"D",ᴱ:"E",ᴳ:"G",ᴴ:"H",ᴵ:"I",ᴶ:"J",ᴷ:"K",ᴸ:"L",ᴹ:"M",ᴺ:"N",ᴼ:"O",ᴾ:"P",ᴿ:"R",ᵀ:"T",ᵁ:"U",ⱽ:"V",ᵂ:"W",ᵃ:"a",ᵇ:"b",ᶜ:"c",ᵈ:"d",ᵉ:"e",ᶠ:"f",ᵍ:"g",ʰ:"h",ⁱ:"i",ʲ:"j",ᵏ:"k",ˡ:"l",ᵐ:"m",ⁿ:"n",ᵒ:"o",ᵖ:"p",ʳ:"r",ˢ:"s",ᵗ:"t",ᵘ:"u",ᵛ:"v",ʷ:"w",ˣ:"x",ʸ:"y",ᶻ:"z",ᵝ:"β",ᵞ:"γ",ᵟ:"δ",ᵠ:"ϕ",ᵡ:"χ",ᶿ:"θ"}),r1=Object.freeze({"\ud835\udc9c":"A",ℬ:"B","\ud835\udc9e":"C","\ud835\udc9f":"D",ℰ:"E",ℱ:"F","\ud835\udca2":"G",ℋ:"H",ℐ:"I","\ud835\udca5":"J","\ud835\udca6":"K",ℒ:"L",ℳ:"M","\ud835\udca9":"N","\ud835\udcaa":"O","\ud835\udcab":"P","\ud835\udcac":"Q",ℛ:"R","\ud835\udcae":"S","\ud835\udcaf":"T","\ud835\udcb0":"U","\ud835\udcb1":"V","\ud835\udcb2":"W","\ud835\udcb3":"X","\ud835\udcb4":"Y","\ud835\udcb5":"Z"});var r2={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},r3={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",č:"č",ĉ:"ĉ",ċ:"ċ",ď:"ď",ḋ:"ḋ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ĺ:"ĺ",ľ:"ľ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ď:"Ď",Ḋ:"Ḋ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ĺ:"Ĺ",Ľ:"Ľ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ť:"Ť",Ṫ:"Ṫ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};let r9=["bin","op","open","punct","rel"],r5=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/;class r4{constructor(e,t,r=!1){this.mode="math",this.gullet=new rJ(e,t,this.mode),this.settings=t,this.isPreamble=r,this.leftrightDepth=0,this.prevAtomType=""}expect(e,t=!0){if(this.fetch().text!==e)throw new n(`Expected '${e}', got '${this.fetch().text}'`,this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");let e=this.parseExpression(!1);if(this.expect("EOF"),this.isPreamble){let e=Object.create(null);return Object.entries(this.gullet.macros.current).forEach(([t,r])=>{e[t]=r}),this.gullet.endGroup(),e}let t=this.gullet.macros.get("\\df@tag");return this.gullet.endGroup(),t&&(this.gullet.macros.current["\\df@tag"]=t),e}static get endOfExpression(){return["}","\\endgroup","\\end","\\right","\\endtoggle","&"]}subparse(e){let t=this.nextToken;this.consume(),this.gullet.pushToken(new rj("}")),this.gullet.pushTokens(e);let r=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,r}parseExpression(e,t,r){let n=[];for(this.prevAtomType="";;){"math"===this.mode&&this.consumeSpaces();let a=this.fetch();if(-1!==r4.endOfExpression.indexOf(a.text)||t&&a.text===t||r&&"\\middle"===a.text||e&&L[a.text]&&L[a.text].infix)break;let o=this.parseAtom(t);if(o){if("internal"===o.type)continue}else break;n.push(o),this.prevAtomType="atom"===o.type?o.family:o.type}return"text"===this.mode&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){let t,r=-1;for(let a=0;a<e.length;a++)if("infix"===e[a].type){if(-1!==r)throw new n("only one infix operator per group",e[a].token);r=a,t=e[a].replaceWith}if(-1===r||!t)return e;{let n,a;let o=e.slice(0,r),l=e.slice(r+1);return n=1===o.length&&"ordgroup"===o[0].type?o[0]:{type:"ordgroup",mode:this.mode,body:o},a=1===l.length&&"ordgroup"===l[0].type?l[0]:{type:"ordgroup",mode:this.mode,body:l},["\\\\abovefrac"===t?this.callFunction(t,[n,e[r],a],[]):this.callFunction(t,[n,a],[])]}}handleSupSubscript(e){let t=this.fetch(),r=t.text;this.consume(),this.consumeSpaces();let a=this.parseGroup(e);if(!a)throw new n("Expected group after '"+r+"'",t);return a}formatUnsupportedCmd(e){let t=[];for(let r=0;r<e.length;r++)t.push({type:"textord",mode:"text",text:e[r]});let r={type:"text",mode:this.mode,body:t};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]}}parseAtom(e){let t,r;let a=this.parseGroup("atom",e);if("text"===this.mode)return a;for(;;){this.consumeSpaces();let e=this.fetch();if("\\limits"===e.text||"\\nolimits"===e.text){if(a&&"op"===a.type){let t="\\limits"===e.text;a.limits=t,a.alwaysHandleSupSub=!0}else if(a&&"operatorname"===a.type)a.alwaysHandleSupSub&&(a.limits="\\limits"===e.text);else throw new n("Limit controls must follow a math operator",e);this.consume()}else if("^"===e.text){if(t)throw new n("Double superscript",e);t=this.handleSupSubscript("superscript")}else if("_"===e.text){if(r)throw new n("Double subscript",e);r=this.handleSupSubscript("subscript")}else if("'"===e.text){if(t)throw new n("Double superscript",e);let r={type:"textord",mode:this.mode,text:"\\prime"},a=[r];for(this.consume();"'"===this.fetch().text;)a.push(r),this.consume();"^"===this.fetch().text&&a.push(this.handleSupSubscript("superscript")),t={type:"ordgroup",mode:this.mode,body:a}}else if(r0[e.text]){let n=rQ.test(e.text),a=[];for(a.push(new rj(r0[e.text])),this.consume();;){let e=this.fetch().text;if(!r0[e]||rQ.test(e)!==n)break;a.unshift(new rj(r0[e])),this.consume()}let o=this.subparse(a);n?r={type:"ordgroup",mode:"math",body:o}:t={type:"ordgroup",mode:"math",body:o}}else break}if(!t&&!r)return a;if(a&&"multiscript"===a.type&&!a.postscripts)return a.postscripts={sup:t,sub:r},a;{let e=a&&("op"===a.type||"operatorname"===a.type)?tx(this.nextToken.text):void 0;return{type:"supsub",mode:this.mode,base:a,sup:t,sub:r,isFollowedByDelimiter:e}}}parseFunction(e,t){let r=this.fetch(),a=r.text,o=L[a];if(!o)return null;if(this.consume(),t&&"atom"!==t&&!o.allowedInArgument)throw new n("Got function '"+a+"' with no arguments"+(t?" as "+t:""),r);if("text"!==this.mode||o.allowedInText){if("math"===this.mode&&!1===o.allowedInMath)throw new n("Can't use function '"+a+"' in math mode",r)}else throw new n("Can't use function '"+a+"' in text mode",r);let l=this.prevAtomType,{args:i,optArgs:s}=this.parseArguments(a,o);return this.prevAtomType=l,this.callFunction(a,i,s,r,e)}callFunction(e,t,r,a,o){let l=L[e];if(l&&l.handler)return l.handler({funcName:e,parser:this,token:a,breakOnTokenText:o},t,r);throw new n(`No function handler for ${e}`)}parseArguments(e,t){let r=t.numArgs+t.numOptionalArgs;if(0===r)return{args:[],optArgs:[]};let a=[],o=[];for(let l=0;l<r;l++){let r=t.argTypes&&t.argTypes[l],i=l<t.numOptionalArgs;(t.primitive&&null==r||"sqrt"===t.type&&1===l&&null==o[0])&&(r="primitive");let s=this.parseGroupOfType(`argument to '${e}'`,r,i);if(i)o.push(s);else if(null!=s)a.push(s);else throw new n("Null argument, please report this as a bug")}return{args:a,optArgs:o}}parseGroupOfType(e,t,r){switch(t){case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,t);case"hbox":{let e=this.parseArgumentGroup(r,"text");return null!=e?{type:"styling",mode:e.mode,body:[e],scriptLevel:"text"}:null}case"raw":{let e=this.parseStringGroup("raw",r);return null!=e?{type:"raw",mode:"text",string:e.text}:null}case"primitive":{if(r)throw new n("A primitive argument cannot be optional");let t=this.parseGroup(e);if(null==t)throw new n("Expected group as "+e,this.fetch());return t}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new n("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;;){let e=this.fetch().text;if(" "===e||"\xa0"===e||"︎"===e)this.consume();else break}}parseStringGroup(e,t){let r;let n=this.gullet.scanArgument(t);if(null==n)return null;let a="";for(;"EOF"!==(r=this.fetch()).text;)a+=r.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,t){let r;let a=this.fetch(),o=a,l="";for(;"EOF"!==(r=this.fetch()).text&&e.test(l+r.text);)l+=(o=r).text,this.consume();if(""===l)throw new n("Invalid "+t+": '"+a.text+"'",a);return a.range(o,l)}parseSizeGroup(e){let t;let r=!1;if(this.gullet.consumeSpaces(),!(t=e||"{"===this.gullet.future().text?this.parseStringGroup("size",e):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;e||0!==t.text.length||(t.text="0pt",r=!0);let a=r5.exec(t.text);if(!a)throw new n("Invalid size: '"+t.text+"'",t);let o={number:+(a[1]+a[2]),unit:a[3]};if(!eY(o))throw new n("Invalid unit: '"+o.unit+"'",t);return{type:"size",mode:this.mode,value:o,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);let t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==t)return null;let r=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return r=t.text.replace(/{\u2044}/g,"/"),{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,t){let r=this.gullet.scanArgument(e);if(null==r)return null;let n=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();let a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();let o={type:"ordgroup",mode:this.mode,loc:r.loc,body:a};return t&&this.switchMode(n),o}parseGroup(e,t){let r;let n=this.fetch(),a=n.text;if("{"===a||"\\begingroup"===a||"\\toggle"===a){this.consume();let e="{"===a?"}":"\\begingroup"===a?"\\endgroup":"\\endtoggle";this.gullet.beginGroup();let t=this.parseExpression(!1,e),o=this.fetch();this.expect(e),this.gullet.endGroup(),r={type:"\\endtoggle"===o.text?"toggle":"ordgroup",mode:this.mode,loc:rR.range(n,o),body:t,semisimple:"\\begingroup"===a||void 0}}else null!=(r=this.parseFunction(t,e)||this.parseSymbol())||"\\"!==a[0]||Object.prototype.hasOwnProperty.call(rK,a)||(r=this.formatUnsupportedCmd(a),this.consume());return r}formLigatures(e){let t=e.length-1;for(let r=0;r<t;++r){let n=e[r],a=n.text;"-"===a&&"-"===e[r+1].text&&(r+1<t&&"-"===e[r+2].text?(e.splice(r,3,{type:"textord",mode:"text",loc:rR.range(n,e[r+2]),text:"---"}),t-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:rR.range(n,e[r+1]),text:"--"}),t-=1)),("'"===a||"`"===a)&&e[r+1].text===a&&(e.splice(r,2,{type:"textord",mode:"text",loc:rR.range(n,e[r+1]),text:a+a}),t-=1)}}parseSymbol(){let e;let t=this.fetch(),r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();let e=r.slice(5),t="*"===e.charAt(0);if(t&&(e=e.slice(1)),e.length<2||e.charAt(0)!==e.slice(-1))throw new n(`\\verb assertion failed --
                    please report what input caused this bug`);return{type:"verb",mode:"text",body:e=e.slice(1,-1),star:t}}if(Object.prototype.hasOwnProperty.call(r3,r[0])&&"math"===this.mode&&!eu[this.mode][r[0]]){if(this.settings.strict&&"math"===this.mode)throw new n(`Accented Unicode text character "${r[0]}" used in math mode`,t);r=r3[r[0]]+r.slice(1)}let a="math"===this.mode?rH.exec(r):null;if(a&&("i"===(r=r.substring(0,a.index))?r="ı":"j"===r&&(r="ȷ")),eu[this.mode][r]){let n,a=eu[this.mode][r].group;"bin"===a&&r9.includes(this.prevAtomType)&&(a="open");let o=rR.range(t);if(Object.prototype.hasOwnProperty.call(ei,a)){let e=a;n={type:"atom",mode:this.mode,family:e,loc:o,text:r}}else{if(r1[r]){this.consume();let e=this.fetch().text.charCodeAt(0);return(65024===e||65025===e)&&this.consume(),{type:"font",mode:"math",font:65025===e?"mathscr":"mathcal",body:{type:"mathord",mode:"math",loc:o,text:r1[r]}}}n={type:a,mode:this.mode,loc:o,text:r}}e=n}else{if(!(r.charCodeAt(0)>=128||rH.exec(r)))return null;if(this.settings.strict&&"math"===this.mode)throw new n(`Unicode text character "${r[0]}" used in math mode`,t);e={type:"textord",mode:"text",loc:rR.range(t),text:r}}if(this.consume(),a)for(let r=0;r<a[0].length;r++){let o=a[0][r];if(!r2[o])throw new n(`Unknown accent ' ${o}'`,t);let l=r2[o][this.mode]||r2[o].text;if(!l)throw new n(`Accent ${o} unsupported in ${this.mode} mode`,t);e={type:"accent",mode:this.mode,loc:rR.range(t),label:l,isStretchy:!1,base:e}}return e}}let r8=function(e,t){if(!("string"==typeof e||e instanceof String))throw TypeError("Temml can only parse string typed expression");let r=new r4(e,t);delete r.gullet.macros.current["\\df@tag"];let a=r.parse();if(!(a.length>0&&a[0].type&&"array"===a[0].type&&a[0].addEqnNum)&&r.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new n("\\tag works only in display mode");r.gullet.feed("\\df@tag"),a=[{type:"tag",mode:"text",body:a,tag:r.parse()}]}return a},r7=[2,2,3,3];class r6{constructor(e){this.level=e.level,this.color=e.color,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontSize=e.fontSize||1,this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.maxSize=e.maxSize}extend(e){let t={level:this.level,color:this.color,font:this.font,fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return new r6(t)}withLevel(e){return this.extend({level:e})}incrementLevel(){return this.extend({level:Math.min(this.level+1,3)})}inSubOrSup(){return this.extend({level:r7[this.level]})}withColor(e){return this.extend({color:e})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withFontSize(e){return this.extend({fontSize:e})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}getColor(){return this.color}}let ne=function(e,t,r={}){t.textContent="";let n="math"===t.tagName.toLowerCase();n&&(r.wrap="none");let a=nr(e,r);n?(t.textContent="",a.children.forEach(e=>{t.appendChild(e.toNode())})):a.children.length>1?(t.textContent="",a.children.forEach(e=>{t.appendChild(e.toNode())})):t.appendChild(a.toNode())};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: Temml doesn't work in quirks mode. Make sure your website has a suitable doctype."),ne=function(){throw new n("Temml doesn't work in quirks mode.")});let nt=function(e,t,r){if(r.throwOnError||!(e instanceof n))throw e;let a=new W(["temml-error"],[new Y(t+"\n"+e.toString())]);return a.style.color=r.errorColor,a.style.whiteSpace="pre-line",a},nr=function(e,t){let r=new E(t);try{let t=r8(e,r),n=new r6({level:r.displayMode?tS.DISPLAY:tS.TEXT,maxSize:r.maxSize});return function(e,t,r,n){let a=null;1===e.length&&"tag"===e[0].type&&(a=e[0].tag,e=e[0].body);let o=eD(e,r),l=n.displayMode||n.annotate?"none":n.wrap,i=0===o.length?null:o[0],s=1===o.length&&null===a&&i instanceof J?o[0]:function(e,t,r){let n=[],a=[],o=[],l=0,i=0,s=0;for(;i<e.length;){for(;e[i]instanceof U;)e.splice(i,1,...e[i].children);let r=e[i];if(r.attributes&&r.attributes.linebreak&&"newline"===r.attributes.linebreak){o.length>0&&a.push(new et.MathNode("mrow",o)),a.push(r),o=[];let e=new et.MathNode("mtd",a);e.style.textAlign="left",n.push(new et.MathNode("mtr",[e])),a=[],i+=1;continue}if(o.push(r),r.type&&"mo"===r.type&&1===r.children.length&&!Object.hasOwn(r.attributes,"movablelimits")){let n=r.children[0].text;if("([{⌊⌈⟨⟮⎰⟦⦃".indexOf(n)>-1)s+=1;else if(")]}⌋⌉⟩⟯⎱⟦⦄".indexOf(n)>-1)s-=1;else if(0===s&&"="===t&&"="===n){if((l+=1)>1){o.pop();let e=new et.MathNode("mrow",o);a.push(e),o=[r]}}else if(0===s&&"tex"===t&&"∇"!==n){let t=i<e.length-1?e[i+1]:null,r=!0;if(!(t&&"mtext"===t.type&&t.attributes.linebreak&&"nobreak"===t.attributes.linebreak))for(let t=i+1;t<e.length;t++){let n=e[t];if(n.type&&"mspace"===n.type&&!(n.attributes.linebreak&&"newline"===n.attributes.linebreak))o.push(n),i+=1,n.attributes&&n.attributes.linebreak&&"nobreak"===n.attributes.linebreak&&(r=!1);else break}if(r){let e=new et.MathNode("mrow",o);a.push(e),o=[]}}}i+=1}if(o.length>0){let e=new et.MathNode("mrow",o);a.push(e)}if(n.length>0){let e=new et.MathNode("mtd",a);e.style.textAlign="left";let t=new et.MathNode("mtr",[e]);n.push(t);let o=new et.MathNode("mtable",n);return r||(o.setAttribute("columnalign","left"),o.setAttribute("rowspacing","0em")),o}return et.newDocumentFragment(a)}(o,l,n.displayMode);if(a&&(s=eG(s,a,r,n.leqno)),n.annotate){let e=new et.MathNode("annotation",[new et.TextNode(t)]);e.setAttribute("encoding","application/x-tex"),s=new et.MathNode("semantics",[s,e])}let u=new et.MathNode("math",[s]);return n.xml&&u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n.displayMode&&(u.setAttribute("display","block"),u.style.display="block math",u.classes=["tml-display"]),u}(t,e,n,r)}catch(t){return nt(t,e,r)}};var nn={version:"0.10.32",render:ne,renderToString:function(e,t){return nr(e,t).toMarkup()},postProcess:function(e){let t={},r=0;for(let n of e.getElementsByClassName("tml-tageqn")){let e=n.getElementsByClassName("tml-eqn");e.length>0&&(r+=1,e[0].id="tml-eqn-"+r);let a=n.getElementsByClassName("tml-label");if(0!==a.length){if(e.length>0)t[a[0].id]=String(r);else{let e=n.getElementsByClassName("tml-tag");e.length>0&&(t[a[0].id]=e[0].textContent)}}}[...e.getElementsByClassName("tml-ref")].forEach(e=>{let r=t[e.getAttribute("href").slice(1)];-1===e.className.indexOf("tml-eqref")&&(r=(r=r.replace(/^\(/,"")).replace(/\($/,"")),"("!==r.charAt(0)&&(r="("+r),")"!==r.slice(-1)&&(r+=")"),e.textContent=r})},ParseError:n,definePreamble:function(e,t){let r=new E(t);if(r.macros={},!("string"==typeof e||e instanceof String))throw TypeError("Temml can only parse string typed expression");let n=new r4(e,r,!0);return delete n.gullet.macros.current["\\df@tag"],n.parse()},__parse:function(e,t){return r8(e,new E(t))},__renderToMathMLTree:nr,__defineSymbol:ep,__defineMacro:function(e,t){tT[e]=t}}}}]);